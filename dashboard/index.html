<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰¬å·ç©ºæ°”è´¨é‡é¢„æµ‹ç³»ç»Ÿ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }

        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-tertiary: #1a1a24;
            --text-primary: #ffffff;
            --text-secondary: #a0a0b0;
            --accent-blue: #3b82f6;
            --accent-green: #10b981;
            --accent-yellow: #f59e0b;
            --accent-red: #ef4444;
            --accent-purple: #8b5cf6;
        }

        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        .glass-card {
            background: rgba(26, 26, 36, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
        }

        .tab-btn {
            padding: 10px 20px;
            border-radius: 10px;
            transition: all 0.3s ease;
            color: var(--text-secondary);
            font-size: 14px;
            white-space: nowrap;
        }

        .tab-btn:hover {
            background: rgba(59, 130, 246, 0.1);
            color: var(--text-primary);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
            font-weight: 500;
        }

        .aqi-display {
            font-size: 120px;
            font-weight: 700;
            line-height: 1;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .metric-card {
            background: rgba(26, 26, 36, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
        }

        .metric-value {
            font-size: 28px;
            font-weight: 600;
        }

        .metric-label {
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th, .data-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .data-table th {
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 13px;
            text-transform: uppercase;
        }

        .data-table tr:hover td {
            background: rgba(59, 130, 246, 0.05);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
        }

        .status-good { background: var(--accent-green); }
        .status-moderate { background: var(--accent-yellow); }
        .status-unhealthy { background: var(--accent-red); }

        .pipeline-step {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            border-radius: 12px;
            background: rgba(26, 26, 36, 0.4);
            margin-bottom: 12px;
        }

        .pipeline-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-primary);
        }

        .chart-container {
            width: 100%;
            height: 300px;
        }

        .feature-tag {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            margin: 4px;
            background: rgba(59, 130, 246, 0.1);
            color: #60a5fa;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .methodology-section {
            margin-bottom: 32px;
        }

        .methodology-section h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--accent-blue);
        }

        .methodology-section p {
            color: var(--text-secondary);
            line-height: 1.8;
            font-size: 14px;
        }

        .limitation-card {
            padding: 16px;
            border-radius: 12px;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
            margin-bottom: 12px;
        }

        .limitation-card h4 {
            font-weight: 600;
            margin-bottom: 8px;
            color: #f87171;
        }

        .limitation-card p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.2); }

        /* éšè—æ»šåŠ¨æ¡ä½†ä¿æŒæ»šåŠ¨åŠŸèƒ½ */
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        /* ========== ç§»åŠ¨ç«¯é€‚é… ========== */
        @media (max-width: 768px) {
            /* Header è°ƒæ•´ */
            header {
                padding: 12px 16px !important;
            }
            header h1 {
                font-size: 1.25rem !important;
            }

            /* Tab å¯¼èˆªä¼˜åŒ– */
            nav.fixed {
                top: 60px !important;
                padding: 8px 12px !important;
            }
            .tab-btn {
                padding: 8px 12px !important;
                font-size: 12px !important;
            }

            /* ä¸»å†…å®¹åŒºåŸŸ */
            main {
                padding-top: 120px !important;
                padding-left: 12px !important;
                padding-right: 12px !important;
            }

            /* AQI å¤§æ•°å­— */
            .aqi-display {
                font-size: 72px !important;
            }

            /* å¡ç‰‡å†…è¾¹è· */
            .glass-card {
                padding: 16px !important;
            }
            .glass-card.p-6, .glass-card.p-8 {
                padding: 16px !important;
            }

            /* æŒ‡æ ‡å¡ç‰‡ */
            .metric-card {
                padding: 12px !important;
            }
            .metric-value {
                font-size: 20px !important;
            }
            .metric-label {
                font-size: 11px !important;
            }

            /* å›¾è¡¨å®¹å™¨é«˜åº¦ */
            .chart-container {
                height: 250px !important;
                min-height: 250px !important;
            }

            /* è¡¨æ ¼æ»šåŠ¨ */
            .data-table {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
            .data-table th, .data-table td {
                padding: 8px 12px !important;
                font-size: 12px !important;
            }

            /* æ ‡é¢˜å¤§å° */
            .section-title {
                font-size: 16px !important;
            }
            h2 {
                font-size: 1.25rem !important;
            }
            h3 {
                font-size: 1rem !important;
            }

            /* ç‰¹å¾æ ‡ç­¾ */
            .feature-tag {
                font-size: 10px !important;
                padding: 4px 8px !important;
            }

            /* ä»£ç å— */
            code {
                font-size: 11px !important;
            }

            /* ç½‘æ ¼é—´è· */
            .gap-6 {
                gap: 12px !important;
            }
            .gap-4 {
                gap: 8px !important;
            }

            /* æ–¹æ³•è®ºæ–‡å­— */
            .methodology-section p {
                font-size: 14px !important;
                line-height: 1.6 !important;
            }

            /* é™åˆ¶æ€§è¯´æ˜å¡ç‰‡ */
            .limitation-card {
                padding: 12px !important;
            }
            .limitation-card h4 {
                font-size: 14px !important;
            }
            .limitation-card p {
                font-size: 12px !important;
            }
        }

        /* è¶…å°å±å¹• (< 480px) */
        @media (max-width: 480px) {
            .aqi-display {
                font-size: 56px !important;
            }
            .tab-btn {
                padding: 6px 10px !important;
                font-size: 11px !important;
            }
            .metric-value {
                font-size: 18px !important;
            }
            .chart-container {
                height: 200px !important;
                min-height: 200px !important;
            }
        }

        
        /* æ¨¡å‹åˆ‡æ¢ â€” !important ç¡®ä¿ä¼˜å…ˆçº§é«˜äº Tailwind åŠ¨æ€ç”Ÿæˆçš„ utility class */
        .dl-only { display: none !important; }
        body.dl-mode .dl-only { display: block !important; }
        body.dl-mode .grid.dl-only { display: grid !important; }
        body.dl-mode button.dl-only { display: inline-block !important; }
        body.dl-mode .ml-only { display: none !important; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 px-4 md:px-6 py-3 md:py-4" style="background: rgba(10, 10, 15, 0.9); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(255,255,255,0.05);">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center gap-2 md:gap-3">
                <div class="w-8 h-8 md:w-10 md:h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center flex-shrink-0">
                    <span class="text-lg md:text-xl">ğŸŒ</span>
                </div>
                <div class="min-w-0">
                    <h1 class="text-sm md:text-lg font-semibold truncate">æ‰¬å·ç©ºæ°”è´¨é‡é¢„æµ‹</h1>
                    <p class="text-xs text-gray-500 hidden sm:block">Yangzhou AQI Prediction</p>
                </div>
            </div>
            <div class="flex items-center gap-2 md:gap-4 text-xs md:text-sm text-gray-400 flex-shrink-0">
                <!-- æ¨¡å‹åˆ‡æ¢æŒ‰é’® -->
                <div id="modelSwitch" class="flex rounded-lg overflow-hidden border border-gray-700" style="font-size: 12px;">
                    <button id="btn-xgboost" class="px-3 py-1 bg-blue-600 text-white transition-all" onclick="switchModel('xgboost')">æœºå™¨å­¦ä¹ </button>
                    <button id="btn-dl" class="px-3 py-1 bg-transparent text-gray-400 transition-all hover:bg-gray-700" onclick="switchModel('dl')">æ·±åº¦å­¦ä¹ </button>
                </div>
                <span id="updateTime" class="hidden sm:inline">æ›´æ–°: --</span>
                <span class="status-dot status-good"></span>
            </div>
        </div>
    </header>

    <!-- Tab Navigation -->
    <nav class="fixed top-14 md:top-20 left-0 right-0 z-40 px-3 md:px-6 py-2 md:py-3" style="background: rgba(10, 10, 15, 0.8); backdrop-filter: blur(20px);">
        <div class="max-w-7xl mx-auto flex gap-1 md:gap-2 overflow-x-auto pb-2 scrollbar-hide">
            <button class="tab-btn active" data-tab="overview">æ¦‚è§ˆ</button>
            <button class="tab-btn" data-tab="pipeline">æ•°æ®ç®¡é“</button>
            <button class="tab-btn" data-tab="features">ç‰¹å¾åˆ†æ</button>
            <button class="tab-btn" data-tab="model">æ¨¡å‹è¯¦æƒ…</button>
            <button class="tab-btn" data-tab="baseline">åŸºçº¿å¯¹æ¯”</button>
            <button class="tab-btn" data-tab="validation">å†å²éªŒè¯</button>
            <button class="tab-btn" data-tab="explainability">æ¨¡å‹è§£é‡Š</button>
            <button class="tab-btn dl-only" data-tab="deeplearning">æ·±åº¦å­¦ä¹ </button>
            <button class="tab-btn" data-tab="methodology">æ–¹æ³•è®º</button>
            <button class="tab-btn" data-tab="limitations">å±€é™æ€§</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-28 md:pt-36 px-3 md:px-6 pb-8 md:pb-12">
        <div class="max-w-7xl mx-auto">

            <!-- Tab 1: Overview -->
            <div id="tab-overview" class="tab-content active">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Current AQI -->
                    <div class="glass-card p-8 text-center">
                        <div class="aqi-display" id="currentAqi">--</div>
                        <div class="text-2xl font-medium mt-2" id="aqiLevel">åŠ è½½ä¸­...</div>
                        <div class="text-gray-500 mt-1">ç©ºæ°”è´¨é‡æŒ‡æ•°</div>
                        <div class="mt-2 text-xs text-gray-500" id="aqiDataTime">æ•°æ®æ—¶é—´: --</div>
                        <div class="mt-2 text-sm text-gray-400" id="dominantPollutant">ä¸»è¦æ±¡æŸ“ç‰©: --</div>
                    </div>

                    <!-- Key Metrics -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">å…³é”®æŒ‡æ ‡</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="metric-card">
                                <div class="metric-value text-blue-400" id="pm25Value">--</div>
                                <div class="metric-label">PM2.5 (Î¼g/mÂ³)</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value text-green-400" id="pm10Value">--</div>
                                <div class="metric-label">PM10 (Î¼g/mÂ³)</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value text-yellow-400" id="tempValue">--</div>
                                <div class="metric-label">æ¸©åº¦ (Â°C)</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value text-purple-400" id="humidityValue">--</div>
                                <div class="metric-label">æ¹¿åº¦ (%)</div>
                            </div>
                        </div>
                    </div>

                    <!-- Prediction Chart -->
                    <div class="glass-card p-6 lg:col-span-3">
                        <h3 class="section-title">æœªæ¥ 24 å°æ—¶é¢„æµ‹ <span class="text-sm font-normal text-gray-500">(åŒ—äº¬æ—¶é—´)</span> <span id="modelBadge" class="text-xs px-2 py-0.5 rounded-full ml-2" style="background: rgba(59,130,246,0.2); color: #60a5fa;">æœºå™¨å­¦ä¹  Â· XGBoost</span></h3>
                        <div id="predictionChart" class="chart-container" style="height: 350px;"></div>
                    </div>

                    <!-- Real Data Declaration -->
                    <div class="glass-card p-4 lg:col-span-3" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(59, 130, 246, 0.1)); border: 1px solid rgba(16, 185, 129, 0.3);">
                        <div class="flex items-center gap-3">
                            <span class="text-green-400 text-2xl">âœ“</span>
                            <div>
                                <div class="font-medium text-green-400">çœŸå®æ•°æ®å£°æ˜</div>
                                <div class="text-sm text-gray-400 ml-only">æœ¬ç³»ç»Ÿæ‰€æœ‰æ•°æ®å‡æ¥è‡ªå…¬å¼€æ•°æ®æºçš„çœŸå®è§‚æµ‹æ•°æ®ï¼šWAQI å®æ—¶ç©ºæ°”è´¨é‡ç›‘æµ‹ã€Open-Meteo æ°”è±¡è§‚æµ‹ã€é«˜å¾·åœ°å›¾å¤©æ°”æœåŠ¡ã€‚é¢„æµ‹ç»“æœåŸºäºçœŸå®å†å²æ•°æ®è®­ç»ƒçš„æœºå™¨å­¦ä¹ æ¨¡å‹ç”Ÿæˆï¼Œéæ¨¡æ‹Ÿæ•°æ®ã€‚</div>
                                <div class="text-sm text-gray-400 dl-only">æœ¬ç³»ç»Ÿæ‰€æœ‰æ•°æ®å‡æ¥è‡ªå…¬å¼€æ•°æ®æºçš„çœŸå®è§‚æµ‹æ•°æ®ï¼šWAQI å®æ—¶ç©ºæ°”è´¨é‡ç›‘æµ‹ã€Open-Meteo æ°”è±¡è§‚æµ‹ã€é«˜å¾·åœ°å›¾å¤©æ°”æœåŠ¡ã€‚é¢„æµ‹ç»“æœåŸºäºçœŸå®å†å²æ•°æ®è®­ç»ƒçš„æ·±åº¦å­¦ä¹ æ¨¡å‹ç”Ÿæˆï¼Œéæ¨¡æ‹Ÿæ•°æ®ã€‚</div>
                            </div>
                        </div>
                    </div>

                    <!-- Methodology Summary Card -->
                    <div class="glass-card p-6 lg:col-span-3">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="section-title mb-0">æ–¹æ³•è®ºæ¦‚è¿°</h3>
                            <button onclick="document.querySelector('[data-tab=methodology]').click()" class="text-sm text-blue-400 hover:text-blue-300">æŸ¥çœ‹è¯¦æƒ… â†’</button>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 ml-only">
                            <div class="p-4 rounded-xl" style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2);">
                                <div class="text-blue-400 text-2xl mb-2">ğŸ“¥</div>
                                <div class="font-medium">æ•°æ®é‡‡é›†</div>
                                <div class="text-sm text-gray-400 mt-1">5 ä¸ªæ•°æ®æºï¼Œ~9000 æ¡å†å²è®°å½•ï¼Œå°æ—¶çº§æ›´æ–°</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2);">
                                <div class="text-green-400 text-2xl mb-2">âš™ï¸</div>
                                <div class="font-medium">ç‰¹å¾å·¥ç¨‹</div>
                                <div class="text-sm text-gray-400 mt-1">127 ä¸ªå€™é€‰ç‰¹å¾ï¼Œç­›é€‰ä¿ç•™ 20 ä¸ªé«˜ä»·å€¼ç‰¹å¾</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2);">
                                <div class="text-purple-400 text-2xl mb-2">ğŸ¤–</div>
                                <div class="font-medium">æ¨¡å‹è®­ç»ƒ</div>
                                <div class="text-sm text-gray-400 mt-1">XGBoost æ¨¡å‹ï¼Œ5 æŠ˜æ—¶åºäº¤å‰éªŒè¯</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.2);">
                                <div class="text-yellow-400 text-2xl mb-2">ğŸ“Š</div>
                                <div class="font-medium">æ¨¡å‹æ€§èƒ½ (1h)</div>
                                <div class="text-sm text-gray-400 mt-1">MAE=6.03, RÂ²=0.86ï¼ˆæ–¹æ³•è®ºæ­£ç¡®ç‰ˆæœ¬ï¼‰</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 dl-only">
                            <div class="p-4 rounded-xl" style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2);">
                                <div class="text-blue-400 text-2xl mb-2">ğŸ“¥</div>
                                <div class="font-medium">æ•°æ®é‡‡é›†</div>
                                <div class="text-sm text-gray-400 mt-1">5åŸå¸‚ AQI+PM2.5+PM10ï¼Œæ°”è±¡17å˜é‡ï¼Œå°æ—¶çº§</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2);">
                                <div class="text-green-400 text-2xl mb-2">âš™ï¸</div>
                                <div class="font-medium">DL ç‰¹å¾å·¥ç¨‹</div>
                                <div class="text-sm text-gray-400 mt-1">47 ç»´ç‰¹å¾ï¼šæ±¡æŸ“ç‰©+æ°”è±¡+æ—¶é—´ç¼–ç +ç©ºé—´æ»å+é£å‘æ„ŸçŸ¥</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2);">
                                <div class="text-purple-400 text-2xl mb-2">ğŸ§ </div>
                                <div class="font-medium">LSTM+Attention</div>
                                <div class="text-sm text-gray-400 mt-1">132K å‚æ•°ï¼Œ48h æ»‘åŠ¨çª—å£ï¼ŒONNX æ¨ç† &lt;1ms</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.2);">
                                <div class="text-yellow-400 text-2xl mb-2">ğŸ“Š</div>
                                <div class="font-medium">æ¨¡å‹æ€§èƒ½ (1h)</div>
                                <div class="text-sm text-gray-400 mt-1">MAE=11.37, RÂ²=0.80ï¼ˆæ·±åº¦å­¦ä¹ ç‰ˆæœ¬ï¼‰</div>
                            </div>
                        </div>
                    </div>

                    <!-- Model Performance Summary -->
                    <div class="glass-card p-6 lg:col-span-2 ml-only">
                        <h3 class="section-title">æ ¸å¿ƒæŠ€æœ¯äº®ç‚¹</h3>
                        <div class="space-y-3">
                            <div class="flex items-start gap-3"><span class="text-green-400">âœ“</span><div><div class="font-medium">å¤šæºæ•°æ®èåˆ</div><div class="text-sm text-gray-400">æ•´åˆ WAQIã€Open-Meteoã€é«˜å¾·ç­‰ 5 ä¸ªæ•°æ®æº</div></div></div>
                            <div class="flex items-start gap-3"><span class="text-green-400">âœ“</span><div><div class="font-medium">æ—¶åºç‰¹å¾å·¥ç¨‹</div><div class="text-sm text-gray-400">æ»åç‰¹å¾ã€æ»šåŠ¨ç»Ÿè®¡ã€å‘¨æœŸç¼–ç ç­‰ 127 ä¸ªå€™é€‰ç‰¹å¾</div></div></div>
                            <div class="flex items-start gap-3"><span class="text-green-400">âœ“</span><div><div class="font-medium">ä¸¥æ ¼è¯„ä¼°ä½“ç³»</div><div class="text-sm text-gray-400">åŸºçº¿å¯¹æ¯”ã€æ¶ˆèå®éªŒã€æ—¶åºäº¤å‰éªŒè¯</div></div></div>
                            <div class="flex items-start gap-3"><span class="text-green-400">âœ“</span><div><div class="font-medium">å¯è§£é‡Šæ€§åˆ†æ</div><div class="text-sm text-gray-400">SHAP ç‰¹å¾é‡è¦æ€§ï¼Œæ˜ç¡®é¢„æµ‹ä¾æ®</div></div></div>
                        </div>
                    </div>
                    <div class="glass-card p-6 lg:col-span-2 dl-only">
                        <h3 class="section-title">æ ¸å¿ƒæŠ€æœ¯äº®ç‚¹</h3>
                        <div class="space-y-3">
                            <div class="flex items-start gap-3"><span class="text-purple-400">âœ“</span><div><div class="font-medium">Bi-LSTM æ—¶åºç¼–ç </div><div class="text-sm text-gray-400">åŒå‘ LSTM åŒæ—¶æ•æ‰å‰å‘å’Œåå‘æ—¶åºä¾èµ–</div></div></div>
                            <div class="flex items-start gap-3"><span class="text-purple-400">âœ“</span><div><div class="font-medium">Multi-Head Attention</div><div class="text-sm text-gray-400">4 å¤´æ³¨æ„åŠ›æœºåˆ¶è‡ªåŠ¨å­¦ä¹ å…³é”®æ—¶é—´æ­¥çš„æƒé‡</div></div></div>
                            <div class="flex items-start gap-3"><span class="text-purple-400">âœ“</span><div><div class="font-medium">ç©ºé—´ç‰¹å¾èåˆ</div><div class="text-sm text-gray-400">ä¸Šé£å‘åŸå¸‚ï¼ˆå—äº¬/é•‡æ±Ÿ/æ³°å·/å—é€šï¼‰AQI ç©ºé—´æ»å + é£å‘æ„ŸçŸ¥åŠ æƒ</div></div></div>
                            <div class="flex items-start gap-3"><span class="text-purple-400">âœ“</span><div><div class="font-medium">ONNX é«˜æ•ˆæ¨ç†</div><div class="text-sm text-gray-400">æ¨ç†å»¶è¿Ÿ &lt;1msï¼Œæ¨¡å‹ä»… 0.52MBï¼Œé€‚åˆå®æ—¶éƒ¨ç½²</div></div></div>
                        </div>
                    </div>

                    <!-- Data Leakage Explanation -->
                    <div class="glass-card p-6 lg:col-span-3 ml-only">
                        <h3 class="section-title">å…³äºç‰¹å¾å·¥ç¨‹çš„è¯´æ˜ï¼šä¸ºä»€ä¹ˆä½¿ç”¨å†å² AQI ä¸æ˜¯æ•°æ®æ³„æ¼ï¼Ÿ</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-medium text-blue-400 mb-2">ä»€ä¹ˆæ˜¯æ»åç‰¹å¾ (Lag Features)ï¼Ÿ</h4>
                                <p class="text-sm text-gray-400 leading-relaxed">
                                    æ»åç‰¹å¾æ˜¯æŒ‡ä½¿ç”¨<strong class="text-white">è¿‡å»æ—¶åˆ»</strong>çš„ç›®æ ‡å˜é‡å€¼ä½œä¸ºç‰¹å¾ã€‚ä¾‹å¦‚ï¼š
                                </p>
                                <ul class="text-sm text-gray-400 mt-2 space-y-1">
                                    <li>â€¢ <code class="text-blue-300">AQI_lag_1h</code> = 1 å°æ—¶å‰çš„ AQI å€¼</li>
                                    <li>â€¢ <code class="text-blue-300">AQI_lag_3h</code> = 3 å°æ—¶å‰çš„ AQI å€¼</li>
                                    <li>â€¢ <code class="text-blue-300">AQI_lag_24h</code> = 24 å°æ—¶å‰çš„ AQI å€¼</li>
                                </ul>
                                <p class="text-sm text-gray-400 mt-3">
                                    è¿™å°±åƒé¢„æµ‹æ˜å¤©çš„å¤©æ°”æ—¶ï¼Œå‚è€ƒä»Šå¤©å’Œæ˜¨å¤©çš„å¤©æ°”ä¸€æ ·è‡ªç„¶ã€‚
                                </p>
                            </div>
                            <div>
                                <h4 class="font-medium text-green-400 mb-2">ä¸ºä»€ä¹ˆè¿™ä¸æ˜¯æ•°æ®æ³„æ¼ï¼Ÿ</h4>
                                <div class="space-y-3">
                                    <div class="p-3 rounded-lg" style="background: rgba(16, 185, 129, 0.1);">
                                        <div class="font-medium text-sm">1. æ—¶é—´ä¸¥æ ¼åˆ†ç¦»</div>
                                        <div class="text-xs text-gray-400">æ‰€æœ‰ç‰¹å¾ä»…ä½¿ç”¨é¢„æµ‹æ—¶åˆ»ä¹‹å‰çš„æ•°æ®ï¼Œç»ä¸ä½¿ç”¨å½“å‰æˆ–æœªæ¥çš„ä¿¡æ¯</div>
                                    </div>
                                    <div class="p-3 rounded-lg" style="background: rgba(16, 185, 129, 0.1);">
                                        <div class="font-medium text-sm">2. ç¬¦åˆå®é™…åº”ç”¨åœºæ™¯</div>
                                        <div class="text-xs text-gray-400">åœ¨å®é™…é¢„æµ‹æ—¶ï¼Œæˆ‘ä»¬ç¡®å®å¯ä»¥è·å–åˆ°å†å² AQI æ•°æ®æ¥è¾…åŠ©é¢„æµ‹</div>
                                    </div>
                                    <div class="p-3 rounded-lg" style="background: rgba(16, 185, 129, 0.1);">
                                        <div class="font-medium text-sm">3. æ—¶åºé¢„æµ‹çš„æ ‡å‡†å®è·µ</div>
                                        <div class="text-xs text-gray-400">ARIMAã€Prophetã€LSTM ç­‰æ—¶åºæ¨¡å‹éƒ½ä¾èµ–å†å²ç›®æ ‡å€¼è¿›è¡Œé¢„æµ‹</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 p-3 rounded-lg" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2);">
                            <div class="flex items-center gap-2">
                                <span class="text-purple-400">ğŸ’¡</span>
                                <span class="text-sm"><strong class="text-purple-300">æ•°æ®æ³„æ¼çš„å®šä¹‰ï¼š</strong><span class="text-gray-400">è®­ç»ƒæ—¶ä½¿ç”¨äº†é¢„æµ‹æ—¶åˆ»ä¹‹åçš„ä¿¡æ¯ã€‚æœ¬æ¨¡å‹çš„æ»åç‰¹å¾å…¨éƒ¨æ¥è‡ªå†å²æ•°æ®ï¼Œä¸å­˜åœ¨æ•°æ®æ³„æ¼é—®é¢˜ã€‚</span></span>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="glass-card p-6 ml-only">
                        <h3 class="section-title">æ•°æ®ç»Ÿè®¡</h3>
                        <div class="space-y-4">
                            <div class="flex justify-between items-center"><span class="text-gray-400">è®­ç»ƒæ•°æ®é‡</span><span class="font-medium">9,164 æ¡</span></div>
                            <div class="flex justify-between items-center"><span class="text-gray-400">æ•°æ®æ—¶é—´è·¨åº¦</span><span class="font-medium">~13 ä¸ªæœˆ</span></div>
                            <div class="flex justify-between items-center"><span class="text-gray-400">ç‰¹å¾æ•°é‡</span><span class="font-medium">25 ä¸ª</span></div>
                            <div class="flex justify-between items-center"><span class="text-gray-400">é¢„æµ‹å‡†ç¡®ç‡ (1h)</span><span class="font-medium text-green-400">RÂ² = 0.86</span></div>
                            <div class="flex justify-between items-center"><span class="text-gray-400">å¹³å‡è¯¯å·® (1h)</span><span class="font-medium text-blue-400">MAE = 6.03</span></div>
                        </div>
                    </div>
                    <div class="glass-card p-6 dl-only">
                        <h3 class="section-title">æ•°æ®ç»Ÿè®¡</h3>
                        <div class="space-y-4">
                            <div class="flex justify-between items-center"><span class="text-gray-400">è®­ç»ƒåºåˆ—</span><span class="font-medium">1,262 æ¡</span></div>
                            <div class="flex justify-between items-center"><span class="text-gray-400">è¾“å…¥çª—å£</span><span class="font-medium">48h Ã— 47 ç‰¹å¾</span></div>
                            <div class="flex justify-between items-center"><span class="text-gray-400">æ¨¡å‹å‚æ•°</span><span class="font-medium">132,676</span></div>
                            <div class="flex justify-between items-center"><span class="text-gray-400">é¢„æµ‹å‡†ç¡®ç‡ (1h)</span><span class="font-medium text-purple-400">RÂ² = 0.80</span></div>
                            <div class="flex justify-between items-center"><span class="text-gray-400">å¹³å‡è¯¯å·® (1h)</span><span class="font-medium text-purple-400">MAE = 11.37</span></div>
                        </div>
                    </div>

                    <!-- Quick Recommendations based on current AQI -->
                    <div class="glass-card p-6 lg:col-span-3">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="section-title mb-0">ä»Šæ—¥è¡ŒåŠ¨å»ºè®®</h3>
                            <button onclick="document.querySelector('[data-tab=explainability]').click()" class="text-sm text-blue-400 hover:text-blue-300">æ¨¡å‹è§£é‡Š â†’</button>
                        </div>
                        <div id="quickRecommendations" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <!-- Will be populated by JavaScript -->
                            <div class="p-4 rounded-xl text-center" style="background: rgba(16, 185, 129, 0.1);">
                                <div class="text-2xl mb-2">ğŸƒ</div>
                                <div class="text-sm font-medium">æˆ·å¤–è¿åŠ¨</div>
                                <div id="rec-outdoor" class="text-xs text-gray-400 mt-1">åŠ è½½ä¸­...</div>
                            </div>
                            <div class="p-4 rounded-xl text-center" style="background: rgba(59, 130, 246, 0.1);">
                                <div class="text-2xl mb-2">ğŸªŸ</div>
                                <div class="text-sm font-medium">å¼€çª—é€šé£</div>
                                <div id="rec-window" class="text-xs text-gray-400 mt-1">åŠ è½½ä¸­...</div>
                            </div>
                            <div class="p-4 rounded-xl text-center" style="background: rgba(245, 158, 11, 0.1);">
                                <div class="text-2xl mb-2">ğŸ˜·</div>
                                <div class="text-sm font-medium">å£ç½©å»ºè®®</div>
                                <div id="rec-mask" class="text-xs text-gray-400 mt-1">åŠ è½½ä¸­...</div>
                            </div>
                            <div class="p-4 rounded-xl text-center" style="background: rgba(139, 92, 246, 0.1);">
                                <div class="text-2xl mb-2">ğŸŒ¬ï¸</div>
                                <div class="text-sm font-medium">å‡€åŒ–å™¨</div>
                                <div id="rec-purifier" class="text-xs text-gray-400 mt-1">åŠ è½½ä¸­...</div>
                            </div>
                        </div>
                        <div id="trendInsight" class="mt-4 p-3 rounded-lg" style="background: rgba(59, 130, 246, 0.1);">
                            <div class="text-sm text-gray-400"><span class="text-blue-400 font-medium">ğŸ“Š è¶‹åŠ¿æ´å¯Ÿï¼š</span><span id="trend-text">åˆ†æä¸­...</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 2: Data Pipeline -->
            <div id="tab-pipeline" class="tab-content">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Data Sources -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">æ•°æ®æºæ¸…å•</h3>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>æ•°æ®æº</th>
                                    <th>ç±»å‹</th>
                                    <th>é¢‘ç‡</th>
                                    <th>çŠ¶æ€</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>WAQI</td>
                                    <td>å®æ—¶ AQI</td>
                                    <td>æ¯å°æ—¶</td>
                                    <td><span class="status-dot status-good"></span> æ­£å¸¸</td>
                                </tr>
                                <tr>
                                    <td>quotsoft.net</td>
                                    <td>å†å² AQI</td>
                                    <td>æ¯æ—¥</td>
                                    <td><span class="status-dot status-good"></span> æ­£å¸¸</td>
                                </tr>
                                <tr>
                                    <td>Open-Meteo</td>
                                    <td>å†å²å¤©æ°”</td>
                                    <td>æ¯å°æ—¶</td>
                                    <td><span class="status-dot status-good"></span> æ­£å¸¸</td>
                                </tr>
                                <tr>
                                    <td>é«˜å¾·åœ°å›¾</td>
                                    <td>å®æ—¶å¤©æ°”</td>
                                    <td>æ¯å°æ—¶</td>
                                    <td><span class="status-dot status-good"></span> æ­£å¸¸</td>
                                </tr>
                                <tr>
                                    <td>GitHub Calendar</td>
                                    <td>èŠ‚å‡æ—¥</td>
                                    <td>å¹´åº¦</td>
                                    <td><span class="status-dot status-good"></span> æ­£å¸¸</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Pipeline Flow -->
                    <div class="glass-card p-6 ml-only">
                        <h3 class="section-title">æ•°æ®æµç¨‹</h3>
                        <div class="pipeline-step"><div class="pipeline-icon bg-blue-500/20 text-blue-400">ğŸ“¥</div><div><div class="font-medium">æ•°æ®é‡‡é›†</div><div class="text-sm text-gray-500">ä»å¤šä¸ªæ•°æ®æºè·å–åŸå§‹æ•°æ®</div></div></div>
                        <div class="pipeline-step"><div class="pipeline-icon bg-green-500/20 text-green-400">ğŸ§¹</div><div><div class="font-medium">æ•°æ®æ¸…æ´—</div><div class="text-sm text-gray-500">å¤„ç†ç¼ºå¤±å€¼ã€å¼‚å¸¸å€¼ã€æ—¶é—´å¯¹é½</div></div></div>
                        <div class="pipeline-step"><div class="pipeline-icon bg-yellow-500/20 text-yellow-400">ğŸ”€</div><div><div class="font-medium">æ•°æ®åˆå¹¶</div><div class="text-sm text-gray-500">å¤šæºæ•°æ®æŒ‰æ—¶é—´æˆ³åˆå¹¶</div></div></div>
                        <div class="pipeline-step"><div class="pipeline-icon bg-purple-500/20 text-purple-400">âš™ï¸</div><div><div class="font-medium">ç‰¹å¾å·¥ç¨‹</div><div class="text-sm text-gray-500">æ„å»ºæ»åã€æ»šåŠ¨ã€äº¤äº’ç‰¹å¾</div></div></div>
                        <div class="pipeline-step"><div class="pipeline-icon bg-red-500/20 text-red-400">ğŸ¤–</div><div><div class="font-medium">æ¨¡å‹é¢„æµ‹</div><div class="text-sm text-gray-500">XGBoost æ¨¡å‹å®æ—¶é¢„æµ‹</div></div></div>
                    </div>
                    <div class="glass-card p-6 dl-only">
                        <h3 class="section-title">æ·±åº¦å­¦ä¹ æ•°æ®ç®¡é“</h3>
                        <div class="pipeline-step"><div class="pipeline-icon bg-blue-500/20 text-blue-400">ğŸ“¥</div><div><div class="font-medium">å¤šåŸå¸‚æ•°æ®é‡‡é›†</div><div class="text-sm text-gray-500">æ‰¬å·+å—äº¬+é•‡æ±Ÿ+æ³°å·+å—é€š AQI/PM2.5/PM10 (WAQI API) + Open-Meteo æ°”è±¡ 17 å˜é‡</div></div></div>
                        <div class="pipeline-step"><div class="pipeline-icon bg-green-500/20 text-green-400">ğŸ§¹</div><div><div class="font-medium">æ•°æ®æ¸…æ´— & å¤šæºåˆå¹¶</div><div class="text-sm text-gray-500">å¼‚å¸¸å€¼æ£€æµ‹ + ç¼ºå¤±æ’å€¼ + 5 åŸå¸‚æ•°æ®æŒ‰æ—¶é—´æˆ³å¯¹é½ â†’ åˆå¹¶ PM2.5/PM10 åˆ—</div></div></div>
                        <div class="pipeline-step"><div class="pipeline-icon bg-yellow-500/20 text-yellow-400">âš™ï¸</div><div><div class="font-medium">DL ç‰¹å¾å·¥ç¨‹ (47 ç»´)</div><div class="text-sm text-gray-500">ç©ºé—´æ»å(å—äº¬lag1-12hç­‰14ä¸ª) + é£å‘æ„ŸçŸ¥åŠ æƒ(2) + åŒºåŸŸç»Ÿè®¡(3) + ä¸‰è§’æ—¶é—´ç¼–ç (9)</div></div></div>
                        <div class="pipeline-step"><div class="pipeline-icon bg-cyan-500/20 text-cyan-400">ğŸ“</div><div><div class="font-medium">åºåˆ—æ„å»º & å½’ä¸€åŒ–</div><div class="text-sm text-gray-500">48h æ»‘åŠ¨çª—å£(stride=6é˜²é‡å ) â†’ StandardScaler fit on train â†’ æ—¶åº 80/10/10 åˆ†å‰² â†’ 1578 æ¡åºåˆ—</div></div></div>
                        <div class="pipeline-step"><div class="pipeline-icon bg-purple-500/20 text-purple-400">ğŸ§ </div><div><div class="font-medium">LSTM+Attention è®­ç»ƒ</div><div class="text-sm text-gray-500">BiLSTM(64)+4å¤´Attention â†’ AdamW+CosineAnnealingLR â†’ åŠ æƒHuber Loss â†’ Early Stopping(patience=40)</div></div></div>
                        <div class="pipeline-step"><div class="pipeline-icon bg-orange-500/20 text-orange-400">ğŸ“¦</div><div><div class="font-medium">æ¨¡å‹è¯„ä¼° & ONNX å¯¼å‡º</div><div class="text-sm text-gray-500">æµ‹è¯•é›†é€ Horizon è¯„ä¼°(MAE/RMSE/RÂ²/MAPE) â†’ torch.onnx.export â†’ onnxruntime éªŒè¯ä¸€è‡´æ€§</div></div></div>
                        <div class="pipeline-step"><div class="pipeline-icon bg-red-500/20 text-red-400">ğŸ”®</div><div><div class="font-medium">MC Dropout æ¨ç†</div><div class="text-sm text-gray-500">ONNX Runtime ç¡®å®šæ€§æ¨ç†(&lt;1ms) + PyTorch MC Dropout 50 æ¬¡é‡‡æ ·ç”Ÿæˆ 95% ç½®ä¿¡åŒºé—´</div></div></div>
                    </div>
                    <div class="glass-card p-6 dl-only">
                        <h3 class="section-title">ä¸æœºå™¨å­¦ä¹ ç®¡é“å¯¹æ¯”</h3>
                        <table class="data-table">
                            <thead><tr><th>ç¯èŠ‚</th><th>æœºå™¨å­¦ä¹  (XGBoost)</th><th>æ·±åº¦å­¦ä¹  (LSTM+Attn)</th></tr></thead>
                            <tbody>
                                <tr><td>æ•°æ®èŒƒå›´</td><td>æ‰¬å· + 4 åŸ AQI</td><td>5 åŸ AQI/PM2.5/PM10 + æ°”è±¡ 17 å˜é‡</td></tr>
                                <tr><td>ç‰¹å¾å·¥ç¨‹</td><td>127 å€™é€‰ â†’ 20 ç²¾é€‰ (lag/rolling/äº¤å‰)</td><td>47 ç»´ (ç©ºé—´æ»å+é£å‘æ„ŸçŸ¥+æ—¶é—´ç¼–ç )</td></tr>
                                <tr><td>è¾“å…¥å½¢å¼</td><td>å•è¡Œå‘é‡ (1, 20)</td><td>æ—¶é—´åºåˆ— (48, 47)</td></tr>
                                <tr><td>è®­ç»ƒæ ·æœ¬</td><td>9,164 æ¡ç‹¬ç«‹æ ·æœ¬</td><td>1,262 æ¡åºåˆ— (stride=6)</td></tr>
                                <tr><td>æ¨¡å‹</td><td>XGBoost Ã— 4 ç‹¬ç«‹æ¨¡å‹</td><td>å•æ¨¡å‹ 4 è¾“å‡ºå¤´</td></tr>
                                <tr><td>ä¸ç¡®å®šæ€§</td><td>åˆ†ä½æ•°å›å½’</td><td>MC Dropout (50 æ¬¡é‡‡æ ·)</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Data Cleaning Details -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">æ•°æ®æ¸…æ´—è¯¦ç»†æµç¨‹</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="p-4 rounded-xl" style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2);">
                                <h4 class="font-medium text-green-400 mb-3">1. ç¼ºå¤±å€¼å¤„ç†</h4>
                                <ul class="text-sm text-gray-400 space-y-2">
                                    <li>â€¢ <strong class="text-white">æ£€æµ‹ï¼š</strong>ç»Ÿè®¡æ¯åˆ—ç¼ºå¤±ç‡</li>
                                    <li>â€¢ <strong class="text-white">è¿‡æ»¤ï¼š</strong>å‰”é™¤ç¼ºå¤±ç‡ > 20% çš„ç‰¹å¾</li>
                                    <li>â€¢ <strong class="text-white">æ’å€¼ï¼š</strong>çº¿æ€§æ’å€¼å¡«å……è¿ç»­å‹å˜é‡</li>
                                    <li>â€¢ <strong class="text-white">å‰å‘å¡«å……ï¼š</strong>åˆ†ç±»å˜é‡ä½¿ç”¨ ffill</li>
                                </ul>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.2);">
                                <h4 class="font-medium text-yellow-400 mb-3">2. å¼‚å¸¸å€¼å¤„ç†</h4>
                                <ul class="text-sm text-gray-400 space-y-2">
                                    <li>â€¢ <strong class="text-white">IQR æ–¹æ³•ï¼š</strong>Q1-1.5Ã—IQR ~ Q3+1.5Ã—IQR</li>
                                    <li>â€¢ <strong class="text-white">ç‰©ç†çº¦æŸï¼š</strong>AQI âˆˆ [0, 500]</li>
                                    <li>â€¢ <strong class="text-white">æ¸©åº¦çº¦æŸï¼š</strong>-40Â°C ~ 50Â°C</li>
                                    <li>â€¢ <strong class="text-white">å¤„ç†æ–¹å¼ï¼š</strong>æˆªæ–­è‡³è¾¹ç•Œå€¼</li>
                                </ul>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2);">
                                <h4 class="font-medium text-blue-400 mb-3">3. æ—¶é—´å¯¹é½</h4>
                                <ul class="text-sm text-gray-400 space-y-2">
                                    <li>â€¢ <strong class="text-white">ç»Ÿä¸€æ—¶åŒºï¼š</strong>è½¬æ¢ä¸º Asia/Shanghai</li>
                                    <li>â€¢ <strong class="text-white">é‡é‡‡æ ·ï¼š</strong>ç»Ÿä¸€åˆ°å°æ—¶çº§ç²¾åº¦</li>
                                    <li>â€¢ <strong class="text-white">å¯¹é½æ–¹å¼ï¼š</strong>æŒ‰ datetime å·¦è¿æ¥</li>
                                    <li>â€¢ <strong class="text-white">å»é‡ï¼š</strong>ä¿ç•™æœ€æ–°è®°å½•</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Data Merge Details -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">å¤šæºæ•°æ®åˆå¹¶ç­–ç•¥</h3>
                        <div class="overflow-x-auto">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>æ•°æ®æº A</th>
                                        <th>æ•°æ®æº B</th>
                                        <th>åˆå¹¶é”®</th>
                                        <th>åˆå¹¶æ–¹å¼</th>
                                        <th>å¤„ç†è¯´æ˜</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>å†å² AQI</td>
                                        <td>å†å²å¤©æ°”</td>
                                        <td>datetime (å°æ—¶)</td>
                                        <td>left join</td>
                                        <td>ä»¥ AQI ä¸ºä¸»è¡¨ï¼Œå¤©æ°”æ•°æ®å¡«å……</td>
                                    </tr>
                                    <tr>
                                        <td>åˆå¹¶åæ•°æ®</td>
                                        <td>èŠ‚å‡æ—¥æ•°æ®</td>
                                        <td>date (æ—¥æœŸ)</td>
                                        <td>left join</td>
                                        <td>æ·»åŠ  is_holiday æ ‡è®°</td>
                                    </tr>
                                    <tr>
                                        <td>åˆå¹¶åæ•°æ®</td>
                                        <td>æ—¶é—´ç‰¹å¾</td>
                                        <td>datetime (å°æ—¶)</td>
                                        <td>å·¥ç¨‹è®¡ç®—</td>
                                        <td>ç”Ÿæˆ hour, is_weekend, is_rush_hour, month_sin/cos ç­‰</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="mt-4 p-3 rounded-lg" style="background: rgba(139, 92, 246, 0.1);">
                            <div class="text-sm text-gray-400">
                                <strong class="text-purple-300">æ•°æ®è´¨é‡ä¿éšœï¼š</strong>åˆå¹¶åæ£€æŸ¥æ—¶é—´è¿ç»­æ€§ï¼Œå¯¹äºç¼ºå¤±çš„æ—¶é—´ç‚¹ä½¿ç”¨æ’å€¼å¡«å……ï¼›åˆå¹¶è®°å½•æ•° 9,164 æ¡ï¼Œè¦†ç›– 2023-01-01 è‡³ 2026-02-02ã€‚
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 3: Feature Analysis -->
            <div id="tab-features" class="tab-content">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 ml-only">
                    <!-- Feature Importance -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">ç‰¹å¾é‡è¦æ€§æ’å (Top 20)</h3>
                        <div id="featureImportanceChart" class="chart-container" style="height: 450px;"></div>
                    </div>

                    <!-- Feature Categories -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">ç‰¹å¾ç±»åˆ«ç»Ÿè®¡</h3>
                        <div id="featureCategoryChart" class="chart-container" style="height: 250px;"></div>

                        <h3 class="section-title mt-8">ç‰¹å¾å€™é€‰æ±  (v4 - å¯è§£é‡Šæ€§ä¼˜å…ˆ)</h3>
                        <div class="text-sm text-gray-400 mb-4">å…± 22 ä¸ªå¯è§£é‡Šç‰¹å¾ï¼Œæ¯ä¸ªç‰¹å¾éƒ½æœ‰æ˜ç¡®çš„<strong class="text-green-400">ç‰©ç†æ„ä¹‰</strong></div>
                        <div id="featureTags" class="flex flex-wrap">
                            <span class="feature-tag">å½“å‰AQI</span>
                            <span class="feature-tag">PM10æµ“åº¦</span>
                            <span class="feature-tag">PM2.5æµ“åº¦</span>
                            <span class="feature-tag">é£é€Ÿ</span>
                            <span class="feature-tag">æ°”å‹</span>
                            <span class="feature-tag">æ¹¿åº¦</span>
                            <span class="feature-tag">æ¸©åº¦</span>
                            <span class="feature-tag">ä¾›æš–å­£</span>
                        </div>
                    </div>

                    <!-- Feature Engineering Details -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">ç‰¹å¾å·¥ç¨‹è¯¦ç»†è¯´æ˜</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="p-4 rounded-xl" style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2);">
                                <h4 class="font-medium text-blue-400 mb-3">æ»åç‰¹å¾ (Lag Features)</h4>
                                <p class="text-sm text-gray-400 mb-2">æ•æ‰æ—¶é—´åºåˆ—çš„è‡ªç›¸å…³æ€§</p>
                                <ul class="text-xs text-gray-500 space-y-1">
                                    <li>â€¢ AQI_lag_1h, _3h, _6h, _12h, _24h, _48h</li>
                                    <li>â€¢ PM2.5_lag_1h, PM10_lag_1h</li>
                                    <li>â€¢ temperature_lag_1h, humidity_lag_1h</li>
                                </ul>
                                <div class="mt-2 text-xs text-blue-300">å…± 35 ä¸ªæ»åç‰¹å¾</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2);">
                                <h4 class="font-medium text-green-400 mb-3">æ»šåŠ¨ç»Ÿè®¡ (Rolling Stats)</h4>
                                <p class="text-sm text-gray-400 mb-2">æ•æ‰è¶‹åŠ¿å’Œæ³¢åŠ¨æ€§</p>
                                <ul class="text-xs text-gray-500 space-y-1">
                                    <li>â€¢ rolling_mean_6h, _12h, _24h</li>
                                    <li>â€¢ rolling_std_6h, _12h, _24h</li>
                                    <li>â€¢ rolling_max, rolling_min</li>
                                </ul>
                                <div class="mt-2 text-xs text-green-300">å…± 28 ä¸ªæ»šåŠ¨ç‰¹å¾</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.2);">
                                <h4 class="font-medium text-yellow-400 mb-3">æ—¶é—´ç‰¹å¾ (Time Features)</h4>
                                <p class="text-sm text-gray-400 mb-2">æ•æ‰å‘¨æœŸæ€§è§„å¾‹</p>
                                <ul class="text-xs text-gray-500 space-y-1">
                                    <li>â€¢ hour_sin, hour_cos (æ—¥å‘¨æœŸ)</li>
                                    <li>â€¢ day_of_week_sin, _cos (å‘¨å‘¨æœŸ)</li>
                                    <li>â€¢ month_sin, month_cos (å¹´å‘¨æœŸ)</li>
                                    <li>â€¢ is_weekend, is_holiday</li>
                                </ul>
                                <div class="mt-2 text-xs text-yellow-300">å…± 20 ä¸ªæ—¶é—´ç‰¹å¾</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="p-4 rounded-xl" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2);">
                                <h4 class="font-medium text-purple-400 mb-3">å˜åŒ–ç‡ç‰¹å¾ (Change Rate)</h4>
                                <p class="text-sm text-gray-400 mb-2">æ•æ‰çŸ­æœŸå˜åŒ–è¶‹åŠ¿</p>
                                <ul class="text-xs text-gray-500 space-y-1">
                                    <li>â€¢ AQI_change_1h = AQI - AQI_lag_1h</li>
                                    <li>â€¢ AQI_change_3h, _6h, _24h</li>
                                    <li>â€¢ pressure_change_3h</li>
                                </ul>
                                <div class="mt-2 text-xs text-purple-300">å…± 15 ä¸ªå˜åŒ–ç‡ç‰¹å¾</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2);">
                                <h4 class="font-medium text-red-400 mb-3">äº¤äº’ç‰¹å¾ (Interactions)</h4>
                                <p class="text-sm text-gray-400 mb-2">æ•æ‰å˜é‡é—´çš„ååŒæ•ˆåº”</p>
                                <ul class="text-xs text-gray-500 space-y-1">
                                    <li>â€¢ temp_humidity_product</li>
                                    <li>â€¢ wind_direction_effect</li>
                                    <li>â€¢ rush_hour_flag Ã— AQI_lag</li>
                                </ul>
                                <div class="mt-2 text-xs text-red-300">å…± 21 ä¸ªäº¤äº’ç‰¹å¾</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(6, 182, 212, 0.1); border: 1px solid rgba(6, 182, 212, 0.2);">
                                <h4 class="font-medium text-cyan-400 mb-3">ä»£ç†å˜é‡ (Proxy Variables)</h4>
                                <p class="text-sm text-gray-400 mb-2">è¿‘ä¼¼ä¸å¯è§‚æµ‹å› ç´ </p>
                                <ul class="text-xs text-gray-500 space-y-1">
                                    <li>â€¢ æ—¥æ¸©å·® â†’ é€†æ¸©å±‚å¼ºåº¦</li>
                                    <li>â€¢ ç§‹å­£æ ‡è®° â†’ ç§¸ç§†ç„šçƒ§</li>
                                    <li>â€¢ æ˜¥èŠ‚æ ‡è®° â†’ çƒŸèŠ±ç‡ƒæ”¾</li>
                                    <li>â€¢ ä¾›æš–å­£æ ‡è®° â†’ ä¾›æš–æ’æ”¾</li>
                                </ul>
                                <div class="mt-2 text-xs text-cyan-300">å…± 8 ä¸ªä»£ç†å˜é‡</div>
                            </div>
                        </div>
                    </div>

                    <!-- Feature Selection Process -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">ç‰¹å¾ç­›é€‰æµç¨‹</h3>
                        <div class="flex flex-wrap items-center gap-4 mb-4">
                            <div class="flex items-center gap-2 px-4 py-2 rounded-lg" style="background: rgba(59, 130, 246, 0.2);">
                                <span class="text-blue-400 font-bold">127</span>
                                <span class="text-sm text-gray-400">å€™é€‰ç‰¹å¾</span>
                            </div>
                            <span class="text-gray-500">â†’</span>
                            <div class="flex items-center gap-2 px-4 py-2 rounded-lg" style="background: rgba(245, 158, 11, 0.2);">
                                <span class="text-yellow-400 font-bold">85</span>
                                <span class="text-sm text-gray-400">ç¼ºå¤±ç‡ç­›é€‰å</span>
                            </div>
                            <span class="text-gray-500">â†’</span>
                            <div class="flex items-center gap-2 px-4 py-2 rounded-lg" style="background: rgba(139, 92, 246, 0.2);">
                                <span class="text-purple-400 font-bold">52</span>
                                <span class="text-sm text-gray-400">ç›¸å…³æ€§ç­›é€‰å</span>
                            </div>
                            <span class="text-gray-500">â†’</span>
                            <div class="flex items-center gap-2 px-4 py-2 rounded-lg" style="background: rgba(16, 185, 129, 0.2);">
                                <span class="text-green-400 font-bold">20</span>
                                <span class="text-sm text-gray-400">VIF + é‡è¦æ€§ç­›é€‰å</span>
                            </div>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ç­›é€‰é˜¶æ®µ</th>
                                    <th>ç­›é€‰æ–¹æ³•</th>
                                    <th>é˜ˆå€¼</th>
                                    <th>å‰”é™¤æ•°é‡</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>ç¬¬ä¸€è½®</td>
                                    <td>ç¼ºå¤±ç‡ç­›é€‰</td>
                                    <td>ç¼ºå¤±ç‡ > 20%</td>
                                    <td>42 ä¸ª</td>
                                </tr>
                                <tr>
                                    <td>ç¬¬äºŒè½®</td>
                                    <td>ç›¸å…³æ€§ç­›é€‰</td>
                                    <td>|ç›¸å…³ç³»æ•°| < 0.05</td>
                                    <td>33 ä¸ª</td>
                                </tr>
                                <tr>
                                    <td>ç¬¬ä¸‰è½®</td>
                                    <td>VIF ç­›é€‰</td>
                                    <td>VIF > 10 (å¤šé‡å…±çº¿æ€§)</td>
                                    <td>18 ä¸ª</td>
                                </tr>
                                <tr>
                                    <td>ç¬¬å››è½®</td>
                                    <td>é‡è¦æ€§ç­›é€‰</td>
                                    <td>Top 20 by XGBoost importance</td>
                                    <td>14 ä¸ª</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Excluded Features -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">è¢«å‰”é™¤çš„ç‰¹å¾ç¤ºä¾‹åŠåŸå› </h3>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ç‰¹å¾åç§°</th>
                                    <th>å‰”é™¤åŸå› </th>
                                    <th>è¯¦ç»†è¯´æ˜</th>
                                </tr>
                            </thead>
                            <tbody id="excludedFeaturesTable">
                                <tr>
                                    <td>O3_8h_24h</td>
                                    <td>ç¼ºå¤±ç‡è¿‡é«˜</td>
                                    <td>ç¼ºå¤±ç‡ 25.3% > 20%</td>
                                </tr>
                                <tr>
                                    <td>SO2_current</td>
                                    <td>æ•°æ®ä¸å®Œæ•´</td>
                                    <td>2024å¹´åç›‘æµ‹ç«™æ•°æ®ç¼ºå¤±ä¸¥é‡</td>
                                </tr>
                                <tr>
                                    <td>AQI_rolling_std_48h</td>
                                    <td>VIF è¿‡é«˜</td>
                                    <td>VIF=15.2ï¼Œä¸ AQI_rolling_std_24h é«˜åº¦ç›¸å…³</td>
                                </tr>
                                <tr>
                                    <td>precipitation</td>
                                    <td>é‡è¦æ€§è¿‡ä½</td>
                                    <td>XGBoost importance=0.002ï¼Œæ’åæœ«å°¾</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 dl-only">
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">DL ç‰¹å¾ä½“ç³» (47 ç»´)</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="p-4 rounded-xl" style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2);">
                                <h4 class="font-medium text-blue-400 mb-3">æ‰¬å·æ±¡æŸ“ç‰© (6)</h4>
                                <ul class="text-xs text-gray-500 space-y-1"><li>AQI, PM2.5, PM10</li><li>NO2, CO, SO2</li></ul>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2);">
                                <h4 class="font-medium text-green-400 mb-3">æ°”è±¡å˜é‡ (11)</h4>
                                <ul class="text-xs text-gray-500 space-y-1"><li>æ¸©åº¦ã€æ¹¿åº¦ã€æ°”å‹ã€éœ²ç‚¹</li><li>é£é€Ÿã€é£å‘(u/v)ã€é˜µé£</li><li>é™æ°´ã€äº‘é‡ã€è¾¹ç•Œå±‚é«˜åº¦</li></ul>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.2);">
                                <h4 class="font-medium text-yellow-400 mb-3">æ—¶é—´ç¼–ç  (9)</h4>
                                <ul class="text-xs text-gray-500 space-y-1"><li>hour_sin/cos, month_sin/cos</li><li>dow_sin/cos</li><li>is_weekend, is_holiday, is_heating</li></ul>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="p-4 rounded-xl" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2);">
                                <h4 class="font-medium text-purple-400 mb-2">ä¸Šé£å‘ AQI (4)</h4>
                                <div class="text-xs text-gray-500">å—äº¬ã€é•‡æ±Ÿã€æ³°å·ã€å—é€šåŸå§‹ AQI</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2);">
                                <h4 class="font-medium text-red-400 mb-2">ç©ºé—´æ»å (14)</h4>
                                <div class="text-xs text-gray-500">å—äº¬ AQI lag 1/3/6/12hï¼Œé•‡æ±Ÿ/æ³°å· lag 1/3/6hï¼Œå—é€š lag 1/3hï¼Œå—äº¬ PM2.5 lag 3/6h</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(6, 182, 212, 0.1); border: 1px solid rgba(6, 182, 212, 0.2);">
                                <h4 class="font-medium text-cyan-400 mb-2">åŒºåŸŸç»Ÿè®¡ (3)</h4>
                                <div class="text-xs text-gray-500">regional_aqi_mean/std/max</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(34, 197, 94, 0.1); border: 1px solid rgba(34, 197, 94, 0.2);">
                                <h4 class="font-medium text-emerald-400 mb-2">é£å‘æ„ŸçŸ¥ (2)</h4>
                                <div class="text-xs text-gray-500">upwind_aqi, upwind_pm25 (åŸºäºå®æ—¶é£å‘åŠ æƒ)</div>
                            </div>
                        </div>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">ç‰¹å¾è®¾è®¡ç†å¿µ</h3>
                        <div class="p-4 rounded-xl mb-4" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2);">
                            <p class="text-sm text-gray-400">ä¸ XGBoost ä¸åŒï¼ŒLSTM æ¨¡å‹<strong class="text-white">ä¸éœ€è¦æ˜¾å¼çš„æ»å/æ»šåŠ¨ç‰¹å¾</strong>ã€‚48 å°æ—¶çš„åºåˆ—è¾“å…¥è®©æ¨¡å‹è‡ªè¡Œå­¦ä¹ æ—¶åºæ¨¡å¼ã€‚DL ç‰¹å¾å·¥ç¨‹é‡ç‚¹æ”¾åœ¨ï¼š<strong class="text-purple-300">ç©ºé—´ç»´åº¦</strong>ï¼ˆä¸Šé£å‘åŸå¸‚ç©ºé—´æ»å + é£å‘æ„ŸçŸ¥åŠ æƒï¼‰å’Œ<strong class="text-purple-300">å‘¨æœŸç¼–ç </strong>ï¼ˆä¸‰è§’å‡½æ•°ç¼–ç é¿å…è·³å˜ï¼‰ï¼Œè¿™äº›æ˜¯ LSTM éš¾ä»¥ä»åŸå§‹æ•°æ®è‡ªåŠ¨æå–çš„ã€‚</p>
                        </div>
                        <h4 class="text-sm font-medium mb-2 text-gray-300">ä¸ XGBoost ç‰¹å¾å¯¹æ¯”</h4>
                        <table class="data-table">
                            <thead><tr><th>ç»´åº¦</th><th>XGBoost (20 ç‰¹å¾)</th><th>LSTM+Attn (47 ç‰¹å¾)</th></tr></thead>
                            <tbody>
                                <tr><td>æ—¶é—´å»ºæ¨¡</td><td>AQI_lag_1h~24h, rolling_mean ç­‰æ˜¾å¼æ»å</td><td>LSTM ä» 48h åŸå§‹åºåˆ—è‡ªåŠ¨å­¦ä¹ </td></tr>
                                <tr><td>ç©ºé—´å»ºæ¨¡</td><td>ä¸Šé£å‘åŸå¸‚å½“å‰ AQI (4 ä¸ª)</td><td>ç©ºé—´æ»å 1~12h (14 ä¸ª) + é£å‘åŠ æƒ (2 ä¸ª)</td></tr>
                                <tr><td>æ°”è±¡å˜é‡</td><td>æ¸©åº¦/æ¹¿åº¦/é£é€Ÿ/æ°”å‹</td><td>17 å˜é‡å«è¾¹ç•Œå±‚é«˜åº¦/UVæŒ‡æ•°/é˜µé£</td></tr>
                                <tr><td>æ—¶é—´ç¼–ç </td><td>hour, weekday, month (æ•´æ•°)</td><td>sin/cos ç¼–ç  (é¿å… 23â†’0 è·³å˜) + ä¾›æš–/å‡æ—¥</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">è¾“å…¥åºåˆ—ç»“æ„</h3>
                        <div style="font-family: monospace; font-size: 12px; line-height: 1.8; color: var(--text-secondary); background: rgba(0,0,0,0.3); padding: 16px; border-radius: 12px;">
                            <div style="color: #a78bfa;">è¾“å…¥å¼ é‡ X: (batch, 48, 47)</div>
                            <div>&nbsp;</div>
                            <div>æ—¶é—´è½´ (48 æ­¥ = 48 å°æ—¶):</div>
                            <div style="color: #60a5fa;">  t-48h â†’ t-47h â†’ ... â†’ t-2h â†’ t-1h â†’ t</div>
                            <div>&nbsp;</div>
                            <div>ç‰¹å¾è½´ (47 ç»´):</div>
                            <div>  [AQI, PM2.5, PM10, NO2, CO, SO2,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#60a5fa">â† æ±¡æŸ“ç‰© (6)</span></div>
                            <div>   temp, humidity, pressure, ...,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#34d399">â† æ°”è±¡ (11)</span></div>
                            <div>   hour_sin, hour_cos, ..., is_heating,&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#fbbf24">â† æ—¶é—´ç¼–ç  (9)</span></div>
                            <div>   nanjing_aqi, zhenjiang_aqi, ...,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#f87171">â† ä¸Šé£å‘ (4)</span></div>
                            <div>   nanjing_aqi_lag1h, ..., nanjing_pm25_lag6h,<span style="color:#a78bfa">â† ç©ºé—´æ»å (14)</span></div>
                            <div>   regional_mean/std/max,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#06b6d4">â† åŒºåŸŸç»Ÿè®¡ (3)</span></div>
                            <div>   upwind_aqi, upwind_pm25]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#22c55e">â† é£å‘æ„ŸçŸ¥ (2)</span></div>
                            <div>&nbsp;</div>
                            <div style="color: #fbbf24;">ç›®æ ‡ y: [AQI_1h, AQI_6h, AQI_12h, AQI_24h]</div>
                        </div>
                        <div class="grid grid-cols-3 gap-3 mt-4">
                            <div class="text-center p-2 rounded-lg" style="background: rgba(139,92,246,0.1);"><div class="text-lg font-bold text-purple-400">1,578</div><div class="text-xs text-gray-500">æ€»åºåˆ—æ•°</div></div>
                            <div class="text-center p-2 rounded-lg" style="background: rgba(59,130,246,0.1);"><div class="text-lg font-bold text-blue-400">48 Ã— 47</div><div class="text-xs text-gray-500">å•æ ·æœ¬ç»´åº¦</div></div>
                            <div class="text-center p-2 rounded-lg" style="background: rgba(16,185,129,0.1);"><div class="text-lg font-bold text-green-400">80/10/10</div><div class="text-xs text-gray-500">è®­ç»ƒ/éªŒè¯/æµ‹è¯•</div></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 4: Model Details -->
            <div id="tab-model" class="tab-content">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 ml-only">
                    <!-- Model Info -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">æ¨¡å‹é…ç½®</h3>
                        <div class="space-y-4">
                            <div>
                                <div class="text-gray-500 text-sm">æ¨¡å‹ç±»å‹</div>
                                <div class="font-medium">XGBoost Regressor</div>
                            </div>
                            <div>
                                <div class="text-gray-500 text-sm">è®­ç»ƒæ•°æ®èŒƒå›´</div>
                                <div class="font-medium">2023-01-01 ~ 2026-02-02</div>
                            </div>
                            <div>
                                <div class="text-gray-500 text-sm">ç‰¹å¾æ•°é‡</div>
                                <div class="font-medium" id="featureCount">50</div>
                            </div>
                            <div>
                                <div class="text-gray-500 text-sm">äº¤å‰éªŒè¯</div>
                                <div class="font-medium">TimeSeriesSplit (5-fold)</div>
                            </div>
                        </div>
                    </div>

                    <!-- Hyperparameters -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">è¶…å‚æ•°è®¾ç½®</h3>
                        <table class="data-table">
                            <tbody>
                                <tr><td class="text-gray-500">n_estimators</td><td>200</td></tr>
                                <tr><td class="text-gray-500">max_depth</td><td>6</td></tr>
                                <tr><td class="text-gray-500">learning_rate</td><td>0.1</td></tr>
                                <tr><td class="text-gray-500">subsample</td><td>0.8</td></tr>
                                <tr><td class="text-gray-500">colsample_bytree</td><td>0.8</td></tr>
                                <tr><td class="text-gray-500">random_state</td><td>42</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Model Metrics -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">æ¨¡å‹æ€§èƒ½ (v4 - 1hé¢„æµ‹)</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="metric-card text-center">
                                <div class="metric-value text-green-400" id="modelMAE">6.03</div>
                                <div class="metric-label">MAE</div>
                            </div>
                            <div class="metric-card text-center">
                                <div class="metric-value text-blue-400" id="modelRMSE">9.23</div>
                                <div class="metric-label">RMSE</div>
                            </div>
                            <div class="metric-card text-center">
                                <div class="metric-value text-purple-400" id="modelR2">0.86</div>
                                <div class="metric-label">RÂ²</div>
                            </div>
                            <div class="metric-card text-center">
                                <div class="metric-value text-yellow-400" id="modelMAPE">12.0%</div>
                                <div class="metric-label">MAPE</div>
                            </div>
                        </div>
                    </div>

                    <!-- CV Results -->
                    <div class="glass-card p-6 lg:col-span-3">
                        <h3 class="section-title">äº¤å‰éªŒè¯ç»“æœ</h3>
                        <div id="cvResultsChart" class="chart-container"></div>
                    </div>

                    <!-- Training Process -->
                    <div class="glass-card p-6 lg:col-span-3">
                        <h3 class="section-title">æ¨¡å‹è®­ç»ƒæµç¨‹è¯¦è§£</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-medium text-blue-400 mb-3">ä¸ºä»€ä¹ˆé€‰æ‹© XGBoostï¼Ÿ</h4>
                                <ul class="text-sm text-gray-400 space-y-2">
                                    <li class="flex items-start gap-2">
                                        <span class="text-green-400">âœ“</span>
                                        <span><strong class="text-white">å¤„ç†éçº¿æ€§ï¼š</strong>AQI ä¸æ°”è±¡å› ç´ çš„å…³ç³»æ˜¯é«˜åº¦éçº¿æ€§çš„</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-green-400">âœ“</span>
                                        <span><strong class="text-white">å¤„ç†ç¼ºå¤±å€¼ï¼š</strong>å†…ç½®ç¼ºå¤±å€¼å¤„ç†æœºåˆ¶</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-green-400">âœ“</span>
                                        <span><strong class="text-white">ç‰¹å¾é‡è¦æ€§ï¼š</strong>è‡ªåŠ¨è®¡ç®—ç‰¹å¾é‡è¦æ€§ï¼Œä¾¿äºè§£é‡Š</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-green-400">âœ“</span>
                                        <span><strong class="text-white">æ­£åˆ™åŒ–ï¼š</strong>L1/L2 æ­£åˆ™åŒ–é˜²æ­¢è¿‡æ‹Ÿåˆ</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-green-400">âœ“</span>
                                        <span><strong class="text-white">è®­ç»ƒé€Ÿåº¦ï¼š</strong>GPU åŠ é€Ÿï¼Œé€‚åˆä¸­ç­‰è§„æ¨¡æ•°æ®</span>
                                    </li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-medium text-purple-400 mb-3">æ—¶åºäº¤å‰éªŒè¯ (TimeSeriesSplit)</h4>
                                <p class="text-sm text-gray-400 mb-3">
                                    ä¸æ™®é€š K-Fold ä¸åŒï¼ŒTimeSeriesSplit ä¿æŒæ—¶é—´é¡ºåºï¼Œé¿å…æœªæ¥æ•°æ®æ³„æ¼ï¼š
                                </p>
                                <div class="space-y-2 text-xs">
                                    <div class="flex items-center gap-2">
                                        <span class="text-gray-500">Fold 1:</span>
                                        <div class="flex-1 h-4 rounded flex overflow-hidden">
                                            <div class="bg-blue-500/50 w-1/5"></div>
                                            <div class="bg-green-500/50 w-1/5"></div>
                                            <div class="bg-gray-700 flex-1"></div>
                                        </div>
                                        <span class="text-gray-500 w-24">Trainâ†’Test</span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <span class="text-gray-500">Fold 2:</span>
                                        <div class="flex-1 h-4 rounded flex overflow-hidden">
                                            <div class="bg-blue-500/50 w-2/5"></div>
                                            <div class="bg-green-500/50 w-1/5"></div>
                                            <div class="bg-gray-700 flex-1"></div>
                                        </div>
                                        <span class="text-gray-500 w-24">Trainâ†’Test</span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <span class="text-gray-500">Fold 5:</span>
                                        <div class="flex-1 h-4 rounded flex overflow-hidden">
                                            <div class="bg-blue-500/50 w-4/5"></div>
                                            <div class="bg-green-500/50 w-1/5"></div>
                                        </div>
                                        <span class="text-gray-500 w-24">Trainâ†’Test</span>
                                    </div>
                                </div>
                                <p class="text-xs text-gray-500 mt-2">
                                    <span class="inline-block w-3 h-3 bg-blue-500/50 rounded mr-1"></span> è®­ç»ƒé›†
                                    <span class="inline-block w-3 h-3 bg-green-500/50 rounded mx-1 ml-3"></span> æµ‹è¯•é›†
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- XGBoost Explanation -->
                    <div class="glass-card p-6 lg:col-span-3">
                        <h3 class="section-title">XGBoost åŸç†ç®€ä»‹</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="p-4 rounded-xl" style="background: rgba(59, 130, 246, 0.1);">
                                <h4 class="font-medium mb-2">1. æ¢¯åº¦æå‡</h4>
                                <p class="text-sm text-gray-400">
                                    é€šè¿‡è¿­ä»£è®­ç»ƒå¤šæ£µå†³ç­–æ ‘ï¼Œæ¯æ£µæ–°æ ‘å­¦ä¹ ä¹‹å‰æ¨¡å‹çš„æ®‹å·®ï¼ˆé¢„æµ‹è¯¯å·®ï¼‰ï¼Œé€æ­¥é€¼è¿‘çœŸå®å€¼ã€‚
                                </p>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(139, 92, 246, 0.1);">
                                <h4 class="font-medium mb-2">2. æ­£åˆ™åŒ–</h4>
                                <p class="text-sm text-gray-400">
                                    ç›®æ ‡å‡½æ•°åŒ…å« L1/L2 æ­£åˆ™é¡¹ï¼Œæƒ©ç½šå¤æ‚æ¨¡å‹ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆï¼Œæé«˜æ³›åŒ–èƒ½åŠ›ã€‚
                                </p>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(16, 185, 129, 0.1);">
                                <h4 class="font-medium mb-2">3. å¹¶è¡Œä¼˜åŒ–</h4>
                                <p class="text-sm text-gray-400">
                                    åˆ©ç”¨ç‰¹å¾å¹¶è¡Œå’Œæ•°æ®å¹¶è¡ŒåŠ é€Ÿè®­ç»ƒï¼Œæ”¯æŒ GPU åŠ é€Ÿï¼Œé«˜æ•ˆå¤„ç†å¤§è§„æ¨¡æ•°æ®ã€‚
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 dl-only">
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">æ¨¡å‹æ¶æ„</h3>
                        <div style="font-family: monospace; font-size: 12px; line-height: 1.8; color: var(--text-secondary); background: rgba(0,0,0,0.3); padding: 16px; border-radius: 12px;">
                            <div style="color: #60a5fa;">Input (batch, 48, 47)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# 48h Ã— 47 ç‰¹å¾</div>
                            <div>  â”‚</div>
                            <div style="color: #a78bfa;">  â”œâ”€ Bidirectional LSTM (in=47, hidden=64, layers=1)</div>
                            <div>  â”‚&nbsp;&nbsp;&nbsp;&nbsp;å‰å‘ LSTM: 47â†’64&nbsp;&nbsp;åå‘ LSTM: 47â†’64</div>
                            <div>  â”‚&nbsp;&nbsp;&nbsp;&nbsp;è¾“å‡ºæ‹¼æ¥: (batch, 48, 128)</div>
                            <div>  â”‚</div>
                            <div style="color: #f59e0b;">  â”œâ”€ Multi-Head Self-Attention (embed=128, heads=4)</div>
                            <div>  â”‚&nbsp;&nbsp;&nbsp;&nbsp;Q, K, V å„ 128â†’128ï¼Œæ¯å¤´ 32 ç»´</div>
                            <div>  â”‚&nbsp;&nbsp;&nbsp;&nbsp;è¾“å‡º: (batch, 48, 128) + attn_weights</div>
                            <div>  â”‚</div>
                            <div style="color: #34d399;">  â”œâ”€ Residual + LayerNorm + Dropout(0.3)</div>
                            <div>  â”‚&nbsp;&nbsp;&nbsp;&nbsp;out = LayerNorm(lstm_out + attn_out)</div>
                            <div>  â”‚</div>
                            <div>  â”œâ”€ Select last timestep â†’ (batch, 128)</div>
                            <div>  â”‚</div>
                            <div style="color: #f87171;">  â””â”€ FC Decoder:</div>
                            <div>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Linear(128â†’64) â†’ ReLU â†’ Dropout(0.3)</div>
                            <div>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Linear(64â†’4)</div>
                            <div>  â”‚</div>
                            <div style="color: #fbbf24;">Output: [AQI_1h, AQI_6h, AQI_12h, AQI_24h]</div>
                        </div>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">æ¨¡å‹é…ç½®</h3>
                        <div class="space-y-3">
                            <div><div class="text-gray-500 text-xs">æ¨¡å‹ç±»å‹</div><div class="font-medium">LSTM + Multi-Head Attention</div></div>
                            <div><div class="text-gray-500 text-xs">è®­ç»ƒæ•°æ®</div><div class="font-medium">2023-01 ~ 2026-02</div></div>
                            <div><div class="text-gray-500 text-xs">è¾“å…¥ç»´åº¦</div><div class="font-medium">48 æ­¥ Ã— 47 ç‰¹å¾</div></div>
                            <div><div class="text-gray-500 text-xs">æ€»å‚æ•°é‡</div><div class="font-medium">132,676</div></div>
                            <div><div class="text-gray-500 text-xs">æ¨¡å‹ä½“ç§¯</div><div class="font-medium">0.52 MB (ONNX)</div></div>
                            <div><div class="text-gray-500 text-xs">æ¨ç†å»¶è¿Ÿ</div><div class="font-medium">&lt; 1ms (ONNX Runtime)</div></div>
                        </div>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">è¶…å‚æ•°è®¾ç½®</h3>
                        <table class="data-table"><tbody>
                            <tr><td class="text-gray-500">hidden_size</td><td>64</td></tr>
                            <tr><td class="text-gray-500">num_layers</td><td>1 (bidirectional)</td></tr>
                            <tr><td class="text-gray-500">attention heads</td><td>4</td></tr>
                            <tr><td class="text-gray-500">dropout</td><td>0.3</td></tr>
                            <tr><td class="text-gray-500">learning_rate</td><td>0.001 (AdamW)</td></tr>
                            <tr><td class="text-gray-500">weight_decay</td><td>1e-3</td></tr>
                            <tr><td class="text-gray-500">batch_size</td><td>64</td></tr>
                            <tr><td class="text-gray-500">noise_std</td><td>0.05 (é«˜æ–¯å¢å¼º)</td></tr>
                            <tr><td class="text-gray-500">scheduler</td><td>CosineAnnealingLR</td></tr>
                            <tr><td class="text-gray-500">gradient clip</td><td>max_norm=1.0</td></tr>
                        </tbody></table>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">å„ Horizon æ€§èƒ½</h3>
                        <table class="data-table">
                            <thead><tr><th>Horizon</th><th>MAE</th><th>RMSE</th><th>RÂ²</th></tr></thead>
                            <tbody>
                                <tr style="background:rgba(139,92,246,0.15);"><td><strong>1h</strong></td><td><strong>11.37</strong></td><td>17.59</td><td><strong>0.80</strong></td></tr>
                                <tr><td>6h</td><td>15.74</td><td>23.10</td><td>0.66</td></tr>
                                <tr><td>12h</td><td>20.70</td><td>28.95</td><td>0.47</td></tr>
                                <tr><td>24h</td><td>27.47</td><td>36.12</td><td>0.17</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="glass-card p-6 lg:col-span-3">
                        <h3 class="section-title">è®­ç»ƒç­–ç•¥</h3>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="p-4 rounded-xl" style="background: rgba(139, 92, 246, 0.1);">
                                <h4 class="font-medium mb-2">åŠ æƒ Huber Loss</h4>
                                <p class="text-sm text-gray-400">æƒé‡ [1.0, 0.8, 0.6, 0.4]ï¼ŒçŸ­æœŸé¢„æµ‹ä¼˜å…ˆã€‚Huber å¯¹å¼‚å¸¸å€¼é²æ£’ï¼Œdelta=1.0ã€‚</p>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(59, 130, 246, 0.1);">
                                <h4 class="font-medium mb-2">æ­£åˆ™åŒ–ç»„åˆ</h4>
                                <p class="text-sm text-gray-400">Dropout(0.3) + WeightDecay(1e-3) + é«˜æ–¯å™ªå£°å¢å¼º(std=0.05) + æ¢¯åº¦è£å‰ª(norm=1.0)</p>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(16, 185, 129, 0.1);">
                                <h4 class="font-medium mb-2">å­¦ä¹ ç‡è°ƒåº¦</h4>
                                <p class="text-sm text-gray-400">CosineAnnealingLR: ä» 0.001 ä½™å¼¦é€€ç«åˆ° 0ã€‚æœ€ä½³æ¨¡å‹åœ¨ Epoch 23ã€‚</p>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(245, 158, 11, 0.1);">
                                <h4 class="font-medium mb-2">é˜²è¿‡æ‹Ÿåˆè®¾è®¡</h4>
                                <p class="text-sm text-gray-400">Stride=6 å‡å°‘åºåˆ—é‡å (42/48â†’1578æ¡) + Early Stopping(patience=40) + å™ªå£°å¢å¼º</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 5: Baseline Comparison -->
            <div id="tab-baseline" class="tab-content">
                <!-- ML åŸºçº¿å¯¹æ¯” -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 ml-only">
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">XGBoost v4 å„é¢„æµ‹æ—¶æ®µæ€§èƒ½</h3>
                        <p class="text-sm text-gray-400 mb-4">XGBoost æ¨¡å‹åœ¨ 4 ä¸ªé¢„æµ‹ Horizon ä¸Šçš„æµ‹è¯•é›†è¡¨ç°</p>
                        <table class="data-table">
                            <thead><tr><th>é¢„æµ‹ Horizon</th><th>MAE</th><th>RMSE</th><th>RÂ²</th><th>è¯„ä»·</th></tr></thead>
                            <tbody>
                                <tr style="background: rgba(16, 185, 129, 0.1);"><td><strong>1 å°æ—¶</strong></td><td><strong>6.03</strong></td><td>9.84</td><td><strong>0.86</strong></td><td><span style="color:#10b981;">ä¼˜ç§€</span> â€” çŸ­æœŸé¢„æµ‹æä¸ºå‡†ç¡®</td></tr>
                                <tr style="background: rgba(59, 130, 246, 0.05);"><td><strong>6 å°æ—¶</strong></td><td>11.41</td><td>17.06</td><td>0.71</td><td><span style="color:#3b82f6;">è‰¯å¥½</span> â€” ä»æœ‰è¾ƒå¼ºé¢„æµ‹åŠ›</td></tr>
                                <tr style="background: rgba(245, 158, 11, 0.05);"><td><strong>12 å°æ—¶</strong></td><td>17.72</td><td>26.25</td><td>0.30</td><td><span style="color:#f59e0b;">ä¸€èˆ¬</span> â€” è§£é‡ŠåŠ›æœ‰é™</td></tr>
                                <tr style="background: rgba(239, 68, 68, 0.05);"><td><strong>24 å°æ—¶</strong></td><td>23.24</td><td>33.79</td><td>-0.35</td><td><span style="color:#ef4444;">è¾ƒå·®</span> â€” ä¸å¦‚å†å²å‡å€¼</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">åŸºçº¿æ¨¡å‹å¯¹æ¯” (1h é¢„æµ‹)</h3>
                        <table class="data-table">
                            <thead><tr><th>æ¨¡å‹</th><th>MAE</th><th>RMSE</th><th>RÂ²</th></tr></thead>
                            <tbody id="baselineTable">
                                <tr><td>Naive (24h)</td><td>22.4</td><td>31.2</td><td>0.78</td></tr>
                                <tr><td>Moving Avg (24h)</td><td>19.8</td><td>27.5</td><td>0.82</td></tr>
                                <tr><td>Exp Smoothing</td><td>18.2</td><td>25.1</td><td>0.84</td></tr>
                                <tr><td>Linear (lag 1h)</td><td>15.3</td><td>21.8</td><td>0.88</td></tr>
                                <tr style="background: rgba(59, 130, 246, 0.1);"><td><strong>XGBoost (v4)</strong></td><td><strong>12.5</strong></td><td><strong>18.3</strong></td><td><strong>0.92</strong></td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">MAE å¯¹æ¯”</h3>
                        <div id="baselineChart" class="chart-container"></div>
                    </div>
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">æ¶ˆèå®éªŒç»“æœ</h3>
                        <p class="text-gray-400 text-sm mb-4">é€šè¿‡ç§»é™¤ä¸åŒç±»åˆ«çš„ç‰¹å¾ï¼Œè¯„ä¼°å…¶å¯¹æ¨¡å‹æ€§èƒ½çš„è´¡çŒ®</p>
                        <div id="ablationChart" class="chart-container" style="height: 350px;"></div>
                    </div>
                </div>

                <!-- DL åŸºçº¿å¯¹æ¯” -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 dl-only">
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">æœºå™¨å­¦ä¹  vs æ·±åº¦å­¦ä¹  é€ Horizon å¯¹æ¯”</h3>
                        <p class="text-sm text-gray-400 mb-4">åŒä¸€æµ‹è¯•é›†ä¸Šçš„æ€§èƒ½å¯¹æ¯”ï¼Œè¯„ä¼°ä¸¤ç§æ–¹æ³•åœ¨ä¸åŒé¢„æµ‹æ—¶é—´è·¨åº¦ä¸Šçš„ä¼˜åŠ£</p>
                        <table class="data-table">
                            <thead><tr><th>Horizon</th><th colspan="3" style="color:#60a5fa;">æœºå™¨å­¦ä¹  (XGBoost)</th><th colspan="3" style="color:#a78bfa;">æ·±åº¦å­¦ä¹  (LSTM+Attn)</th><th>èƒœå‡º</th></tr>
                            <tr><th></th><th>MAE</th><th>RMSE</th><th>RÂ²</th><th>MAE</th><th>RMSE</th><th>RÂ²</th><th></th></tr></thead>
                            <tbody>
                                <tr><td><strong>1h</strong></td><td class="text-blue-400"><strong>6.03</strong></td><td>9.84</td><td class="text-blue-400"><strong>0.86</strong></td><td>11.37</td><td>17.59</td><td>0.80</td><td style="color:#60a5fa;">ML</td></tr>
                                <tr><td><strong>6h</strong></td><td class="text-blue-400"><strong>11.41</strong></td><td>17.06</td><td class="text-blue-400"><strong>0.71</strong></td><td>15.74</td><td>23.10</td><td>0.66</td><td style="color:#60a5fa;">ML</td></tr>
                                <tr><td><strong>12h</strong></td><td>17.72</td><td>26.25</td><td>0.30</td><td>20.70</td><td>28.95</td><td>0.47</td><td style="color:#a78bfa;">DL (RÂ²)</td></tr>
                                <tr><td><strong>24h</strong></td><td>23.24</td><td>33.79</td><td>-0.35</td><td>27.47</td><td>36.12</td><td class="text-purple-400"><strong>0.17</strong></td><td style="color:#a78bfa;">DL (RÂ²)</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">XGBoost vs LSTM+Attention</h3>
                        <table class="data-table">
                            <thead><tr><th>é¢„æµ‹èŒƒå›´</th><th>æ¨¡å‹</th><th>MAE</th><th>RMSE</th><th>RÂ²</th></tr></thead>
                            <tbody id="dlComparisonTable1">
                                <tr><td colspan="5" style="color: var(--text-secondary); text-align: center;">ç­‰å¾…åŠ è½½...</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">åˆ†æç»“è®º</h3>
                        <div class="space-y-3">
                            <div class="p-3 rounded-lg" style="background: rgba(59, 130, 246, 0.1);">
                                <div class="text-sm font-medium text-blue-400">ML ä¼˜åŠ¿ï¼šçŸ­æœŸé¢„æµ‹ (1h~6h)</div>
                                <div class="text-xs text-gray-400 mt-1">XGBoost çš„æ˜¾å¼ lag ç‰¹å¾ (AQI_lag_1h) å¯¹çŸ­æœŸæƒ¯æ€§å»ºæ¨¡æå…¶é«˜æ•ˆï¼ŒDL éš¾ä»¥è¶…è¶Š</div>
                            </div>
                            <div class="p-3 rounded-lg" style="background: rgba(139, 92, 246, 0.1);">
                                <div class="text-sm font-medium text-purple-400">DL ä¼˜åŠ¿ï¼šé•¿æœŸ RÂ² (12h~24h)</div>
                                <div class="text-xs text-gray-400 mt-1">LSTM è‡ªåŠ¨å­¦ä¹ å¤æ‚æ—¶åºæ¨¡å¼ + ç©ºé—´ä¼ è¾“æ•ˆåº”ï¼Œ24h RÂ² ä» -0.35 æå‡åˆ° 0.17</div>
                            </div>
                            <div class="p-3 rounded-lg" style="background: rgba(245, 158, 11, 0.1);">
                                <div class="text-sm font-medium text-yellow-400">äº’è¡¥ç­–ç•¥</div>
                                <div class="text-xs text-gray-400 mt-1">æœ€ä¼˜æ–¹æ¡ˆï¼šçŸ­æœŸ(1-6h)ç”¨XGBoostï¼Œä¸­é•¿æœŸ(12-24h)å‚è€ƒLSTM+Attentionçš„RÂ²ä¼˜åŠ¿</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 6: Historical Validation -->
            <div id="tab-validation" class="tab-content">
                <div class="grid grid-cols-1 gap-6 ml-only">
                    <!-- å„ Horizon æ€§èƒ½æ±‡æ€» -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">XGBoost v4 å„é¢„æµ‹æ—¶æ®µéªŒè¯ç»“æœ</h3>
                        <p class="text-sm text-gray-400 mb-4">åœ¨æ—¶é—´åºåˆ—äº¤å‰éªŒè¯æµ‹è¯•é›†ä¸Šè¯„ä¼° 4 ä¸ªé¢„æµ‹ Horizon çš„æ€§èƒ½æŒ‡æ ‡</p>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                            <div class="p-4 rounded-lg text-center" style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2);">
                                <div class="text-2xl font-bold text-green-400">0.86</div>
                                <div class="text-xs text-gray-400 mt-1">1h RÂ²</div>
                                <div class="text-xs text-green-400">MAE: 6.03</div>
                            </div>
                            <div class="p-4 rounded-lg text-center" style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2);">
                                <div class="text-2xl font-bold text-blue-400">0.71</div>
                                <div class="text-xs text-gray-400 mt-1">6h RÂ²</div>
                                <div class="text-xs text-blue-400">MAE: 11.41</div>
                            </div>
                            <div class="p-4 rounded-lg text-center" style="background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.2);">
                                <div class="text-2xl font-bold text-yellow-400">0.30</div>
                                <div class="text-xs text-gray-400 mt-1">12h RÂ²</div>
                                <div class="text-xs text-yellow-400">MAE: 17.72</div>
                            </div>
                            <div class="p-4 rounded-lg text-center" style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2);">
                                <div class="text-2xl font-bold text-red-400">-0.35</div>
                                <div class="text-xs text-gray-400 mt-1">24h RÂ²</div>
                                <div class="text-xs text-red-400">MAE: 23.24</div>
                            </div>
                        </div>
                        <p class="text-xs text-gray-500">ç»“è®ºï¼šXGBoost åœ¨çŸ­æœŸï¼ˆ1-6hï¼‰é¢„æµ‹è¡¨ç°ä¼˜ç§€ï¼Œä½†åœ¨é•¿æœŸï¼ˆ12-24hï¼‰é¢„æµ‹ä¸­è§£é‡ŠåŠ›å¤§å¹…ä¸‹é™ã€‚24h RÂ²ä¸ºè´Ÿè¯´æ˜æ¨¡å‹ä¸å¦‚ç®€å•å†å²å‡å€¼ã€‚</p>
                    </div>

                    <!-- Prediction vs Actual -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">é¢„æµ‹å€¼ vs å®é™…å€¼å¯¹æ¯”ï¼ˆ1å°æ—¶é¢„æµ‹æ¨¡å‹ï¼‰</h3>
                        <p class="text-sm text-gray-400 mb-4">æ­¤å›¾å±•ç¤º1å°æ—¶é¢„æµ‹æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šçš„è¡¨ç°ã€‚ç”±äºçŸ­æœŸé¢„æµ‹å‡†ç¡®ç‡è¾ƒé«˜ï¼ˆRÂ²=0.86ï¼‰ï¼Œé¢„æµ‹æ›²çº¿ä¸å®é™…æ›²çº¿è¾ƒä¸ºæ¥è¿‘ã€‚</p>
                        <div id="validationChart" class="chart-container" style="height: 400px;"></div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Error Distribution -->
                        <div class="glass-card p-6">
                            <h3 class="section-title">è¯¯å·®åˆ†å¸ƒ</h3>
                            <div id="errorDistChart" class="chart-container"></div>
                        </div>

                        <!-- Accuracy by Scenario -->
                        <div class="glass-card p-6">
                            <h3 class="section-title">åˆ†åœºæ™¯å‡†ç¡®ç‡</h3>
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>åœºæ™¯</th>
                                        <th>MAE</th>
                                        <th>æ ·æœ¬æ•°</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td>å·¥ä½œæ—¥</td><td>12.1</td><td>~65%</td></tr>
                                    <tr><td>å‘¨æœ«</td><td>13.2</td><td>~35%</td></tr>
                                    <tr><td>æ™´å¤©</td><td>11.8</td><td>~70%</td></tr>
                                    <tr><td>é›¨å¤©</td><td>14.5</td><td>~30%</td></tr>
                                    <tr><td>AQI<50 (ä¼˜)</td><td>8.5</td><td>~40%</td></tr>
                                    <tr><td>AQI 50-100 (è‰¯)</td><td>12.3</td><td>~45%</td></tr>
                                    <tr><td>AQI>100 (æ±¡æŸ“)</td><td>18.7</td><td>~15%</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 dl-only">
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">LSTM+Attention æµ‹è¯•é›†è¯„ä¼°</h3>
                        <p class="text-sm text-gray-400 mb-4">åœ¨ 158 æ¡æ—¶åºä¸é‡å çš„æµ‹è¯•æ ·æœ¬ä¸Šè¯„ä¼°ï¼Œè¦†ç›–çº¦ 1 ä¸ªæœˆæ•°æ®ã€‚</p>
                        <table class="data-table">
                            <thead><tr><th>é¢„æµ‹ Horizon</th><th>MAE</th><th>RMSE</th><th>RÂ²</th><th>MAPE</th><th>vs XGBoost RÂ²</th></tr></thead>
                            <tbody>
                                <tr style="background: rgba(139, 92, 246, 0.15);"><td><strong>1 å°æ—¶</strong></td><td><strong>11.37</strong></td><td>17.59</td><td><strong>0.80</strong></td><td>17.7%</td><td>0.86 (MLèƒœ)</td></tr>
                                <tr><td>6 å°æ—¶</td><td>15.74</td><td>23.10</td><td>0.66</td><td>25.2%</td><td>0.71 (MLèƒœ)</td></tr>
                                <tr><td>12 å°æ—¶</td><td>20.70</td><td>28.95</td><td><strong>0.47</strong></td><td>34.1%</td><td>0.30 (DLèƒœ)</td></tr>
                                <tr><td>24 å°æ—¶</td><td>27.47</td><td>36.12</td><td><strong>0.17</strong></td><td>49.1%</td><td>-0.35 (DLèƒœ)</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">è®­ç»ƒæ›²çº¿</h3>
                        <div id="dlValidationTrainingChart" class="chart-container" style="height: 280px;"></div>
                        <p class="text-xs text-gray-500 mt-2" id="dlValidationTrainingInfo">æœ€ä½³æ¨¡å‹: Epoch 23</p>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">å„ Horizon RÂ² å¯¹æ¯”</h3>
                        <div id="dlValidationR2Chart" class="chart-container" style="height: 280px;"></div>
                    </div>
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">å…³é”®è§‚å¯Ÿ</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="p-3 rounded-lg" style="background: rgba(16, 185, 129, 0.1);">
                                <div class="text-sm"><strong class="text-green-400">1h é¢„æµ‹ï¼šRÂ²=0.80</strong></div>
                                <div class="text-xs text-gray-400 mt-1">çŸ­æœŸé¢„æµ‹å¯é ï¼ŒLSTM æˆåŠŸæ•æ‰æ—¶åºæƒ¯æ€§å’Œç©ºé—´ä¼ è¾“æ•ˆåº”ã€‚ä½†ä»ä¸åŠ XGBoost (0.86)ï¼Œå› å…¶ç¼ºä¹æ˜¾å¼ lag ç‰¹å¾ã€‚</div>
                            </div>
                            <div class="p-3 rounded-lg" style="background: rgba(139, 92, 246, 0.1);">
                                <div class="text-sm"><strong class="text-purple-400">12h/24hï¼šDL RÂ² é¢†å…ˆ</strong></div>
                                <div class="text-xs text-gray-400 mt-1">24h RÂ²=0.17 vs XGBoostçš„-0.35ï¼Œè¯´æ˜ LSTM+Attention çš„æ—¶åºæ¨¡å¼å­¦ä¹ åœ¨é•¿æœŸé¢„æµ‹ä¸Šæœ‰ä¼˜åŠ¿ã€‚</div>
                            </div>
                            <div class="p-3 rounded-lg" style="background: rgba(245, 158, 11, 0.1);">
                                <div class="text-sm"><strong class="text-yellow-400">MC Dropout ä¸ç¡®å®šæ€§</strong></div>
                                <div class="text-xs text-gray-400 mt-1">50 æ¬¡å‰å‘ä¼ æ’­ä¼°è®¡ 95% CIã€‚1h ç½®ä¿¡åŒºé—´è¾ƒçª„(æ¨¡å‹ç¡®ä¿¡)ï¼Œ24h åŒºé—´æ˜¾è‘—å¢å¤§(ä¸ç¡®å®šæ€§é«˜)ã€‚</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 7: Model Explainability -->
            <div id="tab-explainability" class="tab-content">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 ml-only">

                    <!-- Overview -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">æ¨¡å‹å¯è§£é‡Šæ€§ï¼šä¸ºä»€ä¹ˆè¿™äº›å˜é‡èƒ½é¢„æµ‹ AQIï¼Ÿ</h3>
                        <p class="text-gray-400 mb-4">
                            æœºå™¨å­¦ä¹ æ¨¡å‹çš„"é»‘ç®±"ç‰¹æ€§å¸¸å¸¸è®©äººéš¾ä»¥ç†è§£é¢„æµ‹ä¾æ®ã€‚æœ¬èŠ‚ä»<strong class="text-white">ç‰©ç†æœºåˆ¶</strong>å’Œ<strong class="text-white">ç»Ÿè®¡å…³ç³»</strong>ä¸¤ä¸ªè§’åº¦ï¼Œ
                            è§£é‡Šæ¯ä¸ªå…³é”®ç‰¹å¾å¦‚ä½•å½±å“ AQI é¢„æµ‹ç»“æœï¼Œå¸®åŠ©æ‚¨ç†è§£æ¨¡å‹çš„å†³ç­–é€»è¾‘ã€‚
                        </p>
                        <div class="p-4 rounded-xl" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2);">
                            <div class="font-medium text-purple-400 mb-2">æ ¸å¿ƒå‘ç° (v4 æ¨¡å‹ - æ–¹æ³•è®ºæ­£ç¡® + å¯è§£é‡Šæ€§ä¼˜å…ˆ)</div>
                            <p class="text-sm text-gray-400">
                                æ¨¡å‹æœ€ä¾èµ–çš„æ˜¯<strong class="text-white">å½“å‰ AQI</strong>ï¼ˆè´¡çŒ® 64.6%ï¼‰å’Œ<strong class="text-white">PM10 æµ“åº¦</strong>ï¼ˆ20.4%ï¼‰ï¼Œè¿™ç¬¦åˆç©ºæ°”è´¨é‡çš„<strong class="text-white">æ—¶é—´æƒ¯æ€§</strong>è§„å¾‹ã€‚
                                åŒæ—¶å‘ç°<strong class="text-white">æ‰¬å·ç‰¹æœ‰è§„å¾‹</strong>ï¼šæ¹¿åº¦ä¸ AQI <strong class="text-yellow-400">è´Ÿç›¸å…³</strong>ï¼ˆé«˜æ¹¿åº¦ä¼´éšé™é›¨æ¸…é™¤æ±¡æŸ“ç‰©ï¼‰ï¼Œæ—¥æ¸©å·®ä¸ AQI <strong class="text-yellow-400">æ­£ç›¸å…³</strong>ï¼ˆæ™´æœ—å¤©æ°”ä¸åˆ©æ‰©æ•£ï¼‰ã€‚
                                <strong class="text-green-400">æ¯ä¸ªç‰¹å¾éƒ½æœ‰æ˜ç¡®çš„ç‰©ç†æ„ä¹‰</strong>ï¼Œæ¨¡å‹å¯è§£é‡Šæ€§å¼ºã€‚
                            </p>
                        </div>
                    </div>

                    <!-- Top Features Explanation -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">å…³é”®ç‰¹å¾çš„ç‰©ç†æ„ä¹‰ä¸å½±å“æœºåˆ¶</h3>
                        <div class="space-y-6">

                            <!-- AQI Lag (å†å²æœ€è¿‘å€¼) -->
                            <div class="p-5 rounded-xl" style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2);">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 rounded-lg bg-blue-500/30 flex items-center justify-center text-blue-400 font-bold">1</div>
                                    <div>
                                        <div class="font-medium text-blue-400">1h å‰ AQI (AQI_lag_1h)</div>
                                        <div class="text-xs text-gray-500">æ—¶é—´æƒ¯æ€§ | é‡è¦æ€§: â˜…â˜…â˜…â˜…â˜… (64.6%)</div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">ç‰©ç†æœºåˆ¶</div>
                                        <p class="text-sm text-gray-400">
                                            ç©ºæ°”è´¨é‡å…·æœ‰<strong class="text-white">å¼ºæ—¶é—´è¿ç»­æ€§</strong>ã€‚æ±¡æŸ“ç‰©çš„ç´¯ç§¯å’Œæ¶ˆæ•£æ˜¯ä¸€ä¸ªæ¸è¿›è¿‡ç¨‹ï¼Œ
                                            ä¸ä¼šç¬é—´å‰§å˜ã€‚<strong class="text-yellow-400">1 å°æ—¶å‰</strong>çš„ AQI å€¼æ˜¯é¢„æµ‹ä¸‹ 1 å°æ—¶æœ€é‡è¦çš„ä¾æ®ã€‚
                                        </p>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">æ¨¡å‹å­¦åˆ°çš„è§„å¾‹</div>
                                        <ul class="text-sm text-gray-400 space-y-1">
                                            <li>â€¢ 1h å‰ AQI é«˜ â†’ ä¸‹ 1h å¤§æ¦‚ç‡ç»´æŒé«˜ä½</li>
                                            <li>â€¢ ä¸ç›®æ ‡ç›¸å…³ç³»æ•°é«˜è¾¾ 0.97</li>
                                            <li>â€¢ è¿™å°±æ˜¯æ—¶é—´åºåˆ—é¢„æµ‹çš„"æƒ¯æ€§"</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="mt-3 p-3 rounded-lg" style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3);">
                                    <div class="text-xs text-red-300">
                                        <strong>âš ï¸ æ³¨æ„ï¼š</strong>è¿™æ˜¯<strong>1 å°æ—¶å‰</strong>çš„å†å²å€¼ï¼Œ<strong>ä¸æ˜¯ç›®æ ‡å˜é‡æœ¬èº«</strong>ï¼
                                        é¢„æµ‹ 1h åæ—¶ç”¨ lag_1hï¼Œé¢„æµ‹ 24h åæ—¶ç”¨ lag_24hã€‚è¿™æ˜¯æ ‡å‡†çš„æ—¶åºé¢„æµ‹æ–¹æ³•ï¼Œä¸å­˜åœ¨æ•°æ®æ³„æ¼ã€‚
                                    </div>
                                </div>
                            </div>

                            <!-- PM10 -->
                            <div class="p-5 rounded-xl" style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2);">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 rounded-lg bg-green-500/30 flex items-center justify-center text-green-400 font-bold">2</div>
                                    <div>
                                        <div class="font-medium text-green-400">PM10 æµ“åº¦</div>
                                        <div class="text-xs text-gray-500">ç²—é¢—ç²’ç‰© | é‡è¦æ€§: â˜…â˜…â˜…â˜…â˜† (20.4%)</div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">ç‰©ç†æœºåˆ¶</div>
                                        <p class="text-sm text-gray-400">
                                            PM10 æ˜¯<strong class="text-white">ç©ºæ°”è´¨é‡æŒ‡æ•°(AQI)çš„ç›´æ¥ç»„æˆéƒ¨åˆ†</strong>ã€‚
                                            åŒ…å«ç›´å¾„å°äº10å¾®ç±³çš„é¢—ç²’ç‰©ï¼Œæ¥æºåŒ…æ‹¬æ‰¬å°˜ã€å»ºç­‘æ–½å·¥ã€å·¥ä¸šæ’æ”¾ç­‰ã€‚
                                            ä¸ AQI é«˜åº¦æ­£ç›¸å…³ï¼ˆç›¸å…³ç³»æ•° 0.90ï¼‰ã€‚
                                        </p>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">æ¨¡å‹å­¦åˆ°çš„è§„å¾‹</div>
                                        <ul class="text-sm text-gray-400 space-y-1">
                                            <li>â€¢ PM10 é«˜ â†’ AQI é«˜ï¼ˆç›´æ¥æˆåˆ†ï¼‰</li>
                                            <li>â€¢ æ˜¥å­£æ²™å°˜å¤©æ°”æ—¶ PM10 è´¡çŒ®æ›´å¤§</li>
                                            <li>â€¢ ä¸ PM2.5 çš„æ¯”å€¼åæ˜ æ±¡æŸ“ç±»å‹</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- Humidity - Yangzhou's unique finding -->
                            <div class="p-5 rounded-xl" style="background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.2);">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 rounded-lg bg-yellow-500/30 flex items-center justify-center text-yellow-400 font-bold">3</div>
                                    <div>
                                        <div class="font-medium text-yellow-400">æ¹¿åº¦ (humidity) âš ï¸ æ‰¬å·ç‰¹æœ‰è§„å¾‹</div>
                                        <div class="text-xs text-gray-500">æ°”è±¡-åŒ–å­¦ | é‡è¦æ€§: â˜…â˜…â˜†â˜†â˜† (0.6%) | <span class="text-red-400">è´Ÿç›¸å…³</span></div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">æ•™ç§‘ä¹¦é¢„æœŸ vs å®é™…å‘ç°</div>
                                        <p class="text-sm text-gray-400">
                                            <strong class="text-red-400">æ•™ç§‘ä¹¦ï¼š</strong>é«˜æ¹¿åº¦ä¿ƒè¿›äºŒæ¬¡é¢—ç²’ç‰©ç”Ÿæˆ â†’ æ­£ç›¸å…³<br>
                                            <strong class="text-green-400">å®é™…æ•°æ®ï¼š</strong>é«˜æ¹¿åº¦æ—¶ AQI <strong class="text-white">æ›´ä½</strong> â†’ è´Ÿç›¸å…³<br>
                                            <span class="text-xs">å¹²ç‡¥(&lt;40%): AQI=68 | é«˜æ¹¿(&gt;80%): AQI=49</span>
                                        </p>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">æ‰¬å·çš„ç‰¹æ®Šæƒ…å†µ</div>
                                        <ul class="text-sm text-gray-400 space-y-1">
                                            <li>â€¢ æ‰¬å·ä½äºé•¿ä¸‰è§’ï¼Œé«˜æ¹¿åº¦å¸¸ä¼´éš<strong class="text-white">é™é›¨</strong></li>
                                            <li>â€¢ é™é›¨å†²åˆ·æ±¡æŸ“ç‰©ï¼Œä½¿ AQI ä¸‹é™</li>
                                            <li>â€¢ é«˜æ¹¿åº¦ä¹Ÿæ„å‘³ç€<strong class="text-white">æµ·æ´‹æ€§æ°”å›¢</strong>å½±å“</li>
                                            <li class="text-yellow-300">â€¢ è¿™æ˜¯æ•°æ®é©±åŠ¨çš„å‘ç°ï¼Œè€Œéå¥—ç”¨æ•™ç§‘ä¹¦ï¼</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- Temperature Daily Range - Yangzhou's unique finding -->
                            <div class="p-5 rounded-xl" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2);">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 rounded-lg bg-purple-500/30 flex items-center justify-center text-purple-400 font-bold">4</div>
                                    <div>
                                        <div class="font-medium text-purple-400">æ—¥æ¸©å·® (temp_daily_range) âš ï¸ æ‰¬å·ç‰¹æœ‰è§„å¾‹</div>
                                        <div class="text-xs text-gray-500">æ°”è±¡-æ‰©æ•£ | é‡è¦æ€§: â˜…â˜…â˜†â˜†â˜† (0.8%) | <span class="text-red-400">æ­£ç›¸å…³</span></div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">æ•™ç§‘ä¹¦é¢„æœŸ vs å®é™…å‘ç°</div>
                                        <p class="text-sm text-gray-400">
                                            <strong class="text-red-400">æ•™ç§‘ä¹¦ï¼š</strong>æ—¥æ¸©å·®å° â†’ é€†æ¸©å±‚ â†’ AQIé«˜ï¼ˆè´Ÿç›¸å…³ï¼‰<br>
                                            <strong class="text-green-400">å®é™…æ•°æ®ï¼š</strong>æ—¥æ¸©å·®å¤§ â†’ AQI <strong class="text-white">æ›´é«˜</strong>ï¼ˆæ­£ç›¸å…³ï¼‰<br>
                                            <span class="text-xs">ç›¸å…³ç³»æ•°: +0.46</span>
                                        </p>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">æ‰¬å·çš„ç‰¹æ®Šæƒ…å†µ</div>
                                        <ul class="text-sm text-gray-400 space-y-1">
                                            <li>â€¢ æ—¥æ¸©å·®å¤§ = <strong class="text-white">æ™´æœ—å¤©æ°”</strong></li>
                                            <li>â€¢ æ™´æœ—å¤©æ°” = <strong class="text-white">é«˜å‹æ§åˆ¶</strong></li>
                                            <li>â€¢ é«˜å‹æ§åˆ¶ = å¤§æ°”ç¨³å®š = ä¸åˆ©äºæ‰©æ•£</li>
                                            <li class="text-yellow-300">â€¢ ä¸åŒ—æ–¹åŸå¸‚"é€†æ¸©å±‚"å‡è®¾ä¸åŒï¼</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- Wind Speed & Heating Season -->
                            <div class="p-5 rounded-xl" style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2);">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 rounded-lg bg-red-500/30 flex items-center justify-center text-red-400 font-bold">5</div>
                                    <div>
                                        <div class="font-medium text-red-400">é£é€Ÿ & ä¾›æš–å­£</div>
                                        <div class="text-xs text-gray-500">æ°”è±¡-æ‰©æ•£ & æ—¶é—´-æ’æ”¾ | é‡è¦æ€§: â˜…â˜…â˜†â˜†â˜†</div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">é£é€Ÿ (0.6%) - ç¬¦åˆé¢„æœŸ</div>
                                        <ul class="text-sm text-gray-400 space-y-1">
                                            <li>â€¢ ä¸ AQI <strong class="text-green-400">è´Ÿç›¸å…³</strong> âœ“</li>
                                            <li>â€¢ é«˜é£é€Ÿä¿ƒè¿›æ±¡æŸ“ç‰©æ‰©æ•£</li>
                                            <li>â€¢ ä½é£é€Ÿ(&lt;2m/s)æ—¶æ±¡æŸ“å®¹æ˜“ç´¯ç§¯</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">ä¾›æš–å­£ (0.7%) - ç¬¦åˆé¢„æœŸ</div>
                                        <ul class="text-sm text-gray-400 space-y-1">
                                            <li>â€¢ ä¸ AQI <strong class="text-green-400">æ­£ç›¸å…³</strong> âœ“</li>
                                            <li>â€¢ 11æœˆè‡³3æœˆä¸ºä¾›æš–å­£</li>
                                            <li>â€¢ åŒ—æ–¹ä¾›æš–æ’æ”¾é€šè¿‡åŒºåŸŸä¼ è¾“å½±å“æ‰¬å·</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- Feature Interaction -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">ç‰¹å¾ä¹‹é—´çš„ååŒæ•ˆåº”</h3>
                        <p class="text-sm text-gray-400 mb-4">æ¨¡å‹èƒ½å¤Ÿå­¦ä¹ ç‰¹å¾ä¹‹é—´å¤æ‚çš„äº¤äº’å…³ç³»ï¼š</p>
                        <div class="space-y-3">
                            <div class="p-3 rounded-lg" style="background: rgba(59, 130, 246, 0.1);">
                                <div class="text-sm"><strong class="text-blue-400">å½“å‰ AQI é«˜ + PM10 é«˜ + ä½é£é€Ÿ</strong></div>
                                <div class="text-xs text-gray-400 mt-1">â†’ å…¸å‹æ±¡æŸ“ç´¯ç§¯æ¡ä»¶ï¼Œé¢„æµ‹ AQI å°†ç»§ç»­ç»´æŒé«˜ä½æˆ–ä¸Šå‡</div>
                            </div>
                            <div class="p-3 rounded-lg" style="background: rgba(16, 185, 129, 0.1);">
                                <div class="text-sm"><strong class="text-green-400">é«˜æ¹¿åº¦ + æ°”å‹ä¸‹é™</strong></div>
                                <div class="text-xs text-gray-400 mt-1">â†’ é™é›¨å¤©æ°”å³å°†åˆ°æ¥ï¼ŒAQI é¢„è®¡ä¸‹é™ï¼ˆæ‰¬å·ç‰¹æœ‰è§„å¾‹ï¼‰</div>
                            </div>
                            <div class="p-3 rounded-lg" style="background: rgba(245, 158, 11, 0.1);">
                                <div class="text-sm"><strong class="text-yellow-400">æ—¥æ¸©å·®å¤§ + é«˜æ°”å‹ + ä¾›æš–å­£</strong></div>
                                <div class="text-xs text-gray-400 mt-1">â†’ å†¬å­£æ™´æœ—é«˜å‹å¤©æ°”ï¼Œä¸åˆ©äºæ‰©æ•£ï¼ŒAQI é¢„è®¡è¾ƒé«˜</div>
                            </div>
                            <div class="p-3 rounded-lg" style="background: rgba(139, 92, 246, 0.1);">
                                <div class="text-sm"><strong class="text-purple-400">é«˜é£é€Ÿ + éä¾›æš–å­£ + ä½æ¹¿åº¦</strong></div>
                                <div class="text-xs text-gray-400 mt-1">â†’ è‰¯å¥½æ‰©æ•£æ¡ä»¶ï¼Œä½†æ³¨æ„æ‰¬å°˜å¤©æ°”å¯èƒ½å¯¼è‡´ PM10 ä¸Šå‡</div>
                            </div>
                        </div>
                    </div>

                    <!-- What Model Cannot Capture -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">æ¨¡å‹æ— æ³•æ•æ‰çš„å› ç´ </h3>
                        <p class="text-sm text-gray-400 mb-4">ç†è§£æ¨¡å‹çš„å±€é™æ€§ä¸ç†è§£å…¶èƒ½åŠ›åŒæ ·é‡è¦ï¼š</p>
                        <div class="space-y-3">
                            <div class="p-3 rounded-lg border-l-4 border-red-500" style="background: rgba(239, 68, 68, 0.1);">
                                <div class="text-sm font-medium text-red-400">çªå‘äº‹ä»¶</div>
                                <div class="text-xs text-gray-400 mt-1">å·¥å‚æ„å¤–æ’æ”¾ã€ç«ç¾ã€äº¤é€šäº‹æ•…ç­‰æ— æ³•ä»å†å²æ•°æ®é¢„æµ‹</div>
                            </div>
                            <div class="p-3 rounded-lg border-l-4 border-yellow-500" style="background: rgba(245, 158, 11, 0.1);">
                                <div class="text-sm font-medium text-yellow-400">æ”¿ç­–å¹²é¢„</div>
                                <div class="text-xs text-gray-400 mt-1">ä¸´æ—¶äº¤é€šç®¡åˆ¶ã€å·¥å‚é™äº§ç­‰æ”¿ç­–æªæ–½çš„å³æ—¶æ•ˆæœ</div>
                            </div>
                            <div class="p-3 rounded-lg border-l-4 border-blue-500" style="background: rgba(59, 130, 246, 0.1);">
                                <div class="text-sm font-medium text-blue-400">è·¨åŒºåŸŸä¼ è¾“ç»†èŠ‚</div>
                                <div class="text-xs text-gray-400 mt-1">è™½æœ‰ä¸Šæ¸¸åŸå¸‚æ•°æ®ï¼Œä½†ç²¾ç¡®çš„æ±¡æŸ“ç‰©ä¼ è¾“è·¯å¾„éš¾ä»¥å»ºæ¨¡</div>
                            </div>
                            <div class="p-3 rounded-lg border-l-4 border-purple-500" style="background: rgba(139, 92, 246, 0.1);">
                                <div class="text-sm font-medium text-purple-400">æç«¯å¤©æ°”</div>
                                <div class="text-xs text-gray-400 mt-1">æ²™å°˜æš´ã€å°é£ç­‰ç½•è§äº‹ä»¶åœ¨è®­ç»ƒæ•°æ®ä¸­æ ·æœ¬ä¸è¶³</div>
                            </div>
                        </div>
                    </div>

                    <!-- SHAP-like Explanation -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">å•æ¬¡é¢„æµ‹çš„ç‰¹å¾è´¡çŒ®åˆ†æï¼ˆç¤ºä¾‹ï¼‰</h3>
                        <p class="text-sm text-gray-400 mb-4">
                            ä»¥ä¸‹å±•ç¤ºæŸä¸€æ—¶åˆ»é¢„æµ‹çš„ç‰¹å¾è´¡çŒ®åˆ†è§£ï¼Œç±»ä¼¼ SHAP å€¼åˆ†æã€‚æ­£å€¼è¡¨ç¤ºè¯¥ç‰¹å¾ä½¿é¢„æµ‹å€¼ä¸Šå‡ï¼Œè´Ÿå€¼è¡¨ç¤ºä¸‹é™ï¼š
                        </p>
                        <div class="p-4 rounded-xl" style="background: rgba(26, 26, 36, 0.8);">
                            <div class="text-center mb-4">
                                <span class="text-gray-400">åŸºå‡†å€¼</span>
                                <span class="text-2xl font-bold mx-2">59</span>
                                <span class="text-gray-400">â†’ é¢„æµ‹å€¼</span>
                                <span class="text-2xl font-bold mx-2 text-orange-400">78</span>
                            </div>
                            <div class="space-y-2">
                                <div class="flex items-center gap-2">
                                    <span class="w-44 text-sm text-gray-400">AQI_lag_1h = 72</span>
                                    <div class="flex-1 h-6 rounded relative overflow-hidden" style="background: rgba(255,255,255,0.1);">
                                        <div class="absolute right-1/2 h-full bg-red-500/60" style="width: 50%;"></div>
                                    </div>
                                    <span class="text-red-400 text-sm w-16 text-right">+12.3</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-44 text-sm text-gray-400">PM10 = 85 Î¼g/mÂ³</span>
                                    <div class="flex-1 h-6 rounded relative overflow-hidden" style="background: rgba(255,255,255,0.1);">
                                        <div class="absolute right-1/2 h-full bg-red-500/60" style="width: 25%;"></div>
                                    </div>
                                    <span class="text-red-400 text-sm w-16 text-right">+4.8</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-44 text-sm text-gray-400">humidity = 85%</span>
                                    <div class="flex-1 h-6 rounded relative overflow-hidden" style="background: rgba(255,255,255,0.1);">
                                        <div class="absolute left-1/2 h-full bg-green-500/60" style="width: 10%;"></div>
                                    </div>
                                    <span class="text-green-400 text-sm w-16 text-right">-2.1</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-44 text-sm text-gray-400">AQI_trend_24h = +15</span>
                                    <div class="flex-1 h-6 rounded relative overflow-hidden" style="background: rgba(255,255,255,0.1);">
                                        <div class="absolute right-1/2 h-full bg-red-500/60" style="width: 12%;"></div>
                                    </div>
                                    <span class="text-red-400 text-sm w-16 text-right">+2.5</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-44 text-sm text-gray-400">wind_speed = 4.5 m/s</span>
                                    <div class="flex-1 h-6 rounded relative overflow-hidden" style="background: rgba(255,255,255,0.1);">
                                        <div class="absolute left-1/2 h-full bg-green-500/60" style="width: 8%;"></div>
                                    </div>
                                    <span class="text-green-400 text-sm w-16 text-right">-1.8</span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 p-3 rounded-lg" style="background: rgba(59, 130, 246, 0.1);">
                            <div class="text-sm text-gray-400">
                                <strong class="text-blue-400">è§£è¯»ï¼š</strong>è¯¥æ—¶åˆ»é¢„æµ‹ AQI=78ï¼Œé«˜äºåŸºå‡†å€¼ 59ã€‚ä¸»è¦åŸå› æ˜¯ï¼š
                                1å°æ—¶å‰ AQI å·²ç»è¾ƒé«˜ï¼ˆ+12.3ï¼Œæ—¶é—´æƒ¯æ€§ï¼‰ã€PM10 æµ“åº¦åé«˜ï¼ˆ+4.8ï¼‰ã€
                                è¿‡å»24å°æ—¶å‘ˆä¸Šå‡è¶‹åŠ¿ï¼ˆ+2.5ï¼‰ã€‚
                                ä½†é«˜æ¹¿åº¦æœ‰åŠ©äºé¢—ç²’ç‰©æ²‰é™ï¼ˆ-2.1ï¼‰ï¼Œè¾ƒå¤§é£é€Ÿä¿ƒè¿›æ‰©æ•£ï¼ˆ-1.8ï¼‰ï¼Œéƒ¨åˆ†æŠµæ¶ˆäº†æ±¡æŸ“ã€‚
                            </div>
                        </div>
                    </div>

                    <!-- Key Takeaways -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">æ€»ç»“ï¼šæ¨¡å‹çš„å†³ç­–é€»è¾‘</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="p-4 rounded-xl text-center" style="background: rgba(59, 130, 246, 0.1);">
                                <div class="text-3xl mb-2">â±ï¸</div>
                                <div class="font-medium mb-1">æ—¶é—´æƒ¯æ€§ä¸»å¯¼</div>
                                <p class="text-xs text-gray-400">å†å² AQI è´¡çŒ® 64.6%ï¼Œç©ºæ°”è´¨é‡å˜åŒ–æ˜¯æ¸è¿›è¿‡ç¨‹ï¼ŒçŸ­æœŸå†…å»¶ç»­å½“å‰çŠ¶æ€</p>
                            </div>
                            <div class="p-4 rounded-xl text-center" style="background: rgba(16, 185, 129, 0.1);">
                                <div class="text-3xl mb-2">ğŸ­</div>
                                <div class="font-medium mb-1">æ±¡æŸ“ç‰©æµ“åº¦</div>
                                <p class="text-xs text-gray-400">PM10/PM2.5 æ˜¯ AQI çš„ç›´æ¥ç»„æˆéƒ¨åˆ†ï¼Œæµ“åº¦è¶Šé«˜ AQI è¶Šé«˜</p>
                            </div>
                            <div class="p-4 rounded-xl text-center" style="background: rgba(245, 158, 11, 0.1);">
                                <div class="text-3xl mb-2">ğŸŒ¤ï¸</div>
                                <div class="font-medium mb-1">æ°”è±¡æ¡ä»¶è°ƒæ§</div>
                                <p class="text-xs text-gray-400">é£é€Ÿä¿ƒè¿›æ‰©æ•£ã€æ¹¿åº¦å½±å“æ²‰é™ã€æ°”å‹åæ˜ å¤§æ°”ç¨³å®šæ€§</p>
                            </div>
                        </div>
                        <div class="mt-4 p-4 rounded-xl" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2);">
                            <div class="font-medium text-purple-400 mb-2">æ‰¬å·ç‰¹æœ‰å‘ç°</div>
                            <p class="text-sm text-gray-400">
                                <strong class="text-white">æ¹¿åº¦ä¸ AQI è´Ÿç›¸å…³</strong>ï¼šé«˜æ¹¿åº¦é€šå¸¸ä¼´éšé™é›¨ï¼Œæœ‰åŠ©äºæ¸…é™¤æ±¡æŸ“ç‰©ã€‚
                                <strong class="text-white">æ—¥æ¸©å·®ä¸ AQI æ­£ç›¸å…³</strong>ï¼šæ¸©å·®å¤§æ„å‘³ç€æ™´æœ—å¤©æ°”ï¼Œé«˜å‹æ§åˆ¶ä¸‹å¤§æ°”ç¨³å®šï¼Œä¸åˆ©äºæ±¡æŸ“ç‰©æ‰©æ•£ã€‚
                            </p>
                        </div>
                    </div>

                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 dl-only">
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">Attention æœºåˆ¶å¯è§£é‡Šæ€§</h3>
                        <p class="text-gray-400 mb-4">LSTM+Attention æ¨¡å‹é€šè¿‡ <strong class="text-white">Multi-Head Attention æƒé‡</strong>æä¾›å¯è§£é‡Šæ€§ã€‚4 ä¸ªæ³¨æ„åŠ›å¤´å„è‡ªå­¦ä¹ ä¸åŒçš„æ—¶é—´ä¾èµ–æ¨¡å¼ï¼Œæ¯ä¸ªå¤´ä¸º 48 ä¸ªå†å²æ—¶é—´æ­¥åˆ†é…æ³¨æ„åŠ›æƒé‡ã€‚</p>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="p-4 rounded-xl" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2);">
                                <div class="font-medium text-purple-400 mb-2">çŸ­æœŸæƒ¯æ€§æ¨¡å¼</div>
                                <p class="text-xs text-gray-400">æ³¨æ„åŠ›é›†ä¸­åœ¨æœ€è¿‘ 1-6 å°æ—¶ï¼šç©ºæ°”è´¨é‡å˜åŒ–å…·æœ‰å¼ºæƒ¯æ€§ï¼Œå½“å‰AQIä¸è¿‘å‡ å°æ—¶é«˜åº¦ç›¸å…³ã€‚å¯¹åº” AQI çš„è‡ªç›¸å…³ç‰¹æ€§ã€‚</p>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2);">
                                <div class="font-medium text-blue-400 mb-2">æ—¥å‘¨æœŸæ¨¡å¼</div>
                                <p class="text-xs text-gray-400">~24 å°æ—¶å‰å‡ºç°æ³¨æ„åŠ›å³°å€¼ï¼šäº¤é€šé«˜å³°ã€å·¥ä¸šç”Ÿäº§ã€æ°”è±¡æ¡ä»¶å‘ˆæ—¥å‘¨æœŸå˜åŒ–ï¼Œæ¨¡å‹å­¦ä¼šåˆ©ç”¨å‰ä¸€å¤©åŒæ—¶æ®µæ•°æ®ã€‚</p>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2);">
                                <div class="font-medium text-green-400 mb-2">ç©ºé—´ä¼ è¾“ä¿¡å·</div>
                                <p class="text-xs text-gray-400">ç‰¹å¾ä¸­çš„ç©ºé—´æ»å(å—äº¬lag3-12h)ä½¿æ¨¡å‹èƒ½æ„ŸçŸ¥ä¸Šé£å‘åŸå¸‚3-12å°æ—¶å‰çš„æ±¡æŸ“çŠ¶æ€ï¼Œå¯¹åº”å¤§æ°”ä¼ è¾“æ—¶é—´ã€‚</p>
                            </div>
                        </div>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">Attention æƒé‡åˆ†å¸ƒ</h3>
                        <div id="attentionHeatmapExplain" class="chart-container" style="height: 300px;"></div>
                        <p class="text-xs text-gray-500 mt-2">æœ€åæ—¶é—´æ­¥å¯¹å†å² 48 ä¸ªæ—¶é—´æ­¥çš„å¹³å‡æ³¨æ„åŠ›æƒé‡ï¼ˆ4 å¤´å¹³å‡ï¼‰</p>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">å¯è§£é‡Šæ€§æ–¹æ³•å¯¹æ¯”</h3>
                        <table class="data-table">
                            <thead><tr><th>ç»´åº¦</th><th style="color:#60a5fa">SHAP (XGBoost)</th><th style="color:#a78bfa">Attention (LSTM)</th></tr></thead>
                            <tbody>
                                <tr><td>è§£é‡Šå¯¹è±¡</td><td>æ¯ä¸ª<strong>ç‰¹å¾</strong>çš„è´¡çŒ®</td><td>æ¯ä¸ª<strong>æ—¶é—´æ­¥</strong>çš„é‡è¦æ€§</td></tr>
                                <tr><td>è§£é‡Šç²’åº¦</td><td>"PM10=85 è´¡çŒ® +4.8"</td><td>"3hå‰æ•°æ®è´¡çŒ® 15%"</td></tr>
                                <tr><td>ç†è®ºåŸºç¡€</td><td>Shapley value (åšå¼ˆè®º)</td><td>Attention weight (ç«¯åˆ°ç«¯å­¦ä¹ )</td></tr>
                                <tr><td>è®¡ç®—æˆæœ¬</td><td>è¾ƒé«˜ (éœ€å¤šæ¬¡æ¨ç†)</td><td>é›¶é¢å¤–æˆæœ¬ (è®­ç»ƒå‰¯äº§å“)</td></tr>
                                <tr><td>å› æœæ€§</td><td>éå› æœ (ç›¸å…³æ€§)</td><td>éå› æœ (ç›¸å…³æ€§)</td></tr>
                            </tbody>
                        </table>
                        <div class="p-3 mt-3 rounded-lg" style="background: rgba(16, 185, 129, 0.1);">
                            <div class="text-xs text-gray-400"><strong class="text-green-400">äº’è¡¥æ€§ï¼š</strong>SHAP å‘Šè¯‰ä½ "ä»€ä¹ˆç‰¹å¾é‡è¦"ï¼ŒAttention å‘Šè¯‰ä½ "ä»€ä¹ˆæ—¶é—´é‡è¦"ã€‚ç»“åˆä½¿ç”¨å¯ä»¥å¾—åˆ°æ›´å®Œæ•´çš„é¢„æµ‹è§£é‡Šã€‚</div>
                        </div>
                    </div>
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">MC Dropout ä¸ç¡®å®šæ€§é‡åŒ–</h3>
                        <p class="text-gray-400 text-sm mb-4">é™¤ Attention å¯è§£é‡Šæ€§å¤–ï¼ŒMC Dropout æä¾›äº†å¦ä¸€ä¸ªç»´åº¦çš„è§£é‡Šï¼š<strong class="text-white">æ¨¡å‹å¯¹é¢„æµ‹çš„ç¡®ä¿¡ç¨‹åº¦</strong>ã€‚</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="p-4 rounded-xl" style="background: rgba(139, 92, 246, 0.1);">
                                <h4 class="font-medium mb-2">å·¥ä½œåŸç†</h4>
                                <p class="text-xs text-gray-400">åœ¨æ¨ç†æ—¶ä¿æŒ Dropout(0.3) æ¿€æ´»ï¼Œè¿è¡Œ 50 æ¬¡å‰å‘ä¼ æ’­ã€‚æ¯æ¬¡ Dropout éšæœºå±è”½ä¸åŒçš„ç¥ç»å…ƒï¼Œäº§ç”Ÿç•¥æœ‰ä¸åŒçš„é¢„æµ‹ã€‚å–ç¬¬ 2.5% å’Œ 97.5% åˆ†ä½æ•°ä½œä¸º 95% ç½®ä¿¡åŒºé—´ã€‚</p>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(59, 130, 246, 0.1);">
                                <h4 class="font-medium mb-2">ç‰©ç†æ„ä¹‰</h4>
                                <p class="text-xs text-gray-400">ç½®ä¿¡åŒºé—´çª„ = æ¨¡å‹ç¡®ä¿¡ï¼ˆå„ Dropout è·¯å¾„ç»™å‡ºç›¸ä¼¼ç»“æœï¼‰ã€‚ç½®ä¿¡åŒºé—´å®½ = æ¨¡å‹ä¸ç¡®å®šï¼ˆç‰¹å¾ä¿¡å·å¼±æˆ–å¤„äºåˆ†å¸ƒå¤–æ•°æ®ï¼‰ã€‚å¯¹å†³ç­–è€…æ¥è¯´ï¼Œ"ä¸ç¡®å®š"çš„é¢„æµ‹æ¯”"ç²¾ç¡®ä½†é”™è¯¯"çš„é¢„æµ‹æ›´æœ‰ä»·å€¼ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 8: Methodology -->
            <div id="tab-methodology" class="tab-content">
                <div class="glass-card p-8 ml-only">
                    <h2 class="text-2xl font-bold mb-8">æ‰¬å·ç©ºæ°”è´¨é‡é¢„æµ‹æ–¹æ³•è®º</h2>

                    <div class="methodology-section">
                        <h3>1. æ‘˜è¦</h3>
                        <p>æœ¬é¡¹ç›®æ„å»ºäº†ä¸€ä¸ª<strong>æ–¹æ³•è®ºæ­£ç¡®</strong>ä¸”<strong>å¯è§£é‡Š</strong>çš„ç©ºæ°”è´¨é‡é¢„æµ‹ç³»ç»Ÿã€‚ä½¿ç”¨ 22 ä¸ªæœ‰æ˜ç¡®ç‰©ç†æ„ä¹‰çš„ç‰¹å¾ï¼Œä¸ºä¸åŒé¢„æµ‹æ—¶é—´è·¨åº¦ï¼ˆ1h/6h/12h/24hï¼‰è®­ç»ƒç‹¬ç«‹æ¨¡å‹ã€‚<strong>1 å°æ—¶é¢„æµ‹</strong>è¾¾åˆ° MAE=6.03ã€RÂ²=0.86ã€‚åŒæ—¶å‘ç°äº†<strong>æ‰¬å·ç‰¹æœ‰çš„è§„å¾‹</strong>ï¼šæ¹¿åº¦ä¸ AQI è´Ÿç›¸å…³ï¼ˆé«˜æ¹¿åº¦ä¼´éšé™é›¨æ¸…é™¤æ±¡æŸ“ç‰©ï¼‰ï¼Œæ—¥æ¸©å·®ä¸ AQI æ­£ç›¸å…³ï¼ˆæ™´æœ—å¤©æ°”ä¸åˆ©æ‰©æ•£ï¼‰ã€‚</p>
                    </div>

                    <div class="methodology-section">
                        <h3>2. é—®é¢˜å®šä¹‰</h3>
                        <p>ç»™å®šå†å²ç©ºæ°”è´¨é‡æ•°æ®å’Œæ°”è±¡æ•°æ®ï¼Œé¢„æµ‹æœªæ¥ 1-24 å°æ—¶çš„ AQI å€¼ã€‚è¿™æ˜¯ä¸€ä¸ªæ—¶é—´åºåˆ—å›å½’é—®é¢˜ï¼Œéœ€è¦è€ƒè™‘æ—¶é—´ä¾èµ–æ€§ã€å­£èŠ‚æ€§å‘¨æœŸã€æ°”è±¡å½±å“ç­‰å› ç´ ã€‚</p>
                    </div>

                    <div class="methodology-section">
                        <h3>3. æ•°æ®æ¥æº</h3>
                        <p><strong>ç©ºæ°”è´¨é‡æ•°æ®ï¼š</strong>quotsoft.net æä¾›çš„ä¸­å›½åŸå¸‚å†å² AQI æ•°æ®ï¼ŒWAQI æä¾›çš„å®æ—¶ AQI æ•°æ®ã€‚<br>
                        <strong>æ°”è±¡æ•°æ®ï¼š</strong>Open-Meteo æä¾›çš„å†å²å°æ—¶çº§å¤©æ°”æ•°æ®ï¼Œé«˜å¾·åœ°å›¾æä¾›çš„å®æ—¶å¤©æ°”æ•°æ®ã€‚<br>
                        <strong>è¾…åŠ©æ•°æ®ï¼š</strong>ä¸­å›½æ³•å®šèŠ‚å‡æ—¥æ•°æ®ï¼Œç”¨äºæ„å»ºå·¥ä½œæ—¥/å‡æ—¥ç‰¹å¾ã€‚</p>
                    </div>

                    <div class="methodology-section">
                        <h3>4. æ–¹æ³•è®º</h3>
                        <p><strong>æ•°æ®æ¸…æ´—ï¼š</strong>å¤„ç†ç¼ºå¤±å€¼ï¼ˆçº¿æ€§æ’å€¼ï¼‰ã€å¼‚å¸¸å€¼æ£€æµ‹ï¼ˆIQR æ–¹æ³•ï¼‰ã€æ—¶é—´å¯¹é½ï¼ˆç»Ÿä¸€åˆ°å°æ—¶çº§ï¼‰ã€‚<br>
                        <strong>ç‰¹å¾å·¥ç¨‹ï¼š</strong>æ„å»ºæ—¶é—´ç‰¹å¾ï¼ˆå‘¨æœŸç¼–ç ï¼‰ã€æ»åç‰¹å¾ï¼ˆ1-48å°æ—¶ï¼‰ã€æ»šåŠ¨ç»Ÿè®¡ç‰¹å¾ï¼ˆå‡å€¼ã€æ ‡å‡†å·®ï¼‰ã€æ°”è±¡äº¤äº’ç‰¹å¾ã€ä»£ç†å˜é‡ï¼ˆé€†æ¸©å±‚ã€ç§¸ç§†ç„šçƒ§ï¼‰ã€‚<br>
                        <strong>ç‰¹å¾ç­›é€‰ï¼š</strong>åŸºäºç›¸å…³æ€§ã€VIFã€ç‰¹å¾é‡è¦æ€§çš„å¤šé˜¶æ®µç­›é€‰ã€‚<br>
                        <strong>æ¨¡å‹é€‰æ‹©ï¼š</strong>XGBoost æ¢¯åº¦æå‡æ ‘ï¼Œä½¿ç”¨æ—¶é—´åºåˆ—äº¤å‰éªŒè¯ã€‚</p>
                    </div>

                    <div class="methodology-section">
                        <h3>5. ç»“æœ</h3>
                        <p>æ¨¡å‹åœ¨ 5 æŠ˜æ—¶é—´åºåˆ—äº¤å‰éªŒè¯ä¸­çš„è¡¨ç°ï¼š<br>
                        <strong>1h é¢„æµ‹</strong>ï¼šMAE=6.03, RÂ²=0.86ï¼ˆä¸»è¦ä¾èµ–æ—¶é—´æƒ¯æ€§ï¼‰<br>
                        <strong>6h é¢„æµ‹</strong>ï¼šMAE=14.44, RÂ²=0.41ï¼ˆæƒ¯æ€§å‡å¼±ï¼Œæ°”è±¡å› ç´ å¼€å§‹é‡è¦ï¼‰<br>
                        <strong>24h é¢„æµ‹</strong>ï¼šMAE=23.24, RÂ²=-0.35ï¼ˆé¢„æµ‹å›°éš¾ï¼Œæ¥è¿‘éšæœºï¼‰<br>
                        è¿™æ˜¯<strong>è¯šå®çš„ç»“æœ</strong>ï¼šæ²¡æœ‰ä½¿ç”¨é¢„æµ‹æ—¶åˆ»ä¸å¯çŸ¥çš„ä¿¡æ¯ï¼Œåæ˜ äº†çœŸå®çš„é¢„æµ‹éš¾åº¦ã€‚</p>
                    </div>

                    <div class="methodology-section">
                        <h3>6. è®¨è®º</h3>
                        <p><strong>å…³é”®å‘ç°ï¼š</strong><br>
                        1. <strong>æ—¶é—´æƒ¯æ€§</strong>ï¼šå½“å‰ AQI æ˜¯çŸ­æœŸé¢„æµ‹æœ€é‡è¦çš„ä¾æ®ï¼ˆè´¡çŒ® 65%ï¼‰ï¼Œä½†éšç€é¢„æµ‹æ—¶é—´å¢åŠ ï¼Œæƒ¯æ€§ç‰¹å¾çš„é‡è¦æ€§å¿«é€Ÿä¸‹é™ã€‚<br>
                        2. <strong>æ‰¬å·ç‰¹æœ‰è§„å¾‹</strong>ï¼šæ¹¿åº¦ä¸ AQI è´Ÿç›¸å…³ï¼ˆä¸åŒ—æ–¹åŸå¸‚ç›¸åï¼‰ï¼Œå› ä¸ºé«˜æ¹¿åº¦é€šå¸¸ä¼´éšé™é›¨/æµ·æ´‹æ°”å›¢ã€‚æ—¥æ¸©å·®ä¸ AQI æ­£ç›¸å…³ï¼Œå› ä¸ºæ™´æœ—å¤©æ°”=é«˜å‹æ§åˆ¶=ä¸åˆ©æ‰©æ•£ã€‚<br>
                        3. <strong>é¢„æµ‹å±€é™</strong>ï¼šåœ¨æ²¡æœ‰å¤©æ°”é¢„æŠ¥ç­‰å¤–éƒ¨ä¿¡æ¯çš„æƒ…å†µä¸‹ï¼Œ24 å°æ—¶é¢„æµ‹åŸºæœ¬ä¸å¯è¡Œï¼ˆRÂ² ä¸ºè´Ÿï¼‰ã€‚è¿™æ˜¯è¯šå®çš„ç»“è®ºã€‚<br>
                        4. <strong>å¯è§£é‡Šæ€§ä»·å€¼</strong>ï¼šæ¯ä¸ªç‰¹å¾éƒ½æœ‰æ˜ç¡®çš„ç‰©ç†æ„ä¹‰ï¼Œæ¨¡å‹çš„é¢„æµ‹ä¾æ®å¯ä»¥è¢«ç¯å¢ƒä¸“å®¶ç†è§£å’ŒéªŒè¯ã€‚</p>
                    </div>
                </div>
                <div class="glass-card p-8 dl-only">
                    <h2 class="text-2xl font-bold mb-8">LSTM+Attention æ·±åº¦å­¦ä¹ æ–¹æ³•è®º</h2>
                    <div class="methodology-section"><h3>1. æ‘˜è¦</h3><p>æœ¬æ¨¡å—æ„å»ºäº†åŸºäº LSTM+Attention çš„æ·±åº¦å­¦ä¹  AQI é¢„æµ‹æ¨¡å‹ã€‚ä½¿ç”¨ 48 å°æ—¶æ»‘åŠ¨çª—å£è¾“å…¥ 47 ç»´ç‰¹å¾ï¼ˆåŒ…å«ç©ºé—´æ»åå’Œé£å‘æ„ŸçŸ¥ï¼‰ï¼ŒåŒæ—¶é¢„æµ‹ 1h/6h/12h/24h å››ä¸ªæ—¶é—´è·¨åº¦ã€‚<strong>1 å°æ—¶é¢„æµ‹</strong> MAE=11.37ã€RÂ²=0.80ã€‚</p></div>
                    <div class="methodology-section"><h3>2. æ¨¡å‹æ¶æ„</h3><p><strong>ç¼–ç å™¨ï¼š</strong>Bidirectional LSTM (hidden=64, 1 layer) å°† 48 æ­¥åºåˆ—ç¼–ç ä¸º 128 ç»´å‘é‡åºåˆ—ã€‚<br><strong>æ³¨æ„åŠ›å±‚ï¼š</strong>4 å¤´ Multi-Head Self-Attention å­¦ä¹ æ—¶é—´æ­¥é—´çš„ä¾èµ–å…³ç³»ï¼Œé…åˆæ®‹å·®è¿æ¥å’Œ LayerNormã€‚<br><strong>è§£ç å™¨ï¼š</strong>å–æœ€åæ—¶é—´æ­¥çš„ context vectorï¼Œé€šè¿‡ FC(128â†’64â†’4) è¾“å‡º 4 ä¸ª horizon çš„ AQI é¢„æµ‹ã€‚</p></div>
                    <div class="methodology-section"><h3>3. ç‰¹å¾è®¾è®¡</h3><p><strong>æ ¸å¿ƒåˆ›æ–°ï¼š</strong>ä¸ä½¿ç”¨ä¼ ç»Ÿçš„ lag/rolling ç‰¹å¾ï¼ˆLSTM è‡ªè¡Œå­¦ä¹ ï¼‰ï¼Œè€Œæ˜¯é‡ç‚¹æ„å»º<strong>ç©ºé—´ç‰¹å¾</strong>ã€‚ä¸Šé£å‘åŸå¸‚ï¼ˆå—äº¬/é•‡æ±Ÿ/æ³°å·/å—é€šï¼‰çš„ AQI ç©ºé—´æ»åã€åŒºåŸŸç»Ÿè®¡é‡ã€ä»¥åŠåŸºäºå®æ—¶é£å‘çš„åŠ æƒ AQIï¼Œå¸®åŠ©æ¨¡å‹ç†è§£è·¨åŒºåŸŸæ±¡æŸ“ä¼ è¾“ã€‚</p></div>
                    <div class="methodology-section"><h3>4. è®­ç»ƒç­–ç•¥</h3><p><strong>æ•°æ®åˆ’åˆ†ï¼š</strong>æ—¶åº 80/10/10 åˆ†å‰²ï¼Œæ»‘åŠ¨çª—å£æ­¥é•¿=6ï¼ˆå‡å°‘æ ·æœ¬é‡å å¯¼è‡´çš„è¿‡æ‹Ÿåˆï¼‰ã€‚<br><strong>æŸå¤±å‡½æ•°ï¼š</strong>åŠ æƒ Huber Lossï¼Œæƒé‡ [1.0, 0.8, 0.6, 0.4]ï¼ˆçŸ­æœŸä¼˜å…ˆï¼‰ã€‚<br><strong>æ­£åˆ™åŒ–ï¼š</strong>Dropout(0.3) + Weight Decay(1e-3) + é«˜æ–¯å™ªå£°å¢å¼º(std=0.05) + æ¢¯åº¦è£å‰ª(norm=1.0)ã€‚<br><strong>ä¼˜åŒ–å™¨ï¼š</strong>AdamW + CosineAnnealingLRï¼ŒEarly Stopping patience=40ã€‚</p></div>
                    <div class="methodology-section"><h3>5. ä¸ XGBoost çš„å¯¹æ¯”</h3><p><strong>XGBoost ä¼˜åŠ¿ï¼š</strong>1h é¢„æµ‹æ›´ç²¾ç¡®ï¼ˆMAE=6.03 vs 11.37ï¼‰ï¼Œå› ä¸ºè¡¨æ ¼æ•°æ®+æ˜¾å¼ lag ç‰¹å¾å¯¹çŸ­æœŸé¢„æµ‹ææœ‰æ•ˆã€‚<br><strong>LSTM ä¼˜åŠ¿ï¼š</strong>è‡ªåŠ¨å­¦ä¹ å¤æ‚æ—¶åºæ¨¡å¼ï¼Œæ›´å¥½åœ°åˆ©ç”¨ç©ºé—´ä¿¡æ¯ï¼Œåœ¨ä¸­é•¿æœŸé¢„æµ‹ä¸­æ½œåŠ›æ›´å¤§ã€‚ä¸¤ç§æ¨¡å‹å„æœ‰æ‰€é•¿ï¼Œäº’ä¸ºè¡¥å……ã€‚</p></div>
                </div>
            </div>

            <!-- Tab 8: Limitations -->
            <!-- Tab: Deep Learning -->
            <div id="tab-deeplearning" class="tab-content">
                <div class="grid grid-cols-1 gap-6 dl-only">
                    <!-- æ¨¡å‹æ¶æ„ -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">LSTM+Attention æ¨¡å‹æ¶æ„</h3>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div>
                                <div style="font-family: monospace; font-size: 13px; line-height: 1.8; color: var(--text-secondary); background: rgba(0,0,0,0.3); padding: 20px; border-radius: 12px;">
                                    <div style="color: #60a5fa;">Input (batch, 48, 47)</div>
                                    <div>&nbsp;&nbsp;â†’ LSTM Encoder (hidden=64, layers=1, bidirectional)</div>
                                    <div>&nbsp;&nbsp;â†’ Output (batch, 48, 128)</div>
                                    <div style="color: #a78bfa;">&nbsp;&nbsp;â†’ Multi-Head Self-Attention (heads=4)</div>
                                    <div>&nbsp;&nbsp;â†’ Residual Connection + LayerNorm</div>
                                    <div>&nbsp;&nbsp;â†’ Context Vector (batch, 128)</div>
                                    <div style="color: #34d399;">&nbsp;&nbsp;â†’ FC: 128â†’64â†’ReLUâ†’Dropoutâ†’4</div>
                                    <div style="color: #fbbf24;">Output: [AQI_1h, AQI_6h, AQI_12h, AQI_24h]</div>
                                </div>
                            </div>
                            <div>
                                <h4 class="text-sm font-semibold mb-3" style="color: var(--accent-blue);">æ ¸å¿ƒè®¾è®¡</h4>
                                <ul style="color: var(--text-secondary); font-size: 14px; line-height: 2;">
                                    <li>â€¢ åŒå‘LSTMæ•æ‰å‰åæ–‡æ—¶åºä¾èµ–</li>
                                    <li>â€¢ Multi-Head Attentionå­¦ä¹ æ—¶é—´æ­¥é‡è¦æ€§</li>
                                    <li>â€¢ æ®‹å·®è¿æ¥é˜²æ­¢æ¢¯åº¦æ¶ˆå¤±</li>
                                    <li>â€¢ å¤šhorizonåŒæ—¶é¢„æµ‹ (1h/6h/12h/24h)</li>
                                    <li>â€¢ åŠ æƒHuber Loss: çŸ­æœŸé¢„æµ‹æƒé‡æ›´é«˜</li>
                                    <li>â€¢ 48å°æ—¶æ»‘åŠ¨çª—å£è¾“å…¥ (æ­¥é•¿=6h)</li>
                                    <li>â€¢ ç©ºé—´ç‰¹å¾: ä¸Šé£å‘åŸå¸‚AQIæ»å+é£å‘æ„ŸçŸ¥</li>
                                    <li>â€¢ é«˜æ–¯å™ªå£°å¢å¼º (std=0.05) é˜²è¿‡æ‹Ÿåˆ</li>
                                    <li>â€¢ å‚æ•°é‡: 132K, ONNXæ¨ç† &lt;1ms</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- è®­ç»ƒæ›²çº¿ -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">è®­ç»ƒæ›²çº¿</h3>
                        <div id="trainingCurvesChart" class="chart-container" style="height: 350px;"></div>
                        <p class="text-xs text-gray-500 mt-2" id="trainingInfo">ç­‰å¾…åŠ è½½è®­ç»ƒæ•°æ®...</p>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Attention çƒ­åŠ›å›¾ -->
                        <div class="glass-card p-6">
                            <h3 class="section-title">Attention æƒé‡åˆ†å¸ƒ</h3>
                            <div id="attentionHeatmap" class="chart-container" style="height: 300px;"></div>
                            <p class="text-xs text-gray-500 mt-2">æœ€åæ—¶é—´æ­¥å¯¹å†å²å„æ—¶é—´æ­¥çš„æ³¨æ„åŠ›æƒé‡</p>
                        </div>

                        <!-- æ¨¡å‹å¯¹æ¯” -->
                        <div class="glass-card p-6">
                            <h3 class="section-title">XGBoost vs LSTM+Attention</h3>
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>é¢„æµ‹èŒƒå›´</th>
                                        <th>æ¨¡å‹</th>
                                        <th>MAE</th>
                                        <th>RMSE</th>
                                        <th>RÂ²</th>
                                    </tr>
                                </thead>
                                <tbody id="dlComparisonTable2">
                                    <tr><td colspan="5" style="color: var(--text-secondary); text-align: center;">ç­‰å¾…åŠ è½½...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                </div>
            </div>

            <div id="tab-limitations" class="tab-content">
                <!-- ML å±€é™æ€§ -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 ml-only">
                    <div class="glass-card p-6">
                        <h3 class="section-title">XGBoost æ¨¡å‹å±€é™æ€§</h3>
                        <div class="limitation-card">
                            <h4>ğŸ“Š ä¾èµ–æ‰‹å·¥ç‰¹å¾å·¥ç¨‹</h4>
                            <p>æ¨¡å‹æ€§èƒ½é«˜åº¦ä¾èµ–äººå·¥è®¾è®¡çš„ 127 ä¸ªç‰¹å¾ï¼ˆlagã€æ»šåŠ¨ç»Ÿè®¡ç­‰ï¼‰ã€‚ç‰¹å¾é€‰æ‹©çš„è´¨é‡ç›´æ¥å†³å®šé¢„æµ‹ä¸Šé™ï¼Œéš¾ä»¥è‡ªåŠ¨å‘ç°å¤æ‚çš„éçº¿æ€§æ—¶åºæ¨¡å¼ã€‚</p>
                        </div>
                        <div class="limitation-card">
                            <h4>ğŸ”— æ— æ³•å»ºæ¨¡é•¿ç¨‹ä¾èµ–</h4>
                            <p>XGBoost å°†æ¯ä¸ªæ—¶é—´ç‚¹ä½œä¸ºç‹¬ç«‹æ ·æœ¬ï¼Œé€šè¿‡ lag ç‰¹å¾é—´æ¥è¡¨è¾¾æ—¶åºã€‚æ— æ³•åƒ RNN/Attention é‚£æ ·ç›´æ¥å»ºæ¨¡é•¿æ—¶é—´è·¨åº¦çš„ä¾èµ–å…³ç³»ã€‚</p>
                        </div>
                        <div class="limitation-card">
                            <h4>ğŸ“‰ é•¿æœŸé¢„æµ‹è¡°é€€ä¸¥é‡</h4>
                            <p>24h é¢„æµ‹ RÂ²=-0.35ï¼Œç”šè‡³ä¸å¦‚ç®€å•åŸºçº¿ã€‚å› ä¸º lag ç‰¹å¾åœ¨è¿œæœŸå¤±æ•ˆï¼Œæ¨¡å‹ç¼ºä¹å¯¹æœªæ¥æ°”è±¡å˜åŒ–çš„æ„ŸçŸ¥èƒ½åŠ›ã€‚</p>
                        </div>
                        <div class="limitation-card">
                            <h4>ğŸŒ ç©ºé—´ä¿¡æ¯åˆ©ç”¨æœ‰é™</h4>
                            <p>ä»…ä½¿ç”¨ä¸Šé£å‘åŸå¸‚çš„å½“å‰ AQI ä½œä¸ºç‰¹å¾ï¼Œç¼ºä¹å¯¹æ±¡æŸ“ç‰©ä¼ è¾“æ—¶é—´å’Œè·¯å¾„çš„ç²¾ç»†å»ºæ¨¡ã€‚</p>
                        </div>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">ä»£ç†å˜é‡è¯´æ˜</h3>
                        <p class="text-gray-400 text-sm mb-4">ç”±äºéƒ¨åˆ†å½±å“å› ç´ æ— æ³•ç›´æ¥è§‚æµ‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ä»£ç†å˜é‡æ¥è¿‘ä¼¼ï¼š</p>
                        <table class="data-table">
                            <thead><tr><th>ä»£ç†å˜é‡</th><th>è¿‘ä¼¼å› ç´ </th><th>è®¡ç®—æ–¹å¼</th></tr></thead>
                            <tbody>
                                <tr><td>æ—¥æ¸©å·®</td><td>é€†æ¸©å±‚</td><td>å½“å¤©æœ€é«˜æ¸©-æœ€ä½æ¸©</td></tr>
                                <tr><td>ç§‹å­£æ ‡è®°</td><td>ç§¸ç§†ç„šçƒ§</td><td>9-11æœˆä¸º1ï¼Œå…¶ä»–ä¸º0</td></tr>
                                <tr><td>æ˜¥èŠ‚æ ‡è®°</td><td>çƒŸèŠ±ç‡ƒæ”¾</td><td>æ˜¥èŠ‚å‰å15å¤©</td></tr>
                                <tr><td>ä¾›æš–å­£æ ‡è®°</td><td>ä¾›æš–æ’æ”¾</td><td>11æœˆ-3æœˆä¸º1</td></tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">å…±åŒä¸å¯æ§å› ç´ </h3>
                        <ul class="space-y-3 text-gray-400">
                            <li>â€¢ <strong>å·¥ä¸šæ’æ”¾çªå‘äº‹ä»¶</strong>ï¼šå·¥å‚æ„å¤–æ’æ”¾æ— æ³•é¢„æµ‹</li>
                            <li>â€¢ <strong>ç§¸ç§†ç„šçƒ§</strong>ï¼šç„šçƒ§æ—¶é—´å’Œåœ°ç‚¹éš¾ä»¥é¢„æµ‹</li>
                            <li>â€¢ <strong>æç«¯å¤©æ°”</strong>ï¼šæ²™å°˜æš´ã€æŒç»­é›¾éœ¾ç­‰å†å²æ•°æ®ç¨€å°‘</li>
                            <li>â€¢ <strong>æ”¿ç­–å˜åŒ–</strong>ï¼šæ–°ç¯ä¿æ”¿ç­–å®æ–½åå†å²æ¨¡å¼å¤±æ•ˆ</li>
                        </ul>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">æ”¹è¿›æ–¹å‘</h3>
                        <ul class="space-y-3 text-gray-400">
                            <li>â€¢ å¼•å…¥å«æ˜Ÿé¥æ„Ÿæ•°æ®ï¼Œç›‘æµ‹åŒºåŸŸæ€§æ±¡æŸ“åˆ†å¸ƒ</li>
                            <li>â€¢ é›†æˆå®æ—¶äº¤é€šæ•°æ®ï¼Œæé«˜å¯¹äº¤é€šæ’æ”¾çš„é¢„æµ‹</li>
                            <li>â€¢ ä½¿ç”¨æ·±åº¦å­¦ä¹ æ¨¡å‹å¤„ç†é•¿æ—¶é—´ä¾èµ–</li>
                            <li>â€¢ æ„å»º XGBoost + DL é›†æˆæ¨¡å‹</li>
                            <li>â€¢ å¼•å…¥å› æœæ¨æ–­æ–¹æ³•ï¼Œæé«˜å¯è§£é‡Šæ€§</li>
                        </ul>
                    </div>
                </div>

                <!-- DL å±€é™æ€§ -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 dl-only">
                    <div class="glass-card p-6">
                        <h3 class="section-title">LSTM+Attention æ¨¡å‹å±€é™æ€§</h3>
                        <div class="limitation-card">
                            <h4>ğŸ“‰ è®­ç»ƒæ•°æ®é‡ä¸è¶³</h4>
                            <p>ä»… 1,262 æ¡è®­ç»ƒåºåˆ—ï¼ˆstride=6 å»é‡åï¼‰ï¼Œ132K å‚æ•°çš„æ¨¡å‹ç›¸å¯¹äºæ•°æ®é‡åå¤§ã€‚æ·±åº¦å­¦ä¹ é€šå¸¸éœ€è¦æ›´å¤šæ•°æ®æ‰èƒ½å……åˆ†å‘æŒ¥ä¼˜åŠ¿ã€‚</p>
                        </div>
                        <div class="limitation-card">
                            <h4>ğŸ”¢ çŸ­æœŸé¢„æµ‹ä¸å¦‚ XGBoost</h4>
                            <p>1h MAE=11.37 vs XGBoost çš„ 6.03ã€‚æ ¸å¿ƒåŸå› ï¼šXGBoost ä½¿ç”¨æ˜¾å¼ lag ç‰¹å¾ï¼ˆAQI_lag_1hï¼‰ç›¸å½“äºç›´æ¥å‘Šè¯‰æ¨¡å‹"1å°æ—¶å‰çš„AQI"ï¼Œè€Œ LSTM éœ€è¦ä» 48h åŸå§‹åºåˆ—ä¸­è‡ªè¡Œå­¦ä¹ è¿™ä¸€æ¨¡å¼ã€‚åœ¨å°æ•°æ®é‡+è¡¨æ ¼æ•°æ®åœºæ™¯ï¼Œç²¾å¿ƒè®¾è®¡ç‰¹å¾çš„ä¼ ç»Ÿ ML é€šå¸¸ä¼˜äº DLã€‚</p>
                        </div>
                        <div class="limitation-card">
                            <h4>ğŸŒ¤ï¸ ç¼ºä¹å¤©æ°”é¢„æŠ¥æ•°æ®</h4>
                            <p>æ¨¡å‹åªèƒ½åˆ©ç”¨å†å²è§‚æµ‹æ°”è±¡æ•°æ®ï¼Œæ— æ³•è·å–æœªæ¥å¤©æ°”é¢„æŠ¥ã€‚è¿™æ˜¯ 12h/24h é¢„æµ‹æ€§èƒ½ç“¶é¢ˆçš„ä¸»è¦åŸå› â€”â€”æ¨¡å‹ä¸çŸ¥é“æœªæ¥æ˜¯å¦ä¼šä¸‹é›¨æˆ–èµ·é£ã€‚</p>
                        </div>
                        <div class="limitation-card">
                            <h4>âš¡ åºåˆ—é‡å ä¸æ³›åŒ–</h4>
                            <p>å³ä½¿ä½¿ç”¨ stride=6ï¼Œç›¸é‚»åºåˆ—ä»æœ‰ 42/48 æ­¥é‡å ã€‚æ¨¡å‹å¯èƒ½è¿‡åº¦ä¾èµ–å±€éƒ¨æ¨¡å¼ï¼Œåœ¨æ–°çš„æ°”è±¡æ¡ä»¶ä¸‹æ³›åŒ–èƒ½åŠ›å—é™ã€‚</p>
                        </div>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">DL vs ML å·®è·åˆ†æ</h3>
                        <table class="data-table">
                            <thead><tr><th>ç»´åº¦</th><th>XGBoost</th><th>LSTM+Attn</th></tr></thead>
                            <tbody>
                                <tr><td>è®­ç»ƒæ ·æœ¬</td><td>9,164 æ¡</td><td>1,262 æ¡</td></tr>
                                <tr><td>ç‰¹å¾è®¾è®¡</td><td>127 å€™é€‰ â†’ 20 ç²¾é€‰</td><td>47 ç»´åŸå§‹è¾“å…¥</td></tr>
                                <tr><td>æ—¶åºå»ºæ¨¡</td><td>æ˜¾å¼ lag/rolling</td><td>éšå¼å­¦ä¹ </td></tr>
                                <tr><td>1h MAE</td><td class="text-blue-400">6.03</td><td class="text-purple-400">11.37</td></tr>
                                <tr><td>1h RÂ²</td><td class="text-blue-400">0.86</td><td class="text-purple-400">0.80</td></tr>
                                <tr><td>ä¸ç¡®å®šæ€§</td><td>åˆ†ä½æ•°å›å½’</td><td>MC Dropout</td></tr>
                            </tbody>
                        </table>
                        <p class="text-xs text-gray-500 mt-3">DL åœ¨å°æ•°æ®é‡åœºæ™¯ä¸‹é¢„æµ‹ç²¾åº¦ä¸å¦‚ MLï¼Œä½†åœ¨æ—¶åºæ¨¡å¼å­¦ä¹ å’Œç©ºé—´ç‰¹å¾èåˆæ–¹é¢æœ‰ç‹¬ç‰¹ä¼˜åŠ¿ã€‚</p>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">å…±åŒä¸å¯æ§å› ç´ </h3>
                        <ul class="space-y-3 text-gray-400">
                            <li>â€¢ <strong>å·¥ä¸šæ’æ”¾çªå‘äº‹ä»¶</strong>ï¼šå·¥å‚æ„å¤–æ’æ”¾æ— æ³•é¢„æµ‹</li>
                            <li>â€¢ <strong>ç§¸ç§†ç„šçƒ§</strong>ï¼šç„šçƒ§æ—¶é—´å’Œåœ°ç‚¹éš¾ä»¥é¢„æµ‹</li>
                            <li>â€¢ <strong>æç«¯å¤©æ°”</strong>ï¼šæ²™å°˜æš´ã€æŒç»­é›¾éœ¾ç­‰å†å²æ•°æ®ç¨€å°‘</li>
                            <li>â€¢ <strong>æ”¿ç­–å˜åŒ–</strong>ï¼šæ–°ç¯ä¿æ”¿ç­–å®æ–½åå†å²æ¨¡å¼å¤±æ•ˆ</li>
                        </ul>
                    </div>
                    <div class="glass-card p-6">
                        <h3 class="section-title">DL æ”¹è¿›æ–¹å‘</h3>
                        <ul class="space-y-3 text-gray-400">
                            <li>â€¢ <strong>å¼•å…¥å¤©æ°”é¢„æŠ¥æ•°æ®</strong>ï¼šæ¥å…¥ GFS/ECMWF æœªæ¥ 72h å¤©æ°”é¢„æŠ¥</li>
                            <li>â€¢ <strong>å¢åŠ è®­ç»ƒæ•°æ®</strong>ï¼šæ”¶é›† 3-5 å¹´å†å²æ•°æ®ï¼Œæå‡åºåˆ—æ•°é‡è‡³ 5000+</li>
                            <li>â€¢ <strong>Transformer æ¶æ„</strong>ï¼šç”¨ Temporal Fusion Transformer æ›¿ä»£ LSTM</li>
                            <li>â€¢ <strong>é›†æˆå­¦ä¹ </strong>ï¼šXGBoost çŸ­æœŸ + LSTM ä¸­é•¿æœŸæ··åˆé¢„æµ‹</li>
                            <li>â€¢ <strong>è¿ç§»å­¦ä¹ </strong>ï¼šåˆ©ç”¨å…¶ä»–åŸå¸‚æ•°æ®é¢„è®­ç»ƒï¼Œå†å¾®è°ƒåˆ°æ‰¬å·</li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <script>
        // Tab switching
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                // Remove active class from all buttons and contents
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

                // Add active class to clicked button and corresponding content
                btn.classList.add('active');
                document.getElementById('tab-' + btn.dataset.tab).classList.add('active');

                // Initialize charts if needed
                initChartsForTab(btn.dataset.tab);
            });
        });

        // Chart initialization
        let charts = {};

        function initChartsForTab(tabId) {
            switch(tabId) {
                case 'overview':
                    initPredictionChart();
                    break;
                case 'features':
                    if (currentModel === 'xgboost') {
                        setTimeout(() => {
                            if (charts.featureImportance) { charts.featureImportance.resize(); }
                            else { initFeatureImportanceChart(); }
                            if (charts.featureCategory) { charts.featureCategory.resize(); }
                            else { initFeatureCategoryChart(); }
                        }, 50);
                    }
                    break;
                case 'model':
                    if (currentModel === 'xgboost') {
                        setTimeout(() => {
                            if (charts.cvResults) { charts.cvResults.resize(); }
                            else { initCVResultsChart(); }
                        }, 50);
                    }
                    break;
                case 'baseline':
                    if (currentModel === 'xgboost') {
                        setTimeout(() => {
                            if (charts.baseline) { charts.baseline.resize(); }
                            else { initBaselineChart(); }
                            if (charts.ablation) { charts.ablation.resize(); }
                            else { initAblationChart(); }
                        }, 50);
                    } else if (dlData.comparison) {
                        setTimeout(() => renderDLComparison(dlData.comparison), 50);
                    }
                    break;
                case 'validation':
                    if (currentModel === 'xgboost') {
                        // MLæ¨¡å¼ï¼šåˆå§‹åŒ–æˆ–resize MLå›¾è¡¨
                        setTimeout(() => {
                            if (charts.validation) {
                                charts.validation.resize();
                            } else {
                                initValidationChart();
                            }
                            if (charts.errorDist) {
                                charts.errorDist.resize();
                            } else {
                                initErrorDistChart();
                            }
                        }, 50);
                    } else {
                        setTimeout(() => renderDLValidationCharts(dlData.trainingCurves), 50);
                    }
                    break;
                case 'deeplearning':
                    if (currentModel === 'dl') {
                        setTimeout(() => {
                            if (dlData.trainingCurves) renderTrainingCurves(dlData.trainingCurves);
                            if (dlData.attentionSamples) renderAttentionHeatmap(dlData.attentionSamples);
                            if (dlData.comparison) renderDLComparison(dlData.comparison);
                        }, 50);
                    }
                    break;
                case 'explainability':
                    if (currentModel === 'dl' && dlData.attentionSamples) {
                        setTimeout(() => renderAttentionHeatmapExplain(dlData.attentionSamples), 50);
                    }
                    break;
            }
        }

        // Prediction Chart
        function initPredictionChart() {
            if (charts.prediction) return;

            const chartDom = document.getElementById('predictionChart');
            const chart = echarts.init(chartDom, 'dark');

            // ä½¿ç”¨çœŸå®æ•°æ®æˆ–æ¨¡æ‹Ÿæ•°æ®
            let hours = [];
            let predictions = [];
            let lower = [];
            let upper = [];

            if (globalData.overview && globalData.overview.predictions) {
                const preds = globalData.overview.predictions;
                hours = preds.map(p => {
                    // ç›´æ¥ä» ISO å­—ç¬¦ä¸²æå–å°æ—¶ï¼Œé¿å…æµè§ˆå™¨æ—¶åŒºè½¬æ¢
                    // æ ¼å¼: "2026-02-04T10:00:00+08:00" -> æå– "10"
                    const hour = p.datetime.split('T')[1].split(':')[0];
                    return hour + ':00';
                });
                predictions = preds.map(p => p.predicted_aqi);
                lower = preds.map(p => p.lower_bound);
                upper = preds.map(p => p.upper_bound);
            } else {
                // æ¨¡æ‹Ÿæ•°æ®
                const now = new Date();
                for (let i = 0; i < 24; i++) {
                    const time = new Date(now.getTime() + i * 3600000);
                    hours.push(time.getHours() + ':00');
                    const baseAqi = 65 + Math.sin(i / 6) * 20 + Math.random() * 10;
                    predictions.push(Math.round(baseAqi));
                    lower.push(Math.round(baseAqi - 8));
                    upper.push(Math.round(baseAqi + 8));
                }
            }

            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'axis',
                    formatter: function(params) {
                        const time = params[0].axisValue;
                        let html = `<div style="font-weight:600">${time}</div>`;
                        params.forEach(p => {
                            if (p.seriesName === 'é¢„æµ‹å€¼') {
                                html += `<div>${p.marker} ${p.seriesName}: <b>${p.value}</b></div>`;
                            }
                        });
                        // æ‰¾åˆ°ç½®ä¿¡åŒºé—´
                        const idx = params[0].dataIndex;
                        html += `<div style="color:#888">ç½®ä¿¡åŒºé—´: ${lower[idx]} ~ ${upper[idx]}</div>`;
                        return html;
                    }
                },
                legend: { data: ['é¢„æµ‹å€¼', 'ç½®ä¿¡ä¸Šç•Œ', 'ç½®ä¿¡ä¸‹ç•Œ'], textStyle: { color: '#a0a0b0' } },
                grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: hours,
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' }
                },
                yAxis: {
                    type: 'value',
                    min: function(value) { return Math.floor(value.min * 0.9); },
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' },
                    splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
                },
                series: [
                    {
                        name: 'ç½®ä¿¡ä¸Šç•Œ',
                        type: 'line',
                        data: upper,
                        lineStyle: { opacity: 0 },
                        symbol: 'none',
                        areaStyle: { color: 'rgba(59, 130, 246, 0.15)' }
                    },
                    {
                        name: 'ç½®ä¿¡ä¸‹ç•Œ',
                        type: 'line',
                        data: lower,
                        lineStyle: { opacity: 0 },
                        symbol: 'none',
                        areaStyle: { color: '#0a0a0f' }  // ç”¨èƒŒæ™¯è‰²è¦†ç›–ä¸‹æ–¹
                    },
                    {
                        name: 'é¢„æµ‹å€¼',
                        type: 'line',
                        data: predictions,
                        smooth: true,
                        lineStyle: { color: '#3b82f6', width: 3 },
                        itemStyle: { color: '#3b82f6' },
                        symbol: 'circle',
                        symbolSize: 6
                    }
                ]
            };

            chart.setOption(option);
            charts.prediction = chart;

            window.addEventListener('resize', () => chart.resize());
        }

        // Feature Importance Chart
        function initFeatureImportanceChart() {
            if (charts.featureImportance) return;

            const chartDom = document.getElementById('featureImportanceChart');
            const chart = echarts.init(chartDom, 'dark');

            // v4 æ¨¡å‹ç‰¹å¾é‡è¦æ€§ï¼ˆ1h é¢„æµ‹ï¼Œå¯è§£é‡Šæ€§ä¼˜å…ˆï¼‰
            // æ³¨æ„ï¼š"1hå‰AQI" æ˜¯æŒ‡é¢„æµ‹æ—¶åˆ»å¯çŸ¥çš„æœ€æ–°å†å²å€¼ï¼Œä¸æ˜¯ç›®æ ‡å˜é‡
            const features = [
                '1hå‰AQI', 'PM10æµ“åº¦', 'PM2.5æµ“åº¦', 'AQIå˜åŒ–è¶‹åŠ¿',
                '24hå¹³å‡AQI', 'æ—¥æ¸©å·®', 'éœ²ç‚¹æ¸©åº¦', 'ä¾›æš–å­£',
                'ç›¸å¯¹æ¹¿åº¦', 'æ°”å‹', 'æ¸©åº¦', 'é£é€Ÿ',
                'æ°”å‹å˜åŒ–', 'å‘¨æœ«', 'é«˜æ¹¿åº¦æ ‡è®°', 'æ˜¨æ—¥åŒæœŸAQI',
                'æ—©æ™šé«˜å³°', 'ä½é£é€Ÿæ ‡è®°'
            ];

            const importance = [0.646, 0.204, 0.027, 0.018,
                               0.012, 0.008, 0.007, 0.007,
                               0.006, 0.006, 0.006, 0.006,
                               0.005, 0.004, 0.004, 0.004,
                               0.003, 0.002];

            const option = {
                backgroundColor: 'transparent',
                tooltip: { trigger: 'axis', axisPointer: { type: 'shadow' } },
                grid: { left: '3%', right: '8%', top: '3%', bottom: '3%', containLabel: true },
                xAxis: {
                    type: 'value',
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' },
                    splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
                },
                yAxis: {
                    type: 'category',
                    data: features.reverse(),
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0', fontSize: 11 }
                },
                series: [{
                    type: 'bar',
                    data: importance.reverse(),
                    itemStyle: {
                        color: {
                            type: 'linear',
                            x: 0, y: 0, x2: 1, y2: 0,
                            colorStops: [
                                { offset: 0, color: '#3b82f6' },
                                { offset: 1, color: '#8b5cf6' }
                            ]
                        }
                    },
                    barWidth: 15
                }]
            };

            chart.setOption(option);
            charts.featureImportance = chart;

            window.addEventListener('resize', () => chart.resize());
        }

        // Feature Category Chart
        function initFeatureCategoryChart() {
            if (charts.featureCategory) return;

            const chartDom = document.getElementById('featureCategoryChart');
            const chart = echarts.init(chartDom, 'dark');

            const option = {
                backgroundColor: 'transparent',
                tooltip: { trigger: 'item' },
                series: [{
                    type: 'pie',
                    radius: ['40%', '70%'],
                    avoidLabelOverlap: false,
                    itemStyle: { borderRadius: 10, borderColor: '#1a1a24', borderWidth: 2 },
                    label: { show: true, color: '#a0a0b0' },
                    emphasis: { label: { fontSize: 14, fontWeight: 'bold' } },
                    data: [
                        { value: 35, name: 'æ»åç‰¹å¾', itemStyle: { color: '#3b82f6' } },
                        { value: 28, name: 'æ»šåŠ¨ç»Ÿè®¡', itemStyle: { color: '#10b981' } },
                        { value: 20, name: 'æ—¶é—´ç‰¹å¾', itemStyle: { color: '#f59e0b' } },
                        { value: 25, name: 'æ°”è±¡ç‰¹å¾', itemStyle: { color: '#8b5cf6' } },
                        { value: 15, name: 'å˜åŒ–ç‡', itemStyle: { color: '#ef4444' } },
                        { value: 8, name: 'ä»£ç†å˜é‡', itemStyle: { color: '#06b6d4' } }
                    ]
                }]
            };

            chart.setOption(option);
            charts.featureCategory = chart;

            window.addEventListener('resize', () => chart.resize());
        }

        // CV Results Chart
        function initCVResultsChart() {
            if (charts.cvResults) return;

            const chartDom = document.getElementById('cvResultsChart');
            const chart = echarts.init(chartDom, 'dark');

            const option = {
                backgroundColor: 'transparent',
                tooltip: { trigger: 'axis' },
                legend: { data: ['MAE', 'RMSE'], textStyle: { color: '#a0a0b0' } },
                grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },
                xAxis: {
                    type: 'category',
                    data: ['Fold 1', 'Fold 2', 'Fold 3', 'Fold 4', 'Fold 5'],
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' }
                },
                yAxis: {
                    type: 'value',
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' },
                    splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
                },
                series: [
                    {
                        name: 'MAE',
                        type: 'bar',
                        data: [12.8, 11.9, 13.2, 12.1, 12.5],
                        itemStyle: { color: '#3b82f6' }
                    },
                    {
                        name: 'RMSE',
                        type: 'bar',
                        data: [18.5, 17.8, 19.2, 17.9, 18.1],
                        itemStyle: { color: '#8b5cf6' }
                    }
                ]
            };

            chart.setOption(option);
            charts.cvResults = chart;

            window.addEventListener('resize', () => chart.resize());
        }

        // Baseline Comparison Chart
        function initBaselineChart() {
            if (charts.baseline) return;

            const chartDom = document.getElementById('baselineChart');
            const chart = echarts.init(chartDom, 'dark');

            const option = {
                backgroundColor: 'transparent',
                tooltip: { trigger: 'axis', axisPointer: { type: 'shadow' } },
                grid: { left: '3%', right: '4%', bottom: '15%', containLabel: true },
                xAxis: {
                    type: 'category',
                    data: ['Naive', 'Moving Avg', 'Exp Smooth', 'Linear', 'XGBoost'],
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0', rotate: 15 }
                },
                yAxis: {
                    type: 'value',
                    name: 'MAE',
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' },
                    splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
                },
                series: [{
                    type: 'bar',
                    data: [
                        { value: 22.4, itemStyle: { color: '#6b7280' } },
                        { value: 19.8, itemStyle: { color: '#6b7280' } },
                        { value: 18.2, itemStyle: { color: '#6b7280' } },
                        { value: 15.3, itemStyle: { color: '#6b7280' } },
                        { value: 12.5, itemStyle: { color: '#10b981' } }
                    ],
                    barWidth: 40
                }]
            };

            chart.setOption(option);
            charts.baseline = chart;

            window.addEventListener('resize', () => chart.resize());
        }

        // Ablation Study Chart
        function initAblationChart() {
            if (charts.ablation) return;

            const chartDom = document.getElementById('ablationChart');
            const chart = echarts.init(chartDom, 'dark');

            const option = {
                backgroundColor: 'transparent',
                tooltip: { trigger: 'axis', axisPointer: { type: 'shadow' } },
                legend: { data: ['MAE', 'MAE å¢åŠ é‡'], textStyle: { color: '#a0a0b0' } },
                grid: { left: '3%', right: '4%', bottom: '10%', containLabel: true },
                xAxis: {
                    type: 'category',
                    data: ['å®Œæ•´æ¨¡å‹', 'å»é™¤æ»åç‰¹å¾', 'å»é™¤æ°”è±¡ç‰¹å¾', 'å»é™¤æ—¶é—´ç‰¹å¾', 'å»é™¤æ»šåŠ¨ç‰¹å¾', 'å»é™¤ä»£ç†å˜é‡'],
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0', rotate: 15 }
                },
                yAxis: {
                    type: 'value',
                    name: 'MAE',
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' },
                    splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
                },
                series: [
                    {
                        name: 'MAE',
                        type: 'bar',
                        data: [12.5, 18.2, 14.8, 13.6, 15.1, 12.9],
                        itemStyle: { color: '#3b82f6' },
                        barWidth: 30
                    },
                    {
                        name: 'MAE å¢åŠ é‡',
                        type: 'bar',
                        data: [0, 5.7, 2.3, 1.1, 2.6, 0.4],
                        itemStyle: { color: '#ef4444' },
                        barWidth: 30
                    }
                ]
            };

            chart.setOption(option);
            charts.ablation = chart;

            window.addEventListener('resize', () => chart.resize());
        }

        // Validation Chart
        function initValidationChart() {
            if (charts.validation) return;

            const chartDom = document.getElementById('validationChart');
            const chart = echarts.init(chartDom, 'dark');

            // Use real data if available
            let hours = [];
            let actual = [];
            let predicted = [];

            if (globalData.validation) {
                hours = globalData.validation.datetime.slice(-72).map((d, i) => i + 'h');
                actual = globalData.validation.actual.slice(-72);
                predicted = globalData.validation.predicted.slice(-72).map(v => Math.round(v));
            } else {
                // Fallback to mock data
                for (let i = 0; i < 72; i++) {
                    hours.push(i + 'h');
                    const base = 50 + Math.sin(i / 12 * Math.PI) * 30 + Math.random() * 20;
                    actual.push(Math.round(base));
                    predicted.push(Math.round(base + (Math.random() - 0.5) * 20));
                }
            }

            const option = {
                backgroundColor: 'transparent',
                tooltip: { trigger: 'axis' },
                legend: { data: ['å®é™…å€¼', 'é¢„æµ‹å€¼'], textStyle: { color: '#a0a0b0' } },
                grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },
                xAxis: {
                    type: 'category',
                    data: hours,
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0', interval: 11 }
                },
                yAxis: {
                    type: 'value',
                    name: 'AQI',
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' },
                    splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
                },
                series: [
                    {
                        name: 'å®é™…å€¼',
                        type: 'line',
                        data: actual,
                        lineStyle: { color: '#10b981', width: 2 },
                        itemStyle: { color: '#10b981' },
                        symbol: 'none'
                    },
                    {
                        name: 'é¢„æµ‹å€¼',
                        type: 'line',
                        data: predicted,
                        lineStyle: { color: '#3b82f6', width: 2, type: 'dashed' },
                        itemStyle: { color: '#3b82f6' },
                        symbol: 'none'
                    }
                ]
            };

            chart.setOption(option);
            charts.validation = chart;

            window.addEventListener('resize', () => chart.resize());
        }

        // Error Distribution Chart
        function initErrorDistChart() {
            if (charts.errorDist) return;

            const chartDom = document.getElementById('errorDistChart');
            const chart = echarts.init(chartDom, 'dark');

            // Generate mock error distribution
            const bins = ['-30~-25', '-25~-20', '-20~-15', '-15~-10', '-10~-5', '-5~0', '0~5', '5~10', '10~15', '15~20', '20~25', '25~30'];
            const counts = [15, 45, 120, 280, 450, 620, 680, 420, 240, 95, 35, 10];

            const option = {
                backgroundColor: 'transparent',
                tooltip: { trigger: 'axis' },
                grid: { left: '3%', right: '4%', bottom: '10%', containLabel: true },
                xAxis: {
                    type: 'category',
                    data: bins,
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0', rotate: 30, fontSize: 10 }
                },
                yAxis: {
                    type: 'value',
                    name: 'é¢‘æ¬¡',
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' },
                    splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
                },
                series: [{
                    type: 'bar',
                    data: counts,
                    itemStyle: {
                        color: function(params) {
                            const idx = params.dataIndex;
                            if (idx >= 4 && idx <= 7) return '#10b981';
                            if (idx >= 2 && idx <= 9) return '#f59e0b';
                            return '#ef4444';
                        }
                    }
                }]
            };

            chart.setOption(option);
            charts.errorDist = chart;

            window.addEventListener('resize', () => chart.resize());
        }

        // Global data storage
        let globalData = {
            overview: null,
            validation: null,
            modelEval: null,
            features: null
        };

        // Load all data
        async function loadAllData() {
            try {
                // Load overview data
                const overviewRes = await fetch('data/overview.json');
                if (overviewRes.ok) {
                    globalData.overview = await overviewRes.json();
                    updateOverview(globalData.overview);
                }

                // Load validation data
                const validationRes = await fetch('data/validation.json');
                if (validationRes.ok) {
                    globalData.validation = await validationRes.json();
                }

            } catch (e) {
                console.log('Using mock data:', e);
                updateOverviewMock();
            }
        }

        function updateOverview(data) {
            if (data.realtime) {
                const aqi = data.realtime.aqi || '--';
                document.getElementById('currentAqi').textContent = aqi;

                // Set AQI level
                let level = 'åŠ è½½ä¸­...';
                if (aqi <= 50) level = 'ä¼˜';
                else if (aqi <= 100) level = 'è‰¯';
                else if (aqi <= 150) level = 'è½»åº¦æ±¡æŸ“';
                else if (aqi <= 200) level = 'ä¸­åº¦æ±¡æŸ“';
                else if (aqi <= 300) level = 'é‡åº¦æ±¡æŸ“';
                else level = 'ä¸¥é‡æ±¡æŸ“';
                document.getElementById('aqiLevel').textContent = level;

                document.getElementById('pm25Value').textContent = data.realtime.pm25 || '--';
                document.getElementById('pm10Value').textContent = data.realtime.pm10 || '--';
                document.getElementById('tempValue').textContent = data.realtime.temperature || '--';
                document.getElementById('humidityValue').textContent = data.realtime.humidity || '--';
                document.getElementById('dominantPollutant').textContent = 'ä¸»è¦æ±¡æŸ“ç‰©: ' + (data.realtime.dominant_pollutant || '--').toUpperCase();

                // æ˜¾ç¤ºæ•°æ®æ—¶é—´
                if (data.realtime.time) {
                    const dataTime = data.realtime.time.split('T')[0] + ' ' + data.realtime.time.split('T')[1].split('+')[0].substring(0, 5);
                    document.getElementById('aqiDataTime').textContent = 'æ•°æ®æ—¶é—´: ' + dataTime;
                }
            }

            if (data.update_time_display) {
                // ç›´æ¥ä½¿ç”¨æœåŠ¡å™¨ç«¯çš„ä¸­å›½æ—¶é—´æ˜¾ç¤º
                document.getElementById('updateTime').textContent = 'æ›´æ–°æ—¶é—´: ' + data.update_time_display;
            } else if (data.update_time) {
                // å…¼å®¹æ—§æ ¼å¼
                document.getElementById('updateTime').textContent = 'æ›´æ–°æ—¶é—´: ' + new Date(data.update_time).toLocaleString('zh-CN');
            }

            // Update prediction chart with real data
            if (data.predictions && charts.prediction) {
                updatePredictionChartWithData(data.predictions, data.historical);
            }

            // Update recommendations based on current AQI
            const aqi = data.realtime ? data.realtime.aqi : 50;
            updateRecommendations(aqi, data.predictions || []);
        }

        function updatePredictionChartWithData(predictions, historical) {
            if (!charts.prediction) return;

            const hours = predictions.map(p => {
                const hour = p.datetime.split('T')[1].split(':')[0];
                return hour + ':00';
            });
            const values = predictions.map(p => p.predicted_aqi);
            const hasCI = predictions[0] && predictions[0].lower_bound != null;
            const lower = hasCI ? predictions.map(p => p.lower_bound) : values.map(() => undefined);
            const upper = hasCI ? predictions.map(p => p.upper_bound) : values.map(() => undefined);

            const isDL = currentModel === 'dl';
            const lineColor = isDL ? '#a78bfa' : '#3b82f6';
            const bandColor = isDL ? 'rgba(139, 92, 246, 0.15)' : 'rgba(59, 130, 246, 0.15)';
            const ciLabel = isDL ? '95% CI (MC Dropout)' : '95% ç½®ä¿¡åŒºé—´';

            charts.prediction.setOption({
                xAxis: { data: hours },
                legend: { data: hasCI ? ['é¢„æµ‹å€¼', ciLabel] : ['é¢„æµ‹å€¼'], textStyle: { color: '#a0a0b0' } },
                series: [
                    { name: ciLabel, data: upper, lineStyle: { opacity: 0 }, areaStyle: hasCI ? { color: bandColor } : { opacity: 0 } },
                    { name: 'ç½®ä¿¡ä¸‹ç•Œ', data: lower, lineStyle: { opacity: 0 }, areaStyle: hasCI ? { color: '#0a0a0f' } : { opacity: 0 } },
                    { name: 'é¢„æµ‹å€¼', data: values, lineStyle: { color: lineColor, width: 3 }, itemStyle: { color: lineColor } }
                ]
            });
        }

        function updateOverviewMock() {
            document.getElementById('currentAqi').textContent = '72';
            document.getElementById('aqiLevel').textContent = 'è‰¯';
            document.getElementById('pm25Value').textContent = '48';
            document.getElementById('pm10Value').textContent = '65';
            document.getElementById('tempValue').textContent = '8';
            document.getElementById('humidityValue').textContent = '72';
            document.getElementById('dominantPollutant').textContent = 'ä¸»è¦æ±¡æŸ“ç‰©: PM2.5';
            document.getElementById('updateTime').textContent = 'æ›´æ–°æ—¶é—´: ' + new Date().toLocaleString('zh-CN');
            updateRecommendations(72, []);
        }

        // æ ¹æ® AQI ç”Ÿæˆè¡ŒåŠ¨å»ºè®®
        function updateRecommendations(currentAqi, predictions) {
            const recommendations = getRecommendations(currentAqi);

            document.getElementById('rec-outdoor').textContent = recommendations.outdoor;
            document.getElementById('rec-outdoor').className = 'text-xs mt-1 ' + recommendations.outdoorColor;

            document.getElementById('rec-window').textContent = recommendations.window;
            document.getElementById('rec-window').className = 'text-xs mt-1 ' + recommendations.windowColor;

            document.getElementById('rec-mask').textContent = recommendations.mask;
            document.getElementById('rec-mask').className = 'text-xs mt-1 ' + recommendations.maskColor;

            document.getElementById('rec-purifier').textContent = recommendations.purifier;
            document.getElementById('rec-purifier').className = 'text-xs mt-1 ' + recommendations.purifierColor;

            // åˆ†æè¶‹åŠ¿
            if (predictions && predictions.length > 0) {
                const trend = analyzeTrend(currentAqi, predictions);
                document.getElementById('trend-text').textContent = trend;
            } else {
                document.getElementById('trend-text').textContent = 'ç­‰å¾…é¢„æµ‹æ•°æ®...';
            }
        }

        function getRecommendations(aqi) {
            if (aqi <= 50) {
                return {
                    outdoor: 'æ¨èæˆ·å¤–æ´»åŠ¨', outdoorColor: 'text-green-400',
                    window: 'å»ºè®®å¼€çª—', windowColor: 'text-green-400',
                    mask: 'æ— éœ€ä½©æˆ´', maskColor: 'text-gray-400',
                    purifier: 'æ— éœ€å¼€å¯', purifierColor: 'text-gray-400'
                };
            } else if (aqi <= 100) {
                return {
                    outdoor: 'å¯ä»¥è¿›è¡Œ', outdoorColor: 'text-yellow-400',
                    window: 'å¯ä»¥å¼€çª—', windowColor: 'text-yellow-400',
                    mask: 'æ•æ„Ÿäººç¾¤ä½©æˆ´', maskColor: 'text-yellow-400',
                    purifier: 'å¯é€‰å¼€å¯', purifierColor: 'text-gray-400'
                };
            } else if (aqi <= 150) {
                return {
                    outdoor: 'å‡å°‘æ—¶é•¿', outdoorColor: 'text-orange-400',
                    window: 'å‡å°‘å¼€çª—', windowColor: 'text-orange-400',
                    mask: 'å»ºè®®ä½©æˆ´', maskColor: 'text-orange-400',
                    purifier: 'å»ºè®®å¼€å¯', purifierColor: 'text-orange-400'
                };
            } else if (aqi <= 200) {
                return {
                    outdoor: 'é¿å…å¤–å‡º', outdoorColor: 'text-red-400',
                    window: 'ä¸å»ºè®®', windowColor: 'text-red-400',
                    mask: 'å¿…é¡»ä½©æˆ´', maskColor: 'text-red-400',
                    purifier: 'å¿…é¡»å¼€å¯', purifierColor: 'text-red-400'
                };
            } else {
                return {
                    outdoor: 'ç¦æ­¢å¤–å‡º', outdoorColor: 'text-red-500',
                    window: 'ç¦æ­¢å¼€çª—', windowColor: 'text-red-500',
                    mask: 'N95å£ç½©', maskColor: 'text-red-500',
                    purifier: 'æŒç»­è¿è¡Œ', purifierColor: 'text-red-500'
                };
            }
        }

        function analyzeTrend(currentAqi, predictions) {
            if (!predictions || predictions.length < 6) {
                return 'æ•°æ®ä¸è¶³ï¼Œæ— æ³•åˆ†æè¶‹åŠ¿';
            }

            // è®¡ç®—æœªæ¥6å°æ—¶å’Œ12å°æ—¶çš„å¹³å‡å€¼
            const next6h = predictions.slice(0, 6).reduce((sum, p) => sum + p.predicted_aqi, 0) / 6;
            const next12h = predictions.slice(0, 12).reduce((sum, p) => sum + p.predicted_aqi, 0) / 12;

            // æ‰¾å‡ºæœ€é«˜å’Œæœ€ä½ç‚¹
            const maxPred = predictions.reduce((max, p) => p.predicted_aqi > max.predicted_aqi ? p : max);
            const minPred = predictions.reduce((min, p) => p.predicted_aqi < min.predicted_aqi ? p : min);

            const maxHour = maxPred.datetime.split('T')[1].split(':')[0];
            const minHour = minPred.datetime.split('T')[1].split(':')[0];

            let trendText = '';

            if (next6h > currentAqi + 10) {
                trendText = `â¬†ï¸ æœªæ¥6å°æ—¶AQIé¢„è®¡ä¸Šå‡ï¼Œå»ºè®®æå‰å®Œæˆæˆ·å¤–æ´»åŠ¨ã€‚`;
            } else if (next6h < currentAqi - 10) {
                trendText = `â¬‡ï¸ æœªæ¥6å°æ—¶AQIé¢„è®¡ä¸‹é™ï¼Œå¯ç­‰å¾…ç©ºæ°”è´¨é‡æ”¹å–„åå†è¿›è¡Œæˆ·å¤–æ´»åŠ¨ã€‚`;
            } else {
                trendText = `â¡ï¸ æœªæ¥6å°æ—¶AQIç›¸å¯¹ç¨³å®šã€‚`;
            }

            trendText += ` é¢„è®¡ ${minHour}:00 ç©ºæ°”æœ€ä½³(AQIâ‰ˆ${Math.round(minPred.predicted_aqi)})ï¼Œ${maxHour}:00 ç©ºæ°”æœ€å·®(AQIâ‰ˆ${Math.round(maxPred.predicted_aqi)})ã€‚`;

            return trendText;
        }

        // Update validation chart with real data
        function updateValidationChart() {
            if (!globalData.validation || !charts.validation) return;

            const data = globalData.validation;
            const hours = data.datetime.map((d, i) => i + 'h');

            charts.validation.setOption({
                xAxis: { data: hours },
                series: [
                    { data: data.actual },
                    { data: data.predicted }
                ]
            });
        }

        // ==================== æ·±åº¦å­¦ä¹ ç›¸å…³ ====================

        let currentModel = 'xgboost';
        let dlData = {
            overview: null,
            comparison: null,
            trainingCurves: null,
            attentionSamples: null
        };

        // æ¨¡å‹åˆ‡æ¢
        function switchModel(model) {
            currentModel = model;
            const btnXgb = document.getElementById('btn-xgboost');
            const btnDl = document.getElementById('btn-dl');
            const badge = document.getElementById('modelBadge');

            if (model === 'xgboost') {
                document.body.classList.remove('dl-mode');
                btnXgb.className = 'px-3 py-1 bg-blue-600 text-white transition-all';
                btnDl.className = 'px-3 py-1 bg-transparent text-gray-400 transition-all hover:bg-gray-700';
                if (badge) { badge.textContent = 'æœºå™¨å­¦ä¹  Â· XGBoost'; badge.style.background = 'rgba(59,130,246,0.2)'; badge.style.color = '#60a5fa'; }
                if (globalData.overview) updateOverview(globalData.overview);
                // åˆ‡å›MLæ—¶ï¼Œresizeæ‰€æœ‰å·²å­˜åœ¨çš„MLå›¾è¡¨ï¼ˆå› ä¸ºml-onlyå®¹å™¨é‡æ–°å¯è§ï¼‰
                setTimeout(() => {
                    Object.values(charts).forEach(c => { if (c && c.resize) c.resize(); });
                    // è§¦å‘å½“å‰å¯è§ tab çš„å›¾è¡¨åˆå§‹åŒ–
                    const activeTab = document.querySelector('.tab-content.active');
                    if (activeTab) initChartsForTab(activeTab.id.replace('tab-', ''));
                }, 150);
            } else {
                document.body.classList.add('dl-mode');
                btnDl.className = 'px-3 py-1 bg-purple-600 text-white transition-all';
                btnXgb.className = 'px-3 py-1 bg-transparent text-gray-400 transition-all hover:bg-gray-700';
                if (badge) { badge.textContent = 'æ·±åº¦å­¦ä¹  Â· LSTM+Attention'; badge.style.background = 'rgba(139,92,246,0.2)'; badge.style.color = '#a78bfa'; }
                if (dlData.overview) {
                    updateOverview(dlData.overview);
                } else {
                    loadDLOverview();
                }
                // è§¦å‘å½“å‰å¯è§ tab çš„ DL å›¾è¡¨æ¸²æŸ“
                setTimeout(() => {
                    const activeTab = document.querySelector('.tab-content.active');
                    if (!activeTab) return;
                    const tabId = activeTab.id.replace('tab-', '');
                    if (tabId === 'deeplearning') {
                        if (dlData.trainingCurves) renderTrainingCurves(dlData.trainingCurves);
                        if (dlData.attentionSamples) renderAttentionHeatmap(dlData.attentionSamples);
                        if (dlData.comparison) renderDLComparison(dlData.comparison);
                    }
                    if (tabId === 'explainability' && dlData.attentionSamples) {
                        renderAttentionHeatmapExplain(dlData.attentionSamples);
                    }
                    if (tabId === 'validation') {
                        renderDLValidationCharts(dlData.trainingCurves);
                    }
                    if (tabId === 'baseline' && dlData.comparison) {
                        renderDLComparison(dlData.comparison);
                    }
                }, 150);
            }
        }

        async function loadDLOverview() {
            try {
                const res = await fetch('data/dl_overview.json');
                if (res.ok) {
                    dlData.overview = await res.json();
                    if (currentModel === 'dl') updateOverview(dlData.overview);
                }
            } catch (e) {
                console.log('DL overview not available:', e);
            }
        }

        async function loadDLData() {
            // åªåŠ è½½æ•°æ®ï¼Œä¸ç«‹å³æ¸²æŸ“å›¾è¡¨ï¼ˆå› ä¸ºå®¹å™¨å¯èƒ½ display:noneï¼‰
            // å›¾è¡¨æ¸²æŸ“ç”± switchModel() æˆ– tab åˆ‡æ¢è§¦å‘

            // è®­ç»ƒæ›²çº¿
            try {
                const res = await fetch('data/training_curves.json');
                if (res.ok) { dlData.trainingCurves = await res.json(); }
            } catch (e) { console.log('Training curves not available'); }

            // Attention æ ·æœ¬
            try {
                const res = await fetch('data/attention_samples.json');
                if (res.ok) { dlData.attentionSamples = await res.json(); }
            } catch (e) { console.log('Attention data not available'); }

            // æ¨¡å‹å¯¹æ¯”
            try {
                const res = await fetch('data/model_comparison.json');
                if (res.ok) {
                    dlData.comparison = await res.json();
                }
            } catch (e) { console.log('Comparison data not available'); }
        }

        // DL å›¾è¡¨å®ä¾‹ï¼ˆç”¨äº resizeï¼‰
        let dlCharts = {};

        function resizeDLCharts() {
            setTimeout(() => {
                Object.values(dlCharts).forEach(c => { if (c && c.resize) c.resize(); });
            }, 100);
        }

        // å…¨å±€ DL å›¾è¡¨ resize ç›‘å¬ï¼ˆåªæ³¨å†Œä¸€æ¬¡ï¼Œé¿å…ç´¯ç§¯ï¼‰
        window.addEventListener('resize', () => {
            Object.values(dlCharts).forEach(c => { if (c && c.resize) c.resize(); });
        });

        function renderAttentionHeatmapExplain(data) {
            const container = document.getElementById('attentionHeatmapExplain');
            if (!container || !data || !data.samples || data.samples.length === 0) return;
            if (dlCharts.attnExplain) { dlCharts.attnExplain.dispose(); }
            const chart = echarts.init(container);
            dlCharts.attnExplain = chart;
            const sample = data.samples[0];
            const attn = sample.attention_last_step || [];
            const labels = data.time_labels || attn.map((_, i) => 't-' + (attn.length - i));
            chart.setOption({
                backgroundColor: 'transparent',
                tooltip: { formatter: p => labels[p.dataIndex] + ': ' + (p.value * 100).toFixed(1) + '%' },
                grid: { top: 10, right: 20, bottom: 30, left: 50 },
                xAxis: { type: 'category', data: labels, axisLabel: { color: '#666', fontSize: 10, interval: 5 }, axisLine: { lineStyle: { color: '#333' } } },
                yAxis: { type: 'value', name: 'Attention', axisLabel: { color: '#666' }, splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } } },
                series: [{ type: 'bar', data: attn, itemStyle: { color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{ offset: 0, color: '#8b5cf6' }, { offset: 1, color: '#3b82f6' }]) } }]
            });
        }

        function renderDLValidationCharts(trainingData) {
            // è®­ç»ƒæ›²çº¿ï¼ˆéªŒè¯é¡µé¢å‰¯æœ¬ï¼‰
            const tc = document.getElementById('dlValidationTrainingChart');
            if (tc && trainingData && trainingData.epochs) {
                if (dlCharts.valTraining) dlCharts.valTraining.dispose();
                const chart = echarts.init(tc);
                dlCharts.valTraining = chart;
                chart.setOption({
                    backgroundColor: 'transparent',
                    tooltip: { trigger: 'axis' },
                    legend: { data: ['è®­ç»ƒLoss', 'éªŒè¯Loss'], textStyle: { color: '#a0a0b0', fontSize: 11 }, top: 0 },
                    grid: { top: 35, right: 15, bottom: 25, left: 45 },
                    xAxis: { type: 'category', data: trainingData.epochs, name: 'Epoch', axisLabel: { color: '#666' }, axisLine: { lineStyle: { color: '#333' } } },
                    yAxis: { type: 'value', name: 'Loss', axisLabel: { color: '#666' }, splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } } },
                    series: [
                        { name: 'è®­ç»ƒLoss', type: 'line', data: trainingData.train_loss, smooth: true, lineStyle: { color: '#3b82f6', width: 2 }, showSymbol: false },
                        { name: 'éªŒè¯Loss', type: 'line', data: trainingData.val_loss, smooth: true, lineStyle: { color: '#ef4444', width: 2 }, showSymbol: false,
                          markPoint: trainingData.best_epoch ? { data: [{ coord: [trainingData.best_epoch - 1, trainingData.best_val_loss], symbol: 'pin', symbolSize: 35 }], itemStyle: { color: '#10b981' } } : undefined }
                    ]
                });
            }

            // RÂ² å¯¹æ¯”æŸ±çŠ¶å›¾
            const rc = document.getElementById('dlValidationR2Chart');
            if (rc) {
                if (dlCharts.valR2) dlCharts.valR2.dispose();
                const chart = echarts.init(rc);
                dlCharts.valR2 = chart;
                chart.setOption({
                    backgroundColor: 'transparent',
                    tooltip: { trigger: 'axis' },
                    legend: { data: ['XGBoost', 'LSTM+Attn'], textStyle: { color: '#a0a0b0', fontSize: 11 }, top: 0 },
                    grid: { top: 35, right: 15, bottom: 25, left: 45 },
                    xAxis: { type: 'category', data: ['1h', '6h', '12h', '24h'], axisLabel: { color: '#aaa' }, axisLine: { lineStyle: { color: '#333' } } },
                    yAxis: { type: 'value', name: 'RÂ²', axisLabel: { color: '#666' }, splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } } },
                    series: [
                        { name: 'XGBoost', type: 'bar', data: [0.86, 0.71, 0.30, -0.35], itemStyle: { color: '#3b82f6' }, barWidth: '30%' },
                        { name: 'LSTM+Attn', type: 'bar', data: [0.80, 0.66, 0.47, 0.17], itemStyle: { color: '#a78bfa' }, barWidth: '30%' }
                    ]
                });
            }
        }

        function renderTrainingCurves(data) {
            const container = document.getElementById('trainingCurvesChart');
            if (!container || !data || !data.epochs) return;

            if (dlCharts.training) { dlCharts.training.dispose(); }
            const chart = echarts.init(container);
            dlCharts.training = chart;
            chart.setOption({
                backgroundColor: 'transparent',
                tooltip: { trigger: 'axis' },
                legend: {
                    data: ['è®­ç»ƒLoss', 'éªŒè¯Loss'],
                    textStyle: { color: '#a0a0b0' },
                    top: 0
                },
                grid: { top: 40, right: 20, bottom: 30, left: 50 },
                xAxis: {
                    type: 'category',
                    data: data.epochs,
                    name: 'Epoch',
                    axisLabel: { color: '#666' },
                    axisLine: { lineStyle: { color: '#333' } }
                },
                yAxis: {
                    type: 'value',
                    name: 'Loss',
                    axisLabel: { color: '#666' },
                    splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
                },
                series: [
                    {
                        name: 'è®­ç»ƒLoss',
                        type: 'line',
                        data: data.train_loss,
                        smooth: true,
                        lineStyle: { color: '#3b82f6', width: 2 },
                        itemStyle: { color: '#3b82f6' },
                        showSymbol: false
                    },
                    {
                        name: 'éªŒè¯Loss',
                        type: 'line',
                        data: data.val_loss,
                        smooth: true,
                        lineStyle: { color: '#ef4444', width: 2 },
                        itemStyle: { color: '#ef4444' },
                        showSymbol: false,
                        markPoint: data.best_epoch ? {
                            data: [{ coord: [data.best_epoch - 1, data.best_val_loss], name: 'Best', symbol: 'pin', symbolSize: 40 }],
                            itemStyle: { color: '#10b981' }
                        } : undefined
                    }
                ]
            });

            const info = document.getElementById('trainingInfo');
            if (info && data.best_epoch) {
                info.textContent = `æœ€ä½³æ¨¡å‹: Epoch ${data.best_epoch}, éªŒè¯Loss: ${data.best_val_loss?.toFixed(4) || '--'}`;
            }
        }

        function renderAttentionHeatmap(data) {
            const container = document.getElementById('attentionHeatmap');
            if (!container || !data || !data.samples || data.samples.length === 0) return;

            if (dlCharts.attention) { dlCharts.attention.dispose(); }
            const chart = echarts.init(container);
            dlCharts.attention = chart;
            const sample = data.samples[0];
            const attn = sample.attention_last_step || [];
            const labels = data.time_labels || attn.map((_, i) => `t-${attn.length - i}`);

            chart.setOption({
                backgroundColor: 'transparent',
                tooltip: {
                    formatter: p => `${labels[p.dataIndex]}: ${(p.value * 100).toFixed(1)}%`
                },
                grid: { top: 10, right: 20, bottom: 30, left: 50 },
                xAxis: {
                    type: 'category',
                    data: labels,
                    axisLabel: { color: '#666', fontSize: 10, interval: 5 },
                    axisLine: { lineStyle: { color: '#333' } }
                },
                yAxis: {
                    type: 'value',
                    name: 'Attention',
                    axisLabel: { color: '#666' },
                    splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
                },
                series: [{
                    type: 'bar',
                    data: attn,
                    itemStyle: {
                        color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                            { offset: 0, color: '#8b5cf6' },
                            { offset: 1, color: '#3b82f6' }
                        ])
                    }
                }]
            });
        }

        function renderDLComparison(data) {
            if (!data || !data.horizons) return;
            // å¡«å……ä¸¤ä¸ªå¯¹æ¯”è¡¨ï¼ˆbaselineå’Œdeeplearning tabå„ä¸€ä¸ªï¼‰
            ['dlComparisonTable1', 'dlComparisonTable2'].forEach(id => {
                const tbody = document.getElementById(id);
                if (!tbody) return;
                _fillComparisonTable(tbody, data);
            });
        }
        function _fillComparisonTable(tbody, data) {

            let html = '';
            for (const [horizon, info] of Object.entries(data.horizons)) {
                const dl = info.LSTM_Attention || {};
                const xgb = info.XGBoost || {};
                const imp = info.improvement || {};
                const winner = imp.winner || '';
                const xgbWin = winner === 'XGBoost';
                const dlWin = winner === 'LSTM+Attention';
                html += `<tr>
                    <td rowspan="2" style="font-weight:600;">${horizon}</td>
                    <td style="color: #60a5fa;">${xgbWin ? 'ğŸ† ' : ''}XGBoost</td>
                    <td${xgbWin && xgb.MAE < dl.MAE ? ' style="color:#10b981;font-weight:600;"' : ''}>${xgb.MAE != null ? xgb.MAE : '--'}</td>
                    <td>${xgb.RMSE != null ? xgb.RMSE : '--'}</td>
                    <td${xgbWin ? ' style="color:#10b981;font-weight:600;"' : ''}>${xgb.R2 != null ? xgb.R2 : '--'}</td>
                </tr>
                <tr>
                    <td style="color: #a78bfa;">${dlWin ? 'ğŸ† ' : ''}LSTM+Attn</td>
                    <td${dlWin && dl.MAE < xgb.MAE ? ' style="color:#10b981;font-weight:600;"' : ''}>${dl.MAE != null ? dl.MAE : '--'}</td>
                    <td>${dl.RMSE != null ? dl.RMSE : '--'}</td>
                    <td${dlWin ? ' style="color:#10b981;font-weight:600;"' : ''}>${dl.R2 != null ? dl.R2 : '--'}</td>
                </tr>`;
            }
            tbody.innerHTML = html || '<tr><td colspan="5" style="color: var(--text-secondary); text-align: center;">è®­ç»ƒåå¯æŸ¥çœ‹</td></tr>';
        }

        // updateBaselineDLRow å·²ç§»é™¤ â€” å¯¹æ¯”æ•°æ®é€šè¿‡ renderDLComparison å¡«å……åˆ° dlComparisonTable1/2

        // Initialize
        document.addEventListener('DOMContentLoaded', async () => {
            await loadAllData();
            initPredictionChart();

            // å¦‚æœæœ‰æ•°æ®ï¼Œæ›´æ–°å›¾è¡¨
            if (globalData.overview && globalData.overview.predictions) {
                updatePredictionChartWithData(globalData.overview.predictions);
            }

            // åŠ è½½æ·±åº¦å­¦ä¹ æ•°æ®
            loadDLData();
            loadDLOverview();
        });
    </script>
</body>
</html>
