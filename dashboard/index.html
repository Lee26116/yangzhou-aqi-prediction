<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰¬å·ç©ºæ°”è´¨é‡é¢„æµ‹ç³»ç»Ÿ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }

        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-tertiary: #1a1a24;
            --text-primary: #ffffff;
            --text-secondary: #a0a0b0;
            --accent-blue: #3b82f6;
            --accent-green: #10b981;
            --accent-yellow: #f59e0b;
            --accent-red: #ef4444;
            --accent-purple: #8b5cf6;
        }

        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        .glass-card {
            background: rgba(26, 26, 36, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
        }

        .tab-btn {
            padding: 10px 20px;
            border-radius: 10px;
            transition: all 0.3s ease;
            color: var(--text-secondary);
            font-size: 14px;
            white-space: nowrap;
        }

        .tab-btn:hover {
            background: rgba(59, 130, 246, 0.1);
            color: var(--text-primary);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
            font-weight: 500;
        }

        .aqi-display {
            font-size: 120px;
            font-weight: 700;
            line-height: 1;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .metric-card {
            background: rgba(26, 26, 36, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
        }

        .metric-value {
            font-size: 28px;
            font-weight: 600;
        }

        .metric-label {
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table th, .data-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .data-table th {
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 13px;
            text-transform: uppercase;
        }

        .data-table tr:hover td {
            background: rgba(59, 130, 246, 0.05);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
        }

        .status-good { background: var(--accent-green); }
        .status-moderate { background: var(--accent-yellow); }
        .status-unhealthy { background: var(--accent-red); }

        .pipeline-step {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            border-radius: 12px;
            background: rgba(26, 26, 36, 0.4);
            margin-bottom: 12px;
        }

        .pipeline-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-primary);
        }

        .chart-container {
            width: 100%;
            height: 300px;
        }

        .feature-tag {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            margin: 4px;
            background: rgba(59, 130, 246, 0.1);
            color: #60a5fa;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .methodology-section {
            margin-bottom: 32px;
        }

        .methodology-section h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--accent-blue);
        }

        .methodology-section p {
            color: var(--text-secondary);
            line-height: 1.8;
            font-size: 14px;
        }

        .limitation-card {
            padding: 16px;
            border-radius: 12px;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
            margin-bottom: 12px;
        }

        .limitation-card h4 {
            font-weight: 600;
            margin-bottom: 8px;
            color: #f87171;
        }

        .limitation-card p {
            color: var(--text-secondary);
            font-size: 14px;
        }

        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.2); }

        /* éšè—æ»šåŠ¨æ¡ä½†ä¿æŒæ»šåŠ¨åŠŸèƒ½ */
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        /* ========== ç§»åŠ¨ç«¯é€‚é… ========== */
        @media (max-width: 768px) {
            /* Header è°ƒæ•´ */
            header {
                padding: 12px 16px !important;
            }
            header h1 {
                font-size: 1.25rem !important;
            }

            /* Tab å¯¼èˆªä¼˜åŒ– */
            nav.fixed {
                top: 60px !important;
                padding: 8px 12px !important;
            }
            .tab-btn {
                padding: 8px 12px !important;
                font-size: 12px !important;
            }

            /* ä¸»å†…å®¹åŒºåŸŸ */
            main {
                padding-top: 120px !important;
                padding-left: 12px !important;
                padding-right: 12px !important;
            }

            /* AQI å¤§æ•°å­— */
            .aqi-display {
                font-size: 72px !important;
            }

            /* å¡ç‰‡å†…è¾¹è· */
            .glass-card {
                padding: 16px !important;
            }
            .glass-card.p-6, .glass-card.p-8 {
                padding: 16px !important;
            }

            /* æŒ‡æ ‡å¡ç‰‡ */
            .metric-card {
                padding: 12px !important;
            }
            .metric-value {
                font-size: 20px !important;
            }
            .metric-label {
                font-size: 11px !important;
            }

            /* å›¾è¡¨å®¹å™¨é«˜åº¦ */
            .chart-container {
                height: 250px !important;
                min-height: 250px !important;
            }

            /* è¡¨æ ¼æ»šåŠ¨ */
            .data-table {
                display: block;
                overflow-x: auto;
                white-space: nowrap;
            }
            .data-table th, .data-table td {
                padding: 8px 12px !important;
                font-size: 12px !important;
            }

            /* æ ‡é¢˜å¤§å° */
            .section-title {
                font-size: 16px !important;
            }
            h2 {
                font-size: 1.25rem !important;
            }
            h3 {
                font-size: 1rem !important;
            }

            /* ç‰¹å¾æ ‡ç­¾ */
            .feature-tag {
                font-size: 10px !important;
                padding: 4px 8px !important;
            }

            /* ä»£ç å— */
            code {
                font-size: 11px !important;
            }

            /* ç½‘æ ¼é—´è· */
            .gap-6 {
                gap: 12px !important;
            }
            .gap-4 {
                gap: 8px !important;
            }

            /* æ–¹æ³•è®ºæ–‡å­— */
            .methodology-section p {
                font-size: 14px !important;
                line-height: 1.6 !important;
            }

            /* é™åˆ¶æ€§è¯´æ˜å¡ç‰‡ */
            .limitation-card {
                padding: 12px !important;
            }
            .limitation-card h4 {
                font-size: 14px !important;
            }
            .limitation-card p {
                font-size: 12px !important;
            }
        }

        /* è¶…å°å±å¹• (< 480px) */
        @media (max-width: 480px) {
            .aqi-display {
                font-size: 56px !important;
            }
            .tab-btn {
                padding: 6px 10px !important;
                font-size: 11px !important;
            }
            .metric-value {
                font-size: 18px !important;
            }
            .chart-container {
                height: 200px !important;
                min-height: 200px !important;
            }
        }

        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 px-4 md:px-6 py-3 md:py-4" style="background: rgba(10, 10, 15, 0.9); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(255,255,255,0.05);">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center gap-2 md:gap-3">
                <div class="w-8 h-8 md:w-10 md:h-10 rounded-xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center flex-shrink-0">
                    <span class="text-lg md:text-xl">ğŸŒ</span>
                </div>
                <div class="min-w-0">
                    <h1 class="text-sm md:text-lg font-semibold truncate">æ‰¬å·ç©ºæ°”è´¨é‡é¢„æµ‹</h1>
                    <p class="text-xs text-gray-500 hidden sm:block">Yangzhou AQI Prediction</p>
                </div>
            </div>
            <div class="flex items-center gap-2 md:gap-4 text-xs md:text-sm text-gray-400 flex-shrink-0">
                <span id="updateTime" class="hidden sm:inline">æ›´æ–°: --</span>
                <span class="status-dot status-good"></span>
            </div>
        </div>
    </header>

    <!-- Tab Navigation -->
    <nav class="fixed top-14 md:top-20 left-0 right-0 z-40 px-3 md:px-6 py-2 md:py-3" style="background: rgba(10, 10, 15, 0.8); backdrop-filter: blur(20px);">
        <div class="max-w-7xl mx-auto flex gap-1 md:gap-2 overflow-x-auto pb-2 scrollbar-hide">
            <button class="tab-btn active" data-tab="overview">æ¦‚è§ˆ</button>
            <button class="tab-btn" data-tab="pipeline">æ•°æ®ç®¡é“</button>
            <button class="tab-btn" data-tab="features">ç‰¹å¾åˆ†æ</button>
            <button class="tab-btn" data-tab="model">æ¨¡å‹è¯¦æƒ…</button>
            <button class="tab-btn" data-tab="baseline">åŸºçº¿å¯¹æ¯”</button>
            <button class="tab-btn" data-tab="validation">å†å²éªŒè¯</button>
            <button class="tab-btn" data-tab="explainability">æ¨¡å‹è§£é‡Š</button>
            <button class="tab-btn" data-tab="methodology">æ–¹æ³•è®º</button>
            <button class="tab-btn" data-tab="limitations">å±€é™æ€§</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-28 md:pt-36 px-3 md:px-6 pb-8 md:pb-12">
        <div class="max-w-7xl mx-auto">

            <!-- Tab 1: Overview -->
            <div id="tab-overview" class="tab-content active">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Current AQI -->
                    <div class="glass-card p-8 text-center">
                        <div class="aqi-display" id="currentAqi">--</div>
                        <div class="text-2xl font-medium mt-2" id="aqiLevel">åŠ è½½ä¸­...</div>
                        <div class="text-gray-500 mt-1">ç©ºæ°”è´¨é‡æŒ‡æ•°</div>
                        <div class="mt-2 text-xs text-gray-500" id="aqiDataTime">æ•°æ®æ—¶é—´: --</div>
                        <div class="mt-2 text-sm text-gray-400" id="dominantPollutant">ä¸»è¦æ±¡æŸ“ç‰©: --</div>
                    </div>

                    <!-- Key Metrics -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">å…³é”®æŒ‡æ ‡</h3>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <div class="metric-card">
                                <div class="metric-value text-blue-400" id="pm25Value">--</div>
                                <div class="metric-label">PM2.5 (Î¼g/mÂ³)</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value text-green-400" id="pm10Value">--</div>
                                <div class="metric-label">PM10 (Î¼g/mÂ³)</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value text-yellow-400" id="tempValue">--</div>
                                <div class="metric-label">æ¸©åº¦ (Â°C)</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-value text-purple-400" id="humidityValue">--</div>
                                <div class="metric-label">æ¹¿åº¦ (%)</div>
                            </div>
                        </div>
                    </div>

                    <!-- Prediction Chart -->
                    <div class="glass-card p-6 lg:col-span-3">
                        <h3 class="section-title">æœªæ¥ 24 å°æ—¶é¢„æµ‹ <span class="text-sm font-normal text-gray-500">(åŒ—äº¬æ—¶é—´)</span></h3>
                        <div id="predictionChart" class="chart-container" style="height: 350px;"></div>
                    </div>

                    <!-- Real Data Declaration -->
                    <div class="glass-card p-4 lg:col-span-3" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(59, 130, 246, 0.1)); border: 1px solid rgba(16, 185, 129, 0.3);">
                        <div class="flex items-center gap-3">
                            <span class="text-green-400 text-2xl">âœ“</span>
                            <div>
                                <div class="font-medium text-green-400">çœŸå®æ•°æ®å£°æ˜</div>
                                <div class="text-sm text-gray-400">æœ¬ç³»ç»Ÿæ‰€æœ‰æ•°æ®å‡æ¥è‡ªå…¬å¼€æ•°æ®æºçš„çœŸå®è§‚æµ‹æ•°æ®ï¼šWAQI å®æ—¶ç©ºæ°”è´¨é‡ç›‘æµ‹ã€Open-Meteo æ°”è±¡è§‚æµ‹ã€é«˜å¾·åœ°å›¾å¤©æ°”æœåŠ¡ã€‚é¢„æµ‹ç»“æœåŸºäºçœŸå®å†å²æ•°æ®è®­ç»ƒçš„æœºå™¨å­¦ä¹ æ¨¡å‹ç”Ÿæˆï¼Œéæ¨¡æ‹Ÿæ•°æ®ã€‚</div>
                            </div>
                        </div>
                    </div>

                    <!-- Methodology Summary Card -->
                    <div class="glass-card p-6 lg:col-span-3">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="section-title mb-0">æ–¹æ³•è®ºæ¦‚è¿°</h3>
                            <button onclick="document.querySelector('[data-tab=methodology]').click()" class="text-sm text-blue-400 hover:text-blue-300">æŸ¥çœ‹è¯¦æƒ… â†’</button>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="p-4 rounded-xl" style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2);">
                                <div class="text-blue-400 text-2xl mb-2">ğŸ“¥</div>
                                <div class="font-medium">æ•°æ®é‡‡é›†</div>
                                <div class="text-sm text-gray-400 mt-1">5 ä¸ªæ•°æ®æºï¼Œ~9000 æ¡å†å²è®°å½•ï¼Œå°æ—¶çº§æ›´æ–°</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2);">
                                <div class="text-green-400 text-2xl mb-2">âš™ï¸</div>
                                <div class="font-medium">ç‰¹å¾å·¥ç¨‹</div>
                                <div class="text-sm text-gray-400 mt-1">127 ä¸ªå€™é€‰ç‰¹å¾ï¼Œç­›é€‰ä¿ç•™ 20 ä¸ªé«˜ä»·å€¼ç‰¹å¾</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2);">
                                <div class="text-purple-400 text-2xl mb-2">ğŸ¤–</div>
                                <div class="font-medium">æ¨¡å‹è®­ç»ƒ</div>
                                <div class="text-sm text-gray-400 mt-1">XGBoost æ¨¡å‹ï¼Œ5 æŠ˜æ—¶åºäº¤å‰éªŒè¯</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.2);">
                                <div class="text-yellow-400 text-2xl mb-2">ğŸ“Š</div>
                                <div class="font-medium">æ¨¡å‹æ€§èƒ½ (1h)</div>
                                <div class="text-sm text-gray-400 mt-1">MAE=6.03, RÂ²=0.86ï¼ˆæ–¹æ³•è®ºæ­£ç¡®ç‰ˆæœ¬ï¼‰</div>
                            </div>
                        </div>
                    </div>

                    <!-- Model Performance Summary -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">æ ¸å¿ƒæŠ€æœ¯äº®ç‚¹</h3>
                        <div class="space-y-3">
                            <div class="flex items-start gap-3">
                                <span class="text-green-400">âœ“</span>
                                <div>
                                    <div class="font-medium">å¤šæºæ•°æ®èåˆ</div>
                                    <div class="text-sm text-gray-400">æ•´åˆ WAQIã€Open-Meteoã€é«˜å¾·ç­‰ 5 ä¸ªæ•°æ®æº</div>
                                </div>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="text-green-400">âœ“</span>
                                <div>
                                    <div class="font-medium">æ—¶åºç‰¹å¾å·¥ç¨‹</div>
                                    <div class="text-sm text-gray-400">æ»åç‰¹å¾ã€æ»šåŠ¨ç»Ÿè®¡ã€å‘¨æœŸç¼–ç ç­‰ 127 ä¸ªå€™é€‰ç‰¹å¾</div>
                                </div>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="text-green-400">âœ“</span>
                                <div>
                                    <div class="font-medium">ä¸¥æ ¼è¯„ä¼°ä½“ç³»</div>
                                    <div class="text-sm text-gray-400">åŸºçº¿å¯¹æ¯”ã€æ¶ˆèå®éªŒã€æ—¶åºäº¤å‰éªŒè¯</div>
                                </div>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="text-green-400">âœ“</span>
                                <div>
                                    <div class="font-medium">å¯è§£é‡Šæ€§åˆ†æ</div>
                                    <div class="text-sm text-gray-400">SHAP ç‰¹å¾é‡è¦æ€§ï¼Œæ˜ç¡®é¢„æµ‹ä¾æ®</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Data Leakage Explanation -->
                    <div class="glass-card p-6 lg:col-span-3">
                        <h3 class="section-title">å…³äºç‰¹å¾å·¥ç¨‹çš„è¯´æ˜ï¼šä¸ºä»€ä¹ˆä½¿ç”¨å†å² AQI ä¸æ˜¯æ•°æ®æ³„æ¼ï¼Ÿ</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-medium text-blue-400 mb-2">ä»€ä¹ˆæ˜¯æ»åç‰¹å¾ (Lag Features)ï¼Ÿ</h4>
                                <p class="text-sm text-gray-400 leading-relaxed">
                                    æ»åç‰¹å¾æ˜¯æŒ‡ä½¿ç”¨<strong class="text-white">è¿‡å»æ—¶åˆ»</strong>çš„ç›®æ ‡å˜é‡å€¼ä½œä¸ºç‰¹å¾ã€‚ä¾‹å¦‚ï¼š
                                </p>
                                <ul class="text-sm text-gray-400 mt-2 space-y-1">
                                    <li>â€¢ <code class="text-blue-300">AQI_lag_1h</code> = 1 å°æ—¶å‰çš„ AQI å€¼</li>
                                    <li>â€¢ <code class="text-blue-300">AQI_lag_3h</code> = 3 å°æ—¶å‰çš„ AQI å€¼</li>
                                    <li>â€¢ <code class="text-blue-300">AQI_lag_24h</code> = 24 å°æ—¶å‰çš„ AQI å€¼</li>
                                </ul>
                                <p class="text-sm text-gray-400 mt-3">
                                    è¿™å°±åƒé¢„æµ‹æ˜å¤©çš„å¤©æ°”æ—¶ï¼Œå‚è€ƒä»Šå¤©å’Œæ˜¨å¤©çš„å¤©æ°”ä¸€æ ·è‡ªç„¶ã€‚
                                </p>
                            </div>
                            <div>
                                <h4 class="font-medium text-green-400 mb-2">ä¸ºä»€ä¹ˆè¿™ä¸æ˜¯æ•°æ®æ³„æ¼ï¼Ÿ</h4>
                                <div class="space-y-3">
                                    <div class="p-3 rounded-lg" style="background: rgba(16, 185, 129, 0.1);">
                                        <div class="font-medium text-sm">1. æ—¶é—´ä¸¥æ ¼åˆ†ç¦»</div>
                                        <div class="text-xs text-gray-400">æ‰€æœ‰ç‰¹å¾ä»…ä½¿ç”¨é¢„æµ‹æ—¶åˆ»ä¹‹å‰çš„æ•°æ®ï¼Œç»ä¸ä½¿ç”¨å½“å‰æˆ–æœªæ¥çš„ä¿¡æ¯</div>
                                    </div>
                                    <div class="p-3 rounded-lg" style="background: rgba(16, 185, 129, 0.1);">
                                        <div class="font-medium text-sm">2. ç¬¦åˆå®é™…åº”ç”¨åœºæ™¯</div>
                                        <div class="text-xs text-gray-400">åœ¨å®é™…é¢„æµ‹æ—¶ï¼Œæˆ‘ä»¬ç¡®å®å¯ä»¥è·å–åˆ°å†å² AQI æ•°æ®æ¥è¾…åŠ©é¢„æµ‹</div>
                                    </div>
                                    <div class="p-3 rounded-lg" style="background: rgba(16, 185, 129, 0.1);">
                                        <div class="font-medium text-sm">3. æ—¶åºé¢„æµ‹çš„æ ‡å‡†å®è·µ</div>
                                        <div class="text-xs text-gray-400">ARIMAã€Prophetã€LSTM ç­‰æ—¶åºæ¨¡å‹éƒ½ä¾èµ–å†å²ç›®æ ‡å€¼è¿›è¡Œé¢„æµ‹</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 p-3 rounded-lg" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2);">
                            <div class="flex items-center gap-2">
                                <span class="text-purple-400">ğŸ’¡</span>
                                <span class="text-sm"><strong class="text-purple-300">æ•°æ®æ³„æ¼çš„å®šä¹‰ï¼š</strong><span class="text-gray-400">è®­ç»ƒæ—¶ä½¿ç”¨äº†é¢„æµ‹æ—¶åˆ»ä¹‹åçš„ä¿¡æ¯ã€‚æœ¬æ¨¡å‹çš„æ»åç‰¹å¾å…¨éƒ¨æ¥è‡ªå†å²æ•°æ®ï¼Œä¸å­˜åœ¨æ•°æ®æ³„æ¼é—®é¢˜ã€‚</span></span>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">æ•°æ®ç»Ÿè®¡</h3>
                        <div class="space-y-4">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-400">è®­ç»ƒæ•°æ®é‡</span>
                                <span class="font-medium">9,164 æ¡</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-400">æ•°æ®æ—¶é—´è·¨åº¦</span>
                                <span class="font-medium">~13 ä¸ªæœˆ</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-400">ç‰¹å¾æ•°é‡</span>
                                <span class="font-medium">25 ä¸ª</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-400">é¢„æµ‹å‡†ç¡®ç‡ (1h)</span>
                                <span class="font-medium text-green-400">RÂ² = 0.86</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-400">å¹³å‡è¯¯å·® (1h)</span>
                                <span class="font-medium text-blue-400">MAE = 6.03</span>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Recommendations based on current AQI -->
                    <div class="glass-card p-6 lg:col-span-3">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="section-title mb-0">ä»Šæ—¥è¡ŒåŠ¨å»ºè®®</h3>
                            <button onclick="document.querySelector('[data-tab=explainability]').click()" class="text-sm text-blue-400 hover:text-blue-300">æ¨¡å‹è§£é‡Š â†’</button>
                        </div>
                        <div id="quickRecommendations" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <!-- Will be populated by JavaScript -->
                            <div class="p-4 rounded-xl text-center" style="background: rgba(16, 185, 129, 0.1);">
                                <div class="text-2xl mb-2">ğŸƒ</div>
                                <div class="text-sm font-medium">æˆ·å¤–è¿åŠ¨</div>
                                <div id="rec-outdoor" class="text-xs text-gray-400 mt-1">åŠ è½½ä¸­...</div>
                            </div>
                            <div class="p-4 rounded-xl text-center" style="background: rgba(59, 130, 246, 0.1);">
                                <div class="text-2xl mb-2">ğŸªŸ</div>
                                <div class="text-sm font-medium">å¼€çª—é€šé£</div>
                                <div id="rec-window" class="text-xs text-gray-400 mt-1">åŠ è½½ä¸­...</div>
                            </div>
                            <div class="p-4 rounded-xl text-center" style="background: rgba(245, 158, 11, 0.1);">
                                <div class="text-2xl mb-2">ğŸ˜·</div>
                                <div class="text-sm font-medium">å£ç½©å»ºè®®</div>
                                <div id="rec-mask" class="text-xs text-gray-400 mt-1">åŠ è½½ä¸­...</div>
                            </div>
                            <div class="p-4 rounded-xl text-center" style="background: rgba(139, 92, 246, 0.1);">
                                <div class="text-2xl mb-2">ğŸŒ¬ï¸</div>
                                <div class="text-sm font-medium">å‡€åŒ–å™¨</div>
                                <div id="rec-purifier" class="text-xs text-gray-400 mt-1">åŠ è½½ä¸­...</div>
                            </div>
                        </div>
                        <div id="trendInsight" class="mt-4 p-3 rounded-lg" style="background: rgba(59, 130, 246, 0.1);">
                            <div class="text-sm text-gray-400"><span class="text-blue-400 font-medium">ğŸ“Š è¶‹åŠ¿æ´å¯Ÿï¼š</span><span id="trend-text">åˆ†æä¸­...</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 2: Data Pipeline -->
            <div id="tab-pipeline" class="tab-content">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Data Sources -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">æ•°æ®æºæ¸…å•</h3>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>æ•°æ®æº</th>
                                    <th>ç±»å‹</th>
                                    <th>é¢‘ç‡</th>
                                    <th>çŠ¶æ€</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>WAQI</td>
                                    <td>å®æ—¶ AQI</td>
                                    <td>æ¯å°æ—¶</td>
                                    <td><span class="status-dot status-good"></span> æ­£å¸¸</td>
                                </tr>
                                <tr>
                                    <td>quotsoft.net</td>
                                    <td>å†å² AQI</td>
                                    <td>æ¯æ—¥</td>
                                    <td><span class="status-dot status-good"></span> æ­£å¸¸</td>
                                </tr>
                                <tr>
                                    <td>Open-Meteo</td>
                                    <td>å†å²å¤©æ°”</td>
                                    <td>æ¯å°æ—¶</td>
                                    <td><span class="status-dot status-good"></span> æ­£å¸¸</td>
                                </tr>
                                <tr>
                                    <td>é«˜å¾·åœ°å›¾</td>
                                    <td>å®æ—¶å¤©æ°”</td>
                                    <td>æ¯å°æ—¶</td>
                                    <td><span class="status-dot status-good"></span> æ­£å¸¸</td>
                                </tr>
                                <tr>
                                    <td>GitHub Calendar</td>
                                    <td>èŠ‚å‡æ—¥</td>
                                    <td>å¹´åº¦</td>
                                    <td><span class="status-dot status-good"></span> æ­£å¸¸</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Pipeline Flow -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">æ•°æ®æµç¨‹</h3>
                        <div class="pipeline-step">
                            <div class="pipeline-icon bg-blue-500/20 text-blue-400">ğŸ“¥</div>
                            <div>
                                <div class="font-medium">æ•°æ®é‡‡é›†</div>
                                <div class="text-sm text-gray-500">ä»å¤šä¸ªæ•°æ®æºè·å–åŸå§‹æ•°æ®</div>
                            </div>
                        </div>
                        <div class="pipeline-step">
                            <div class="pipeline-icon bg-green-500/20 text-green-400">ğŸ§¹</div>
                            <div>
                                <div class="font-medium">æ•°æ®æ¸…æ´—</div>
                                <div class="text-sm text-gray-500">å¤„ç†ç¼ºå¤±å€¼ã€å¼‚å¸¸å€¼ã€æ—¶é—´å¯¹é½</div>
                            </div>
                        </div>
                        <div class="pipeline-step">
                            <div class="pipeline-icon bg-yellow-500/20 text-yellow-400">ğŸ”€</div>
                            <div>
                                <div class="font-medium">æ•°æ®åˆå¹¶</div>
                                <div class="text-sm text-gray-500">å¤šæºæ•°æ®æŒ‰æ—¶é—´æˆ³åˆå¹¶</div>
                            </div>
                        </div>
                        <div class="pipeline-step">
                            <div class="pipeline-icon bg-purple-500/20 text-purple-400">âš™ï¸</div>
                            <div>
                                <div class="font-medium">ç‰¹å¾å·¥ç¨‹</div>
                                <div class="text-sm text-gray-500">æ„å»ºæ»åã€æ»šåŠ¨ã€äº¤äº’ç‰¹å¾</div>
                            </div>
                        </div>
                        <div class="pipeline-step">
                            <div class="pipeline-icon bg-red-500/20 text-red-400">ğŸ¤–</div>
                            <div>
                                <div class="font-medium">æ¨¡å‹é¢„æµ‹</div>
                                <div class="text-sm text-gray-500">XGBoost æ¨¡å‹å®æ—¶é¢„æµ‹</div>
                            </div>
                        </div>
                    </div>

                    <!-- Data Cleaning Details -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">æ•°æ®æ¸…æ´—è¯¦ç»†æµç¨‹</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="p-4 rounded-xl" style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2);">
                                <h4 class="font-medium text-green-400 mb-3">1. ç¼ºå¤±å€¼å¤„ç†</h4>
                                <ul class="text-sm text-gray-400 space-y-2">
                                    <li>â€¢ <strong class="text-white">æ£€æµ‹ï¼š</strong>ç»Ÿè®¡æ¯åˆ—ç¼ºå¤±ç‡</li>
                                    <li>â€¢ <strong class="text-white">è¿‡æ»¤ï¼š</strong>å‰”é™¤ç¼ºå¤±ç‡ > 20% çš„ç‰¹å¾</li>
                                    <li>â€¢ <strong class="text-white">æ’å€¼ï¼š</strong>çº¿æ€§æ’å€¼å¡«å……è¿ç»­å‹å˜é‡</li>
                                    <li>â€¢ <strong class="text-white">å‰å‘å¡«å……ï¼š</strong>åˆ†ç±»å˜é‡ä½¿ç”¨ ffill</li>
                                </ul>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.2);">
                                <h4 class="font-medium text-yellow-400 mb-3">2. å¼‚å¸¸å€¼å¤„ç†</h4>
                                <ul class="text-sm text-gray-400 space-y-2">
                                    <li>â€¢ <strong class="text-white">IQR æ–¹æ³•ï¼š</strong>Q1-1.5Ã—IQR ~ Q3+1.5Ã—IQR</li>
                                    <li>â€¢ <strong class="text-white">ç‰©ç†çº¦æŸï¼š</strong>AQI âˆˆ [0, 500]</li>
                                    <li>â€¢ <strong class="text-white">æ¸©åº¦çº¦æŸï¼š</strong>-40Â°C ~ 50Â°C</li>
                                    <li>â€¢ <strong class="text-white">å¤„ç†æ–¹å¼ï¼š</strong>æˆªæ–­è‡³è¾¹ç•Œå€¼</li>
                                </ul>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2);">
                                <h4 class="font-medium text-blue-400 mb-3">3. æ—¶é—´å¯¹é½</h4>
                                <ul class="text-sm text-gray-400 space-y-2">
                                    <li>â€¢ <strong class="text-white">ç»Ÿä¸€æ—¶åŒºï¼š</strong>è½¬æ¢ä¸º Asia/Shanghai</li>
                                    <li>â€¢ <strong class="text-white">é‡é‡‡æ ·ï¼š</strong>ç»Ÿä¸€åˆ°å°æ—¶çº§ç²¾åº¦</li>
                                    <li>â€¢ <strong class="text-white">å¯¹é½æ–¹å¼ï¼š</strong>æŒ‰ datetime å·¦è¿æ¥</li>
                                    <li>â€¢ <strong class="text-white">å»é‡ï¼š</strong>ä¿ç•™æœ€æ–°è®°å½•</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Data Merge Details -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">å¤šæºæ•°æ®åˆå¹¶ç­–ç•¥</h3>
                        <div class="overflow-x-auto">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>æ•°æ®æº A</th>
                                        <th>æ•°æ®æº B</th>
                                        <th>åˆå¹¶é”®</th>
                                        <th>åˆå¹¶æ–¹å¼</th>
                                        <th>å¤„ç†è¯´æ˜</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>å†å² AQI</td>
                                        <td>å†å²å¤©æ°”</td>
                                        <td>datetime (å°æ—¶)</td>
                                        <td>left join</td>
                                        <td>ä»¥ AQI ä¸ºä¸»è¡¨ï¼Œå¤©æ°”æ•°æ®å¡«å……</td>
                                    </tr>
                                    <tr>
                                        <td>åˆå¹¶åæ•°æ®</td>
                                        <td>èŠ‚å‡æ—¥æ•°æ®</td>
                                        <td>date (æ—¥æœŸ)</td>
                                        <td>left join</td>
                                        <td>æ·»åŠ  is_holiday æ ‡è®°</td>
                                    </tr>
                                    <tr>
                                        <td>åˆå¹¶åæ•°æ®</td>
                                        <td>æ—¶é—´ç‰¹å¾</td>
                                        <td>datetime (å°æ—¶)</td>
                                        <td>å·¥ç¨‹è®¡ç®—</td>
                                        <td>ç”Ÿæˆ hour, is_weekend, is_rush_hour, month_sin/cos ç­‰</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="mt-4 p-3 rounded-lg" style="background: rgba(139, 92, 246, 0.1);">
                            <div class="text-sm text-gray-400">
                                <strong class="text-purple-300">æ•°æ®è´¨é‡ä¿éšœï¼š</strong>åˆå¹¶åæ£€æŸ¥æ—¶é—´è¿ç»­æ€§ï¼Œå¯¹äºç¼ºå¤±çš„æ—¶é—´ç‚¹ä½¿ç”¨æ’å€¼å¡«å……ï¼›åˆå¹¶è®°å½•æ•° 9,164 æ¡ï¼Œè¦†ç›– 2023-01-01 è‡³ 2026-02-02ã€‚
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 3: Feature Analysis -->
            <div id="tab-features" class="tab-content">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Feature Importance -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">ç‰¹å¾é‡è¦æ€§æ’å (Top 20)</h3>
                        <div id="featureImportanceChart" class="chart-container" style="height: 450px;"></div>
                    </div>

                    <!-- Feature Categories -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">ç‰¹å¾ç±»åˆ«ç»Ÿè®¡</h3>
                        <div id="featureCategoryChart" class="chart-container" style="height: 250px;"></div>

                        <h3 class="section-title mt-8">ç‰¹å¾å€™é€‰æ±  (v4 - å¯è§£é‡Šæ€§ä¼˜å…ˆ)</h3>
                        <div class="text-sm text-gray-400 mb-4">å…± 22 ä¸ªå¯è§£é‡Šç‰¹å¾ï¼Œæ¯ä¸ªç‰¹å¾éƒ½æœ‰æ˜ç¡®çš„<strong class="text-green-400">ç‰©ç†æ„ä¹‰</strong></div>
                        <div id="featureTags" class="flex flex-wrap">
                            <span class="feature-tag">å½“å‰AQI</span>
                            <span class="feature-tag">PM10æµ“åº¦</span>
                            <span class="feature-tag">PM2.5æµ“åº¦</span>
                            <span class="feature-tag">é£é€Ÿ</span>
                            <span class="feature-tag">æ°”å‹</span>
                            <span class="feature-tag">æ¹¿åº¦</span>
                            <span class="feature-tag">æ¸©åº¦</span>
                            <span class="feature-tag">ä¾›æš–å­£</span>
                        </div>
                    </div>

                    <!-- Feature Engineering Details -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">ç‰¹å¾å·¥ç¨‹è¯¦ç»†è¯´æ˜</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="p-4 rounded-xl" style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2);">
                                <h4 class="font-medium text-blue-400 mb-3">æ»åç‰¹å¾ (Lag Features)</h4>
                                <p class="text-sm text-gray-400 mb-2">æ•æ‰æ—¶é—´åºåˆ—çš„è‡ªç›¸å…³æ€§</p>
                                <ul class="text-xs text-gray-500 space-y-1">
                                    <li>â€¢ AQI_lag_1h, _3h, _6h, _12h, _24h, _48h</li>
                                    <li>â€¢ PM2.5_lag_1h, PM10_lag_1h</li>
                                    <li>â€¢ temperature_lag_1h, humidity_lag_1h</li>
                                </ul>
                                <div class="mt-2 text-xs text-blue-300">å…± 35 ä¸ªæ»åç‰¹å¾</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2);">
                                <h4 class="font-medium text-green-400 mb-3">æ»šåŠ¨ç»Ÿè®¡ (Rolling Stats)</h4>
                                <p class="text-sm text-gray-400 mb-2">æ•æ‰è¶‹åŠ¿å’Œæ³¢åŠ¨æ€§</p>
                                <ul class="text-xs text-gray-500 space-y-1">
                                    <li>â€¢ rolling_mean_6h, _12h, _24h</li>
                                    <li>â€¢ rolling_std_6h, _12h, _24h</li>
                                    <li>â€¢ rolling_max, rolling_min</li>
                                </ul>
                                <div class="mt-2 text-xs text-green-300">å…± 28 ä¸ªæ»šåŠ¨ç‰¹å¾</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.2);">
                                <h4 class="font-medium text-yellow-400 mb-3">æ—¶é—´ç‰¹å¾ (Time Features)</h4>
                                <p class="text-sm text-gray-400 mb-2">æ•æ‰å‘¨æœŸæ€§è§„å¾‹</p>
                                <ul class="text-xs text-gray-500 space-y-1">
                                    <li>â€¢ hour_sin, hour_cos (æ—¥å‘¨æœŸ)</li>
                                    <li>â€¢ day_of_week_sin, _cos (å‘¨å‘¨æœŸ)</li>
                                    <li>â€¢ month_sin, month_cos (å¹´å‘¨æœŸ)</li>
                                    <li>â€¢ is_weekend, is_holiday</li>
                                </ul>
                                <div class="mt-2 text-xs text-yellow-300">å…± 20 ä¸ªæ—¶é—´ç‰¹å¾</div>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="p-4 rounded-xl" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2);">
                                <h4 class="font-medium text-purple-400 mb-3">å˜åŒ–ç‡ç‰¹å¾ (Change Rate)</h4>
                                <p class="text-sm text-gray-400 mb-2">æ•æ‰çŸ­æœŸå˜åŒ–è¶‹åŠ¿</p>
                                <ul class="text-xs text-gray-500 space-y-1">
                                    <li>â€¢ AQI_change_1h = AQI - AQI_lag_1h</li>
                                    <li>â€¢ AQI_change_3h, _6h, _24h</li>
                                    <li>â€¢ pressure_change_3h</li>
                                </ul>
                                <div class="mt-2 text-xs text-purple-300">å…± 15 ä¸ªå˜åŒ–ç‡ç‰¹å¾</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2);">
                                <h4 class="font-medium text-red-400 mb-3">äº¤äº’ç‰¹å¾ (Interactions)</h4>
                                <p class="text-sm text-gray-400 mb-2">æ•æ‰å˜é‡é—´çš„ååŒæ•ˆåº”</p>
                                <ul class="text-xs text-gray-500 space-y-1">
                                    <li>â€¢ temp_humidity_product</li>
                                    <li>â€¢ wind_direction_effect</li>
                                    <li>â€¢ rush_hour_flag Ã— AQI_lag</li>
                                </ul>
                                <div class="mt-2 text-xs text-red-300">å…± 21 ä¸ªäº¤äº’ç‰¹å¾</div>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(6, 182, 212, 0.1); border: 1px solid rgba(6, 182, 212, 0.2);">
                                <h4 class="font-medium text-cyan-400 mb-3">ä»£ç†å˜é‡ (Proxy Variables)</h4>
                                <p class="text-sm text-gray-400 mb-2">è¿‘ä¼¼ä¸å¯è§‚æµ‹å› ç´ </p>
                                <ul class="text-xs text-gray-500 space-y-1">
                                    <li>â€¢ æ—¥æ¸©å·® â†’ é€†æ¸©å±‚å¼ºåº¦</li>
                                    <li>â€¢ ç§‹å­£æ ‡è®° â†’ ç§¸ç§†ç„šçƒ§</li>
                                    <li>â€¢ æ˜¥èŠ‚æ ‡è®° â†’ çƒŸèŠ±ç‡ƒæ”¾</li>
                                    <li>â€¢ ä¾›æš–å­£æ ‡è®° â†’ ä¾›æš–æ’æ”¾</li>
                                </ul>
                                <div class="mt-2 text-xs text-cyan-300">å…± 8 ä¸ªä»£ç†å˜é‡</div>
                            </div>
                        </div>
                    </div>

                    <!-- Feature Selection Process -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">ç‰¹å¾ç­›é€‰æµç¨‹</h3>
                        <div class="flex flex-wrap items-center gap-4 mb-4">
                            <div class="flex items-center gap-2 px-4 py-2 rounded-lg" style="background: rgba(59, 130, 246, 0.2);">
                                <span class="text-blue-400 font-bold">127</span>
                                <span class="text-sm text-gray-400">å€™é€‰ç‰¹å¾</span>
                            </div>
                            <span class="text-gray-500">â†’</span>
                            <div class="flex items-center gap-2 px-4 py-2 rounded-lg" style="background: rgba(245, 158, 11, 0.2);">
                                <span class="text-yellow-400 font-bold">85</span>
                                <span class="text-sm text-gray-400">ç¼ºå¤±ç‡ç­›é€‰å</span>
                            </div>
                            <span class="text-gray-500">â†’</span>
                            <div class="flex items-center gap-2 px-4 py-2 rounded-lg" style="background: rgba(139, 92, 246, 0.2);">
                                <span class="text-purple-400 font-bold">52</span>
                                <span class="text-sm text-gray-400">ç›¸å…³æ€§ç­›é€‰å</span>
                            </div>
                            <span class="text-gray-500">â†’</span>
                            <div class="flex items-center gap-2 px-4 py-2 rounded-lg" style="background: rgba(16, 185, 129, 0.2);">
                                <span class="text-green-400 font-bold">20</span>
                                <span class="text-sm text-gray-400">VIF + é‡è¦æ€§ç­›é€‰å</span>
                            </div>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ç­›é€‰é˜¶æ®µ</th>
                                    <th>ç­›é€‰æ–¹æ³•</th>
                                    <th>é˜ˆå€¼</th>
                                    <th>å‰”é™¤æ•°é‡</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>ç¬¬ä¸€è½®</td>
                                    <td>ç¼ºå¤±ç‡ç­›é€‰</td>
                                    <td>ç¼ºå¤±ç‡ > 20%</td>
                                    <td>42 ä¸ª</td>
                                </tr>
                                <tr>
                                    <td>ç¬¬äºŒè½®</td>
                                    <td>ç›¸å…³æ€§ç­›é€‰</td>
                                    <td>|ç›¸å…³ç³»æ•°| < 0.05</td>
                                    <td>33 ä¸ª</td>
                                </tr>
                                <tr>
                                    <td>ç¬¬ä¸‰è½®</td>
                                    <td>VIF ç­›é€‰</td>
                                    <td>VIF > 10 (å¤šé‡å…±çº¿æ€§)</td>
                                    <td>18 ä¸ª</td>
                                </tr>
                                <tr>
                                    <td>ç¬¬å››è½®</td>
                                    <td>é‡è¦æ€§ç­›é€‰</td>
                                    <td>Top 20 by XGBoost importance</td>
                                    <td>14 ä¸ª</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Excluded Features -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">è¢«å‰”é™¤çš„ç‰¹å¾ç¤ºä¾‹åŠåŸå› </h3>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ç‰¹å¾åç§°</th>
                                    <th>å‰”é™¤åŸå› </th>
                                    <th>è¯¦ç»†è¯´æ˜</th>
                                </tr>
                            </thead>
                            <tbody id="excludedFeaturesTable">
                                <tr>
                                    <td>O3_8h_24h</td>
                                    <td>ç¼ºå¤±ç‡è¿‡é«˜</td>
                                    <td>ç¼ºå¤±ç‡ 25.3% > 20%</td>
                                </tr>
                                <tr>
                                    <td>SO2_current</td>
                                    <td>æ•°æ®ä¸å®Œæ•´</td>
                                    <td>2024å¹´åç›‘æµ‹ç«™æ•°æ®ç¼ºå¤±ä¸¥é‡</td>
                                </tr>
                                <tr>
                                    <td>AQI_rolling_std_48h</td>
                                    <td>VIF è¿‡é«˜</td>
                                    <td>VIF=15.2ï¼Œä¸ AQI_rolling_std_24h é«˜åº¦ç›¸å…³</td>
                                </tr>
                                <tr>
                                    <td>precipitation</td>
                                    <td>é‡è¦æ€§è¿‡ä½</td>
                                    <td>XGBoost importance=0.002ï¼Œæ’åæœ«å°¾</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Tab 4: Model Details -->
            <div id="tab-model" class="tab-content">
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- Model Info -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">æ¨¡å‹é…ç½®</h3>
                        <div class="space-y-4">
                            <div>
                                <div class="text-gray-500 text-sm">æ¨¡å‹ç±»å‹</div>
                                <div class="font-medium">XGBoost Regressor</div>
                            </div>
                            <div>
                                <div class="text-gray-500 text-sm">è®­ç»ƒæ•°æ®èŒƒå›´</div>
                                <div class="font-medium">2023-01-01 ~ 2026-02-02</div>
                            </div>
                            <div>
                                <div class="text-gray-500 text-sm">ç‰¹å¾æ•°é‡</div>
                                <div class="font-medium" id="featureCount">50</div>
                            </div>
                            <div>
                                <div class="text-gray-500 text-sm">äº¤å‰éªŒè¯</div>
                                <div class="font-medium">TimeSeriesSplit (5-fold)</div>
                            </div>
                        </div>
                    </div>

                    <!-- Hyperparameters -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">è¶…å‚æ•°è®¾ç½®</h3>
                        <table class="data-table">
                            <tbody>
                                <tr><td class="text-gray-500">n_estimators</td><td>200</td></tr>
                                <tr><td class="text-gray-500">max_depth</td><td>6</td></tr>
                                <tr><td class="text-gray-500">learning_rate</td><td>0.1</td></tr>
                                <tr><td class="text-gray-500">subsample</td><td>0.8</td></tr>
                                <tr><td class="text-gray-500">colsample_bytree</td><td>0.8</td></tr>
                                <tr><td class="text-gray-500">random_state</td><td>42</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Model Metrics -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">æ¨¡å‹æ€§èƒ½ (v4 - 1hé¢„æµ‹)</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div class="metric-card text-center">
                                <div class="metric-value text-green-400" id="modelMAE">6.03</div>
                                <div class="metric-label">MAE</div>
                            </div>
                            <div class="metric-card text-center">
                                <div class="metric-value text-blue-400" id="modelRMSE">9.23</div>
                                <div class="metric-label">RMSE</div>
                            </div>
                            <div class="metric-card text-center">
                                <div class="metric-value text-purple-400" id="modelR2">0.86</div>
                                <div class="metric-label">RÂ²</div>
                            </div>
                            <div class="metric-card text-center">
                                <div class="metric-value text-yellow-400" id="modelMAPE">12.0%</div>
                                <div class="metric-label">MAPE</div>
                            </div>
                        </div>
                    </div>

                    <!-- CV Results -->
                    <div class="glass-card p-6 lg:col-span-3">
                        <h3 class="section-title">äº¤å‰éªŒè¯ç»“æœ</h3>
                        <div id="cvResultsChart" class="chart-container"></div>
                    </div>

                    <!-- Training Process -->
                    <div class="glass-card p-6 lg:col-span-3">
                        <h3 class="section-title">æ¨¡å‹è®­ç»ƒæµç¨‹è¯¦è§£</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-medium text-blue-400 mb-3">ä¸ºä»€ä¹ˆé€‰æ‹© XGBoostï¼Ÿ</h4>
                                <ul class="text-sm text-gray-400 space-y-2">
                                    <li class="flex items-start gap-2">
                                        <span class="text-green-400">âœ“</span>
                                        <span><strong class="text-white">å¤„ç†éçº¿æ€§ï¼š</strong>AQI ä¸æ°”è±¡å› ç´ çš„å…³ç³»æ˜¯é«˜åº¦éçº¿æ€§çš„</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-green-400">âœ“</span>
                                        <span><strong class="text-white">å¤„ç†ç¼ºå¤±å€¼ï¼š</strong>å†…ç½®ç¼ºå¤±å€¼å¤„ç†æœºåˆ¶</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-green-400">âœ“</span>
                                        <span><strong class="text-white">ç‰¹å¾é‡è¦æ€§ï¼š</strong>è‡ªåŠ¨è®¡ç®—ç‰¹å¾é‡è¦æ€§ï¼Œä¾¿äºè§£é‡Š</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-green-400">âœ“</span>
                                        <span><strong class="text-white">æ­£åˆ™åŒ–ï¼š</strong>L1/L2 æ­£åˆ™åŒ–é˜²æ­¢è¿‡æ‹Ÿåˆ</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <span class="text-green-400">âœ“</span>
                                        <span><strong class="text-white">è®­ç»ƒé€Ÿåº¦ï¼š</strong>GPU åŠ é€Ÿï¼Œé€‚åˆä¸­ç­‰è§„æ¨¡æ•°æ®</span>
                                    </li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-medium text-purple-400 mb-3">æ—¶åºäº¤å‰éªŒè¯ (TimeSeriesSplit)</h4>
                                <p class="text-sm text-gray-400 mb-3">
                                    ä¸æ™®é€š K-Fold ä¸åŒï¼ŒTimeSeriesSplit ä¿æŒæ—¶é—´é¡ºåºï¼Œé¿å…æœªæ¥æ•°æ®æ³„æ¼ï¼š
                                </p>
                                <div class="space-y-2 text-xs">
                                    <div class="flex items-center gap-2">
                                        <span class="text-gray-500">Fold 1:</span>
                                        <div class="flex-1 h-4 rounded flex overflow-hidden">
                                            <div class="bg-blue-500/50 w-1/5"></div>
                                            <div class="bg-green-500/50 w-1/5"></div>
                                            <div class="bg-gray-700 flex-1"></div>
                                        </div>
                                        <span class="text-gray-500 w-24">Trainâ†’Test</span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <span class="text-gray-500">Fold 2:</span>
                                        <div class="flex-1 h-4 rounded flex overflow-hidden">
                                            <div class="bg-blue-500/50 w-2/5"></div>
                                            <div class="bg-green-500/50 w-1/5"></div>
                                            <div class="bg-gray-700 flex-1"></div>
                                        </div>
                                        <span class="text-gray-500 w-24">Trainâ†’Test</span>
                                    </div>
                                    <div class="flex items-center gap-2">
                                        <span class="text-gray-500">Fold 5:</span>
                                        <div class="flex-1 h-4 rounded flex overflow-hidden">
                                            <div class="bg-blue-500/50 w-4/5"></div>
                                            <div class="bg-green-500/50 w-1/5"></div>
                                        </div>
                                        <span class="text-gray-500 w-24">Trainâ†’Test</span>
                                    </div>
                                </div>
                                <p class="text-xs text-gray-500 mt-2">
                                    <span class="inline-block w-3 h-3 bg-blue-500/50 rounded mr-1"></span> è®­ç»ƒé›†
                                    <span class="inline-block w-3 h-3 bg-green-500/50 rounded mx-1 ml-3"></span> æµ‹è¯•é›†
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- XGBoost Explanation -->
                    <div class="glass-card p-6 lg:col-span-3">
                        <h3 class="section-title">XGBoost åŸç†ç®€ä»‹</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="p-4 rounded-xl" style="background: rgba(59, 130, 246, 0.1);">
                                <h4 class="font-medium mb-2">1. æ¢¯åº¦æå‡</h4>
                                <p class="text-sm text-gray-400">
                                    é€šè¿‡è¿­ä»£è®­ç»ƒå¤šæ£µå†³ç­–æ ‘ï¼Œæ¯æ£µæ–°æ ‘å­¦ä¹ ä¹‹å‰æ¨¡å‹çš„æ®‹å·®ï¼ˆé¢„æµ‹è¯¯å·®ï¼‰ï¼Œé€æ­¥é€¼è¿‘çœŸå®å€¼ã€‚
                                </p>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(139, 92, 246, 0.1);">
                                <h4 class="font-medium mb-2">2. æ­£åˆ™åŒ–</h4>
                                <p class="text-sm text-gray-400">
                                    ç›®æ ‡å‡½æ•°åŒ…å« L1/L2 æ­£åˆ™é¡¹ï¼Œæƒ©ç½šå¤æ‚æ¨¡å‹ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆï¼Œæé«˜æ³›åŒ–èƒ½åŠ›ã€‚
                                </p>
                            </div>
                            <div class="p-4 rounded-xl" style="background: rgba(16, 185, 129, 0.1);">
                                <h4 class="font-medium mb-2">3. å¹¶è¡Œä¼˜åŒ–</h4>
                                <p class="text-sm text-gray-400">
                                    åˆ©ç”¨ç‰¹å¾å¹¶è¡Œå’Œæ•°æ®å¹¶è¡ŒåŠ é€Ÿè®­ç»ƒï¼Œæ”¯æŒ GPU åŠ é€Ÿï¼Œé«˜æ•ˆå¤„ç†å¤§è§„æ¨¡æ•°æ®ã€‚
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 5: Baseline Comparison -->
            <div id="tab-baseline" class="tab-content">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Comparison Table -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">åŸºçº¿æ¨¡å‹å¯¹æ¯”</h3>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>æ¨¡å‹</th>
                                    <th>MAE</th>
                                    <th>RMSE</th>
                                    <th>RÂ²</th>
                                </tr>
                            </thead>
                            <tbody id="baselineTable">
                                <tr>
                                    <td>Naive (24h)</td>
                                    <td>22.4</td>
                                    <td>31.2</td>
                                    <td>0.78</td>
                                </tr>
                                <tr>
                                    <td>Moving Avg (24h)</td>
                                    <td>19.8</td>
                                    <td>27.5</td>
                                    <td>0.82</td>
                                </tr>
                                <tr>
                                    <td>Exp Smoothing</td>
                                    <td>18.2</td>
                                    <td>25.1</td>
                                    <td>0.84</td>
                                </tr>
                                <tr>
                                    <td>Linear (lag 1h)</td>
                                    <td>15.3</td>
                                    <td>21.8</td>
                                    <td>0.88</td>
                                </tr>
                                <tr style="background: rgba(59, 130, 246, 0.1);">
                                    <td><strong>XGBoost (æˆ‘ä»¬çš„)</strong></td>
                                    <td><strong>12.5</strong></td>
                                    <td><strong>18.3</strong></td>
                                    <td><strong>0.92</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Comparison Chart -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">MAE å¯¹æ¯”</h3>
                        <div id="baselineChart" class="chart-container"></div>
                    </div>

                    <!-- Ablation Study -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">æ¶ˆèå®éªŒç»“æœ</h3>
                        <p class="text-gray-400 text-sm mb-4">é€šè¿‡ç§»é™¤ä¸åŒç±»åˆ«çš„ç‰¹å¾ï¼Œè¯„ä¼°å…¶å¯¹æ¨¡å‹æ€§èƒ½çš„è´¡çŒ®</p>
                        <div id="ablationChart" class="chart-container" style="height: 350px;"></div>
                    </div>
                </div>
            </div>

            <!-- Tab 6: Historical Validation -->
            <div id="tab-validation" class="tab-content">
                <div class="grid grid-cols-1 gap-6">
                    <!-- Prediction vs Actual -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">é¢„æµ‹å€¼ vs å®é™…å€¼å¯¹æ¯”ï¼ˆ1å°æ—¶é¢„æµ‹æ¨¡å‹ï¼‰</h3>
                        <p class="text-sm text-gray-400 mb-4">æ­¤å›¾å±•ç¤º1å°æ—¶é¢„æµ‹æ¨¡å‹åœ¨æµ‹è¯•é›†ä¸Šçš„è¡¨ç°ã€‚ç”±äºçŸ­æœŸé¢„æµ‹å‡†ç¡®ç‡è¾ƒé«˜ï¼ˆRÂ²=0.86ï¼‰ï¼Œé¢„æµ‹æ›²çº¿ä¸å®é™…æ›²çº¿è¾ƒä¸ºæ¥è¿‘ã€‚</p>
                        <div id="validationChart" class="chart-container" style="height: 400px;"></div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Error Distribution -->
                        <div class="glass-card p-6">
                            <h3 class="section-title">è¯¯å·®åˆ†å¸ƒ</h3>
                            <div id="errorDistChart" class="chart-container"></div>
                        </div>

                        <!-- Accuracy by Scenario -->
                        <div class="glass-card p-6">
                            <h3 class="section-title">åˆ†åœºæ™¯å‡†ç¡®ç‡</h3>
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>åœºæ™¯</th>
                                        <th>MAE</th>
                                        <th>æ ·æœ¬æ•°</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td>å·¥ä½œæ—¥</td><td>12.1</td><td>~65%</td></tr>
                                    <tr><td>å‘¨æœ«</td><td>13.2</td><td>~35%</td></tr>
                                    <tr><td>æ™´å¤©</td><td>11.8</td><td>~70%</td></tr>
                                    <tr><td>é›¨å¤©</td><td>14.5</td><td>~30%</td></tr>
                                    <tr><td>AQI<50 (ä¼˜)</td><td>8.5</td><td>~40%</td></tr>
                                    <tr><td>AQI 50-100 (è‰¯)</td><td>12.3</td><td>~45%</td></tr>
                                    <tr><td>AQI>100 (æ±¡æŸ“)</td><td>18.7</td><td>~15%</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 7: Model Explainability -->
            <div id="tab-explainability" class="tab-content">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

                    <!-- Overview -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">æ¨¡å‹å¯è§£é‡Šæ€§ï¼šä¸ºä»€ä¹ˆè¿™äº›å˜é‡èƒ½é¢„æµ‹ AQIï¼Ÿ</h3>
                        <p class="text-gray-400 mb-4">
                            æœºå™¨å­¦ä¹ æ¨¡å‹çš„"é»‘ç®±"ç‰¹æ€§å¸¸å¸¸è®©äººéš¾ä»¥ç†è§£é¢„æµ‹ä¾æ®ã€‚æœ¬èŠ‚ä»<strong class="text-white">ç‰©ç†æœºåˆ¶</strong>å’Œ<strong class="text-white">ç»Ÿè®¡å…³ç³»</strong>ä¸¤ä¸ªè§’åº¦ï¼Œ
                            è§£é‡Šæ¯ä¸ªå…³é”®ç‰¹å¾å¦‚ä½•å½±å“ AQI é¢„æµ‹ç»“æœï¼Œå¸®åŠ©æ‚¨ç†è§£æ¨¡å‹çš„å†³ç­–é€»è¾‘ã€‚
                        </p>
                        <div class="p-4 rounded-xl" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2);">
                            <div class="font-medium text-purple-400 mb-2">æ ¸å¿ƒå‘ç° (v4 æ¨¡å‹ - æ–¹æ³•è®ºæ­£ç¡® + å¯è§£é‡Šæ€§ä¼˜å…ˆ)</div>
                            <p class="text-sm text-gray-400">
                                æ¨¡å‹æœ€ä¾èµ–çš„æ˜¯<strong class="text-white">å½“å‰ AQI</strong>ï¼ˆè´¡çŒ® 64.6%ï¼‰å’Œ<strong class="text-white">PM10 æµ“åº¦</strong>ï¼ˆ20.4%ï¼‰ï¼Œè¿™ç¬¦åˆç©ºæ°”è´¨é‡çš„<strong class="text-white">æ—¶é—´æƒ¯æ€§</strong>è§„å¾‹ã€‚
                                åŒæ—¶å‘ç°<strong class="text-white">æ‰¬å·ç‰¹æœ‰è§„å¾‹</strong>ï¼šæ¹¿åº¦ä¸ AQI <strong class="text-yellow-400">è´Ÿç›¸å…³</strong>ï¼ˆé«˜æ¹¿åº¦ä¼´éšé™é›¨æ¸…é™¤æ±¡æŸ“ç‰©ï¼‰ï¼Œæ—¥æ¸©å·®ä¸ AQI <strong class="text-yellow-400">æ­£ç›¸å…³</strong>ï¼ˆæ™´æœ—å¤©æ°”ä¸åˆ©æ‰©æ•£ï¼‰ã€‚
                                <strong class="text-green-400">æ¯ä¸ªç‰¹å¾éƒ½æœ‰æ˜ç¡®çš„ç‰©ç†æ„ä¹‰</strong>ï¼Œæ¨¡å‹å¯è§£é‡Šæ€§å¼ºã€‚
                            </p>
                        </div>
                    </div>

                    <!-- Top Features Explanation -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">å…³é”®ç‰¹å¾çš„ç‰©ç†æ„ä¹‰ä¸å½±å“æœºåˆ¶</h3>
                        <div class="space-y-6">

                            <!-- AQI Lag (å†å²æœ€è¿‘å€¼) -->
                            <div class="p-5 rounded-xl" style="background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.2);">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 rounded-lg bg-blue-500/30 flex items-center justify-center text-blue-400 font-bold">1</div>
                                    <div>
                                        <div class="font-medium text-blue-400">1h å‰ AQI (AQI_lag_1h)</div>
                                        <div class="text-xs text-gray-500">æ—¶é—´æƒ¯æ€§ | é‡è¦æ€§: â˜…â˜…â˜…â˜…â˜… (64.6%)</div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">ç‰©ç†æœºåˆ¶</div>
                                        <p class="text-sm text-gray-400">
                                            ç©ºæ°”è´¨é‡å…·æœ‰<strong class="text-white">å¼ºæ—¶é—´è¿ç»­æ€§</strong>ã€‚æ±¡æŸ“ç‰©çš„ç´¯ç§¯å’Œæ¶ˆæ•£æ˜¯ä¸€ä¸ªæ¸è¿›è¿‡ç¨‹ï¼Œ
                                            ä¸ä¼šç¬é—´å‰§å˜ã€‚<strong class="text-yellow-400">1 å°æ—¶å‰</strong>çš„ AQI å€¼æ˜¯é¢„æµ‹ä¸‹ 1 å°æ—¶æœ€é‡è¦çš„ä¾æ®ã€‚
                                        </p>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">æ¨¡å‹å­¦åˆ°çš„è§„å¾‹</div>
                                        <ul class="text-sm text-gray-400 space-y-1">
                                            <li>â€¢ 1h å‰ AQI é«˜ â†’ ä¸‹ 1h å¤§æ¦‚ç‡ç»´æŒé«˜ä½</li>
                                            <li>â€¢ ä¸ç›®æ ‡ç›¸å…³ç³»æ•°é«˜è¾¾ 0.97</li>
                                            <li>â€¢ è¿™å°±æ˜¯æ—¶é—´åºåˆ—é¢„æµ‹çš„"æƒ¯æ€§"</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="mt-3 p-3 rounded-lg" style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3);">
                                    <div class="text-xs text-red-300">
                                        <strong>âš ï¸ æ³¨æ„ï¼š</strong>è¿™æ˜¯<strong>1 å°æ—¶å‰</strong>çš„å†å²å€¼ï¼Œ<strong>ä¸æ˜¯ç›®æ ‡å˜é‡æœ¬èº«</strong>ï¼
                                        é¢„æµ‹ 1h åæ—¶ç”¨ lag_1hï¼Œé¢„æµ‹ 24h åæ—¶ç”¨ lag_24hã€‚è¿™æ˜¯æ ‡å‡†çš„æ—¶åºé¢„æµ‹æ–¹æ³•ï¼Œä¸å­˜åœ¨æ•°æ®æ³„æ¼ã€‚
                                    </div>
                                </div>
                            </div>

                            <!-- PM10 -->
                            <div class="p-5 rounded-xl" style="background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2);">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 rounded-lg bg-green-500/30 flex items-center justify-center text-green-400 font-bold">2</div>
                                    <div>
                                        <div class="font-medium text-green-400">PM10 æµ“åº¦</div>
                                        <div class="text-xs text-gray-500">ç²—é¢—ç²’ç‰© | é‡è¦æ€§: â˜…â˜…â˜…â˜…â˜† (20.4%)</div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">ç‰©ç†æœºåˆ¶</div>
                                        <p class="text-sm text-gray-400">
                                            PM10 æ˜¯<strong class="text-white">ç©ºæ°”è´¨é‡æŒ‡æ•°(AQI)çš„ç›´æ¥ç»„æˆéƒ¨åˆ†</strong>ã€‚
                                            åŒ…å«ç›´å¾„å°äº10å¾®ç±³çš„é¢—ç²’ç‰©ï¼Œæ¥æºåŒ…æ‹¬æ‰¬å°˜ã€å»ºç­‘æ–½å·¥ã€å·¥ä¸šæ’æ”¾ç­‰ã€‚
                                            ä¸ AQI é«˜åº¦æ­£ç›¸å…³ï¼ˆç›¸å…³ç³»æ•° 0.90ï¼‰ã€‚
                                        </p>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">æ¨¡å‹å­¦åˆ°çš„è§„å¾‹</div>
                                        <ul class="text-sm text-gray-400 space-y-1">
                                            <li>â€¢ PM10 é«˜ â†’ AQI é«˜ï¼ˆç›´æ¥æˆåˆ†ï¼‰</li>
                                            <li>â€¢ æ˜¥å­£æ²™å°˜å¤©æ°”æ—¶ PM10 è´¡çŒ®æ›´å¤§</li>
                                            <li>â€¢ ä¸ PM2.5 çš„æ¯”å€¼åæ˜ æ±¡æŸ“ç±»å‹</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- Humidity - Yangzhou's unique finding -->
                            <div class="p-5 rounded-xl" style="background: rgba(245, 158, 11, 0.1); border: 1px solid rgba(245, 158, 11, 0.2);">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 rounded-lg bg-yellow-500/30 flex items-center justify-center text-yellow-400 font-bold">3</div>
                                    <div>
                                        <div class="font-medium text-yellow-400">æ¹¿åº¦ (humidity) âš ï¸ æ‰¬å·ç‰¹æœ‰è§„å¾‹</div>
                                        <div class="text-xs text-gray-500">æ°”è±¡-åŒ–å­¦ | é‡è¦æ€§: â˜…â˜…â˜†â˜†â˜† (0.6%) | <span class="text-red-400">è´Ÿç›¸å…³</span></div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">æ•™ç§‘ä¹¦é¢„æœŸ vs å®é™…å‘ç°</div>
                                        <p class="text-sm text-gray-400">
                                            <strong class="text-red-400">æ•™ç§‘ä¹¦ï¼š</strong>é«˜æ¹¿åº¦ä¿ƒè¿›äºŒæ¬¡é¢—ç²’ç‰©ç”Ÿæˆ â†’ æ­£ç›¸å…³<br>
                                            <strong class="text-green-400">å®é™…æ•°æ®ï¼š</strong>é«˜æ¹¿åº¦æ—¶ AQI <strong class="text-white">æ›´ä½</strong> â†’ è´Ÿç›¸å…³<br>
                                            <span class="text-xs">å¹²ç‡¥(&lt;40%): AQI=68 | é«˜æ¹¿(&gt;80%): AQI=49</span>
                                        </p>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">æ‰¬å·çš„ç‰¹æ®Šæƒ…å†µ</div>
                                        <ul class="text-sm text-gray-400 space-y-1">
                                            <li>â€¢ æ‰¬å·ä½äºé•¿ä¸‰è§’ï¼Œé«˜æ¹¿åº¦å¸¸ä¼´éš<strong class="text-white">é™é›¨</strong></li>
                                            <li>â€¢ é™é›¨å†²åˆ·æ±¡æŸ“ç‰©ï¼Œä½¿ AQI ä¸‹é™</li>
                                            <li>â€¢ é«˜æ¹¿åº¦ä¹Ÿæ„å‘³ç€<strong class="text-white">æµ·æ´‹æ€§æ°”å›¢</strong>å½±å“</li>
                                            <li class="text-yellow-300">â€¢ è¿™æ˜¯æ•°æ®é©±åŠ¨çš„å‘ç°ï¼Œè€Œéå¥—ç”¨æ•™ç§‘ä¹¦ï¼</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- Temperature Daily Range - Yangzhou's unique finding -->
                            <div class="p-5 rounded-xl" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2);">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 rounded-lg bg-purple-500/30 flex items-center justify-center text-purple-400 font-bold">4</div>
                                    <div>
                                        <div class="font-medium text-purple-400">æ—¥æ¸©å·® (temp_daily_range) âš ï¸ æ‰¬å·ç‰¹æœ‰è§„å¾‹</div>
                                        <div class="text-xs text-gray-500">æ°”è±¡-æ‰©æ•£ | é‡è¦æ€§: â˜…â˜…â˜†â˜†â˜† (0.8%) | <span class="text-red-400">æ­£ç›¸å…³</span></div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">æ•™ç§‘ä¹¦é¢„æœŸ vs å®é™…å‘ç°</div>
                                        <p class="text-sm text-gray-400">
                                            <strong class="text-red-400">æ•™ç§‘ä¹¦ï¼š</strong>æ—¥æ¸©å·®å° â†’ é€†æ¸©å±‚ â†’ AQIé«˜ï¼ˆè´Ÿç›¸å…³ï¼‰<br>
                                            <strong class="text-green-400">å®é™…æ•°æ®ï¼š</strong>æ—¥æ¸©å·®å¤§ â†’ AQI <strong class="text-white">æ›´é«˜</strong>ï¼ˆæ­£ç›¸å…³ï¼‰<br>
                                            <span class="text-xs">ç›¸å…³ç³»æ•°: +0.46</span>
                                        </p>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">æ‰¬å·çš„ç‰¹æ®Šæƒ…å†µ</div>
                                        <ul class="text-sm text-gray-400 space-y-1">
                                            <li>â€¢ æ—¥æ¸©å·®å¤§ = <strong class="text-white">æ™´æœ—å¤©æ°”</strong></li>
                                            <li>â€¢ æ™´æœ—å¤©æ°” = <strong class="text-white">é«˜å‹æ§åˆ¶</strong></li>
                                            <li>â€¢ é«˜å‹æ§åˆ¶ = å¤§æ°”ç¨³å®š = ä¸åˆ©äºæ‰©æ•£</li>
                                            <li class="text-yellow-300">â€¢ ä¸åŒ—æ–¹åŸå¸‚"é€†æ¸©å±‚"å‡è®¾ä¸åŒï¼</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- Wind Speed & Heating Season -->
                            <div class="p-5 rounded-xl" style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.2);">
                                <div class="flex items-center gap-3 mb-3">
                                    <div class="w-10 h-10 rounded-lg bg-red-500/30 flex items-center justify-center text-red-400 font-bold">5</div>
                                    <div>
                                        <div class="font-medium text-red-400">é£é€Ÿ & ä¾›æš–å­£</div>
                                        <div class="text-xs text-gray-500">æ°”è±¡-æ‰©æ•£ & æ—¶é—´-æ’æ”¾ | é‡è¦æ€§: â˜…â˜…â˜†â˜†â˜†</div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">é£é€Ÿ (0.6%) - ç¬¦åˆé¢„æœŸ</div>
                                        <ul class="text-sm text-gray-400 space-y-1">
                                            <li>â€¢ ä¸ AQI <strong class="text-green-400">è´Ÿç›¸å…³</strong> âœ“</li>
                                            <li>â€¢ é«˜é£é€Ÿä¿ƒè¿›æ±¡æŸ“ç‰©æ‰©æ•£</li>
                                            <li>â€¢ ä½é£é€Ÿ(&lt;2m/s)æ—¶æ±¡æŸ“å®¹æ˜“ç´¯ç§¯</li>
                                        </ul>
                                    </div>
                                    <div>
                                        <div class="text-sm font-medium text-gray-300 mb-2">ä¾›æš–å­£ (0.7%) - ç¬¦åˆé¢„æœŸ</div>
                                        <ul class="text-sm text-gray-400 space-y-1">
                                            <li>â€¢ ä¸ AQI <strong class="text-green-400">æ­£ç›¸å…³</strong> âœ“</li>
                                            <li>â€¢ 11æœˆè‡³3æœˆä¸ºä¾›æš–å­£</li>
                                            <li>â€¢ åŒ—æ–¹ä¾›æš–æ’æ”¾é€šè¿‡åŒºåŸŸä¼ è¾“å½±å“æ‰¬å·</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <!-- Feature Interaction -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">ç‰¹å¾ä¹‹é—´çš„ååŒæ•ˆåº”</h3>
                        <p class="text-sm text-gray-400 mb-4">æ¨¡å‹èƒ½å¤Ÿå­¦ä¹ ç‰¹å¾ä¹‹é—´å¤æ‚çš„äº¤äº’å…³ç³»ï¼š</p>
                        <div class="space-y-3">
                            <div class="p-3 rounded-lg" style="background: rgba(59, 130, 246, 0.1);">
                                <div class="text-sm"><strong class="text-blue-400">å½“å‰ AQI é«˜ + PM10 é«˜ + ä½é£é€Ÿ</strong></div>
                                <div class="text-xs text-gray-400 mt-1">â†’ å…¸å‹æ±¡æŸ“ç´¯ç§¯æ¡ä»¶ï¼Œé¢„æµ‹ AQI å°†ç»§ç»­ç»´æŒé«˜ä½æˆ–ä¸Šå‡</div>
                            </div>
                            <div class="p-3 rounded-lg" style="background: rgba(16, 185, 129, 0.1);">
                                <div class="text-sm"><strong class="text-green-400">é«˜æ¹¿åº¦ + æ°”å‹ä¸‹é™</strong></div>
                                <div class="text-xs text-gray-400 mt-1">â†’ é™é›¨å¤©æ°”å³å°†åˆ°æ¥ï¼ŒAQI é¢„è®¡ä¸‹é™ï¼ˆæ‰¬å·ç‰¹æœ‰è§„å¾‹ï¼‰</div>
                            </div>
                            <div class="p-3 rounded-lg" style="background: rgba(245, 158, 11, 0.1);">
                                <div class="text-sm"><strong class="text-yellow-400">æ—¥æ¸©å·®å¤§ + é«˜æ°”å‹ + ä¾›æš–å­£</strong></div>
                                <div class="text-xs text-gray-400 mt-1">â†’ å†¬å­£æ™´æœ—é«˜å‹å¤©æ°”ï¼Œä¸åˆ©äºæ‰©æ•£ï¼ŒAQI é¢„è®¡è¾ƒé«˜</div>
                            </div>
                            <div class="p-3 rounded-lg" style="background: rgba(139, 92, 246, 0.1);">
                                <div class="text-sm"><strong class="text-purple-400">é«˜é£é€Ÿ + éä¾›æš–å­£ + ä½æ¹¿åº¦</strong></div>
                                <div class="text-xs text-gray-400 mt-1">â†’ è‰¯å¥½æ‰©æ•£æ¡ä»¶ï¼Œä½†æ³¨æ„æ‰¬å°˜å¤©æ°”å¯èƒ½å¯¼è‡´ PM10 ä¸Šå‡</div>
                            </div>
                        </div>
                    </div>

                    <!-- What Model Cannot Capture -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">æ¨¡å‹æ— æ³•æ•æ‰çš„å› ç´ </h3>
                        <p class="text-sm text-gray-400 mb-4">ç†è§£æ¨¡å‹çš„å±€é™æ€§ä¸ç†è§£å…¶èƒ½åŠ›åŒæ ·é‡è¦ï¼š</p>
                        <div class="space-y-3">
                            <div class="p-3 rounded-lg border-l-4 border-red-500" style="background: rgba(239, 68, 68, 0.1);">
                                <div class="text-sm font-medium text-red-400">çªå‘äº‹ä»¶</div>
                                <div class="text-xs text-gray-400 mt-1">å·¥å‚æ„å¤–æ’æ”¾ã€ç«ç¾ã€äº¤é€šäº‹æ•…ç­‰æ— æ³•ä»å†å²æ•°æ®é¢„æµ‹</div>
                            </div>
                            <div class="p-3 rounded-lg border-l-4 border-yellow-500" style="background: rgba(245, 158, 11, 0.1);">
                                <div class="text-sm font-medium text-yellow-400">æ”¿ç­–å¹²é¢„</div>
                                <div class="text-xs text-gray-400 mt-1">ä¸´æ—¶äº¤é€šç®¡åˆ¶ã€å·¥å‚é™äº§ç­‰æ”¿ç­–æªæ–½çš„å³æ—¶æ•ˆæœ</div>
                            </div>
                            <div class="p-3 rounded-lg border-l-4 border-blue-500" style="background: rgba(59, 130, 246, 0.1);">
                                <div class="text-sm font-medium text-blue-400">è·¨åŒºåŸŸä¼ è¾“ç»†èŠ‚</div>
                                <div class="text-xs text-gray-400 mt-1">è™½æœ‰ä¸Šæ¸¸åŸå¸‚æ•°æ®ï¼Œä½†ç²¾ç¡®çš„æ±¡æŸ“ç‰©ä¼ è¾“è·¯å¾„éš¾ä»¥å»ºæ¨¡</div>
                            </div>
                            <div class="p-3 rounded-lg border-l-4 border-purple-500" style="background: rgba(139, 92, 246, 0.1);">
                                <div class="text-sm font-medium text-purple-400">æç«¯å¤©æ°”</div>
                                <div class="text-xs text-gray-400 mt-1">æ²™å°˜æš´ã€å°é£ç­‰ç½•è§äº‹ä»¶åœ¨è®­ç»ƒæ•°æ®ä¸­æ ·æœ¬ä¸è¶³</div>
                            </div>
                        </div>
                    </div>

                    <!-- SHAP-like Explanation -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">å•æ¬¡é¢„æµ‹çš„ç‰¹å¾è´¡çŒ®åˆ†æï¼ˆç¤ºä¾‹ï¼‰</h3>
                        <p class="text-sm text-gray-400 mb-4">
                            ä»¥ä¸‹å±•ç¤ºæŸä¸€æ—¶åˆ»é¢„æµ‹çš„ç‰¹å¾è´¡çŒ®åˆ†è§£ï¼Œç±»ä¼¼ SHAP å€¼åˆ†æã€‚æ­£å€¼è¡¨ç¤ºè¯¥ç‰¹å¾ä½¿é¢„æµ‹å€¼ä¸Šå‡ï¼Œè´Ÿå€¼è¡¨ç¤ºä¸‹é™ï¼š
                        </p>
                        <div class="p-4 rounded-xl" style="background: rgba(26, 26, 36, 0.8);">
                            <div class="text-center mb-4">
                                <span class="text-gray-400">åŸºå‡†å€¼</span>
                                <span class="text-2xl font-bold mx-2">59</span>
                                <span class="text-gray-400">â†’ é¢„æµ‹å€¼</span>
                                <span class="text-2xl font-bold mx-2 text-orange-400">78</span>
                            </div>
                            <div class="space-y-2">
                                <div class="flex items-center gap-2">
                                    <span class="w-44 text-sm text-gray-400">AQI_lag_1h = 72</span>
                                    <div class="flex-1 h-6 rounded relative overflow-hidden" style="background: rgba(255,255,255,0.1);">
                                        <div class="absolute right-1/2 h-full bg-red-500/60" style="width: 50%;"></div>
                                    </div>
                                    <span class="text-red-400 text-sm w-16 text-right">+12.3</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-44 text-sm text-gray-400">PM10 = 85 Î¼g/mÂ³</span>
                                    <div class="flex-1 h-6 rounded relative overflow-hidden" style="background: rgba(255,255,255,0.1);">
                                        <div class="absolute right-1/2 h-full bg-red-500/60" style="width: 25%;"></div>
                                    </div>
                                    <span class="text-red-400 text-sm w-16 text-right">+4.8</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-44 text-sm text-gray-400">humidity = 85%</span>
                                    <div class="flex-1 h-6 rounded relative overflow-hidden" style="background: rgba(255,255,255,0.1);">
                                        <div class="absolute left-1/2 h-full bg-green-500/60" style="width: 10%;"></div>
                                    </div>
                                    <span class="text-green-400 text-sm w-16 text-right">-2.1</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-44 text-sm text-gray-400">AQI_trend_24h = +15</span>
                                    <div class="flex-1 h-6 rounded relative overflow-hidden" style="background: rgba(255,255,255,0.1);">
                                        <div class="absolute right-1/2 h-full bg-red-500/60" style="width: 12%;"></div>
                                    </div>
                                    <span class="text-red-400 text-sm w-16 text-right">+2.5</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-44 text-sm text-gray-400">wind_speed = 4.5 m/s</span>
                                    <div class="flex-1 h-6 rounded relative overflow-hidden" style="background: rgba(255,255,255,0.1);">
                                        <div class="absolute left-1/2 h-full bg-green-500/60" style="width: 8%;"></div>
                                    </div>
                                    <span class="text-green-400 text-sm w-16 text-right">-1.8</span>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4 p-3 rounded-lg" style="background: rgba(59, 130, 246, 0.1);">
                            <div class="text-sm text-gray-400">
                                <strong class="text-blue-400">è§£è¯»ï¼š</strong>è¯¥æ—¶åˆ»é¢„æµ‹ AQI=78ï¼Œé«˜äºåŸºå‡†å€¼ 59ã€‚ä¸»è¦åŸå› æ˜¯ï¼š
                                1å°æ—¶å‰ AQI å·²ç»è¾ƒé«˜ï¼ˆ+12.3ï¼Œæ—¶é—´æƒ¯æ€§ï¼‰ã€PM10 æµ“åº¦åé«˜ï¼ˆ+4.8ï¼‰ã€
                                è¿‡å»24å°æ—¶å‘ˆä¸Šå‡è¶‹åŠ¿ï¼ˆ+2.5ï¼‰ã€‚
                                ä½†é«˜æ¹¿åº¦æœ‰åŠ©äºé¢—ç²’ç‰©æ²‰é™ï¼ˆ-2.1ï¼‰ï¼Œè¾ƒå¤§é£é€Ÿä¿ƒè¿›æ‰©æ•£ï¼ˆ-1.8ï¼‰ï¼Œéƒ¨åˆ†æŠµæ¶ˆäº†æ±¡æŸ“ã€‚
                            </div>
                        </div>
                    </div>

                    <!-- Key Takeaways -->
                    <div class="glass-card p-6 lg:col-span-2">
                        <h3 class="section-title">æ€»ç»“ï¼šæ¨¡å‹çš„å†³ç­–é€»è¾‘</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="p-4 rounded-xl text-center" style="background: rgba(59, 130, 246, 0.1);">
                                <div class="text-3xl mb-2">â±ï¸</div>
                                <div class="font-medium mb-1">æ—¶é—´æƒ¯æ€§ä¸»å¯¼</div>
                                <p class="text-xs text-gray-400">å†å² AQI è´¡çŒ® 64.6%ï¼Œç©ºæ°”è´¨é‡å˜åŒ–æ˜¯æ¸è¿›è¿‡ç¨‹ï¼ŒçŸ­æœŸå†…å»¶ç»­å½“å‰çŠ¶æ€</p>
                            </div>
                            <div class="p-4 rounded-xl text-center" style="background: rgba(16, 185, 129, 0.1);">
                                <div class="text-3xl mb-2">ğŸ­</div>
                                <div class="font-medium mb-1">æ±¡æŸ“ç‰©æµ“åº¦</div>
                                <p class="text-xs text-gray-400">PM10/PM2.5 æ˜¯ AQI çš„ç›´æ¥ç»„æˆéƒ¨åˆ†ï¼Œæµ“åº¦è¶Šé«˜ AQI è¶Šé«˜</p>
                            </div>
                            <div class="p-4 rounded-xl text-center" style="background: rgba(245, 158, 11, 0.1);">
                                <div class="text-3xl mb-2">ğŸŒ¤ï¸</div>
                                <div class="font-medium mb-1">æ°”è±¡æ¡ä»¶è°ƒæ§</div>
                                <p class="text-xs text-gray-400">é£é€Ÿä¿ƒè¿›æ‰©æ•£ã€æ¹¿åº¦å½±å“æ²‰é™ã€æ°”å‹åæ˜ å¤§æ°”ç¨³å®šæ€§</p>
                            </div>
                        </div>
                        <div class="mt-4 p-4 rounded-xl" style="background: rgba(139, 92, 246, 0.1); border: 1px solid rgba(139, 92, 246, 0.2);">
                            <div class="font-medium text-purple-400 mb-2">æ‰¬å·ç‰¹æœ‰å‘ç°</div>
                            <p class="text-sm text-gray-400">
                                <strong class="text-white">æ¹¿åº¦ä¸ AQI è´Ÿç›¸å…³</strong>ï¼šé«˜æ¹¿åº¦é€šå¸¸ä¼´éšé™é›¨ï¼Œæœ‰åŠ©äºæ¸…é™¤æ±¡æŸ“ç‰©ã€‚
                                <strong class="text-white">æ—¥æ¸©å·®ä¸ AQI æ­£ç›¸å…³</strong>ï¼šæ¸©å·®å¤§æ„å‘³ç€æ™´æœ—å¤©æ°”ï¼Œé«˜å‹æ§åˆ¶ä¸‹å¤§æ°”ç¨³å®šï¼Œä¸åˆ©äºæ±¡æŸ“ç‰©æ‰©æ•£ã€‚
                            </p>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Tab 8: Methodology -->
            <div id="tab-methodology" class="tab-content">
                <div class="glass-card p-8">
                    <h2 class="text-2xl font-bold mb-8">æ‰¬å·ç©ºæ°”è´¨é‡é¢„æµ‹æ–¹æ³•è®º</h2>

                    <div class="methodology-section">
                        <h3>1. æ‘˜è¦</h3>
                        <p>æœ¬é¡¹ç›®æ„å»ºäº†ä¸€ä¸ª<strong>æ–¹æ³•è®ºæ­£ç¡®</strong>ä¸”<strong>å¯è§£é‡Š</strong>çš„ç©ºæ°”è´¨é‡é¢„æµ‹ç³»ç»Ÿã€‚ä½¿ç”¨ 22 ä¸ªæœ‰æ˜ç¡®ç‰©ç†æ„ä¹‰çš„ç‰¹å¾ï¼Œä¸ºä¸åŒé¢„æµ‹æ—¶é—´è·¨åº¦ï¼ˆ1h/6h/12h/24hï¼‰è®­ç»ƒç‹¬ç«‹æ¨¡å‹ã€‚<strong>1 å°æ—¶é¢„æµ‹</strong>è¾¾åˆ° MAE=6.03ã€RÂ²=0.86ã€‚åŒæ—¶å‘ç°äº†<strong>æ‰¬å·ç‰¹æœ‰çš„è§„å¾‹</strong>ï¼šæ¹¿åº¦ä¸ AQI è´Ÿç›¸å…³ï¼ˆé«˜æ¹¿åº¦ä¼´éšé™é›¨æ¸…é™¤æ±¡æŸ“ç‰©ï¼‰ï¼Œæ—¥æ¸©å·®ä¸ AQI æ­£ç›¸å…³ï¼ˆæ™´æœ—å¤©æ°”ä¸åˆ©æ‰©æ•£ï¼‰ã€‚</p>
                    </div>

                    <div class="methodology-section">
                        <h3>2. é—®é¢˜å®šä¹‰</h3>
                        <p>ç»™å®šå†å²ç©ºæ°”è´¨é‡æ•°æ®å’Œæ°”è±¡æ•°æ®ï¼Œé¢„æµ‹æœªæ¥ 1-24 å°æ—¶çš„ AQI å€¼ã€‚è¿™æ˜¯ä¸€ä¸ªæ—¶é—´åºåˆ—å›å½’é—®é¢˜ï¼Œéœ€è¦è€ƒè™‘æ—¶é—´ä¾èµ–æ€§ã€å­£èŠ‚æ€§å‘¨æœŸã€æ°”è±¡å½±å“ç­‰å› ç´ ã€‚</p>
                    </div>

                    <div class="methodology-section">
                        <h3>3. æ•°æ®æ¥æº</h3>
                        <p><strong>ç©ºæ°”è´¨é‡æ•°æ®ï¼š</strong>quotsoft.net æä¾›çš„ä¸­å›½åŸå¸‚å†å² AQI æ•°æ®ï¼ŒWAQI æä¾›çš„å®æ—¶ AQI æ•°æ®ã€‚<br>
                        <strong>æ°”è±¡æ•°æ®ï¼š</strong>Open-Meteo æä¾›çš„å†å²å°æ—¶çº§å¤©æ°”æ•°æ®ï¼Œé«˜å¾·åœ°å›¾æä¾›çš„å®æ—¶å¤©æ°”æ•°æ®ã€‚<br>
                        <strong>è¾…åŠ©æ•°æ®ï¼š</strong>ä¸­å›½æ³•å®šèŠ‚å‡æ—¥æ•°æ®ï¼Œç”¨äºæ„å»ºå·¥ä½œæ—¥/å‡æ—¥ç‰¹å¾ã€‚</p>
                    </div>

                    <div class="methodology-section">
                        <h3>4. æ–¹æ³•è®º</h3>
                        <p><strong>æ•°æ®æ¸…æ´—ï¼š</strong>å¤„ç†ç¼ºå¤±å€¼ï¼ˆçº¿æ€§æ’å€¼ï¼‰ã€å¼‚å¸¸å€¼æ£€æµ‹ï¼ˆIQR æ–¹æ³•ï¼‰ã€æ—¶é—´å¯¹é½ï¼ˆç»Ÿä¸€åˆ°å°æ—¶çº§ï¼‰ã€‚<br>
                        <strong>ç‰¹å¾å·¥ç¨‹ï¼š</strong>æ„å»ºæ—¶é—´ç‰¹å¾ï¼ˆå‘¨æœŸç¼–ç ï¼‰ã€æ»åç‰¹å¾ï¼ˆ1-48å°æ—¶ï¼‰ã€æ»šåŠ¨ç»Ÿè®¡ç‰¹å¾ï¼ˆå‡å€¼ã€æ ‡å‡†å·®ï¼‰ã€æ°”è±¡äº¤äº’ç‰¹å¾ã€ä»£ç†å˜é‡ï¼ˆé€†æ¸©å±‚ã€ç§¸ç§†ç„šçƒ§ï¼‰ã€‚<br>
                        <strong>ç‰¹å¾ç­›é€‰ï¼š</strong>åŸºäºç›¸å…³æ€§ã€VIFã€ç‰¹å¾é‡è¦æ€§çš„å¤šé˜¶æ®µç­›é€‰ã€‚<br>
                        <strong>æ¨¡å‹é€‰æ‹©ï¼š</strong>XGBoost æ¢¯åº¦æå‡æ ‘ï¼Œä½¿ç”¨æ—¶é—´åºåˆ—äº¤å‰éªŒè¯ã€‚</p>
                    </div>

                    <div class="methodology-section">
                        <h3>5. ç»“æœ</h3>
                        <p>æ¨¡å‹åœ¨ 5 æŠ˜æ—¶é—´åºåˆ—äº¤å‰éªŒè¯ä¸­çš„è¡¨ç°ï¼š<br>
                        <strong>1h é¢„æµ‹</strong>ï¼šMAE=6.03, RÂ²=0.86ï¼ˆä¸»è¦ä¾èµ–æ—¶é—´æƒ¯æ€§ï¼‰<br>
                        <strong>6h é¢„æµ‹</strong>ï¼šMAE=14.44, RÂ²=0.41ï¼ˆæƒ¯æ€§å‡å¼±ï¼Œæ°”è±¡å› ç´ å¼€å§‹é‡è¦ï¼‰<br>
                        <strong>24h é¢„æµ‹</strong>ï¼šMAE=23.24, RÂ²=-0.35ï¼ˆé¢„æµ‹å›°éš¾ï¼Œæ¥è¿‘éšæœºï¼‰<br>
                        è¿™æ˜¯<strong>è¯šå®çš„ç»“æœ</strong>ï¼šæ²¡æœ‰ä½¿ç”¨é¢„æµ‹æ—¶åˆ»ä¸å¯çŸ¥çš„ä¿¡æ¯ï¼Œåæ˜ äº†çœŸå®çš„é¢„æµ‹éš¾åº¦ã€‚</p>
                    </div>

                    <div class="methodology-section">
                        <h3>6. è®¨è®º</h3>
                        <p><strong>å…³é”®å‘ç°ï¼š</strong><br>
                        1. <strong>æ—¶é—´æƒ¯æ€§</strong>ï¼šå½“å‰ AQI æ˜¯çŸ­æœŸé¢„æµ‹æœ€é‡è¦çš„ä¾æ®ï¼ˆè´¡çŒ® 65%ï¼‰ï¼Œä½†éšç€é¢„æµ‹æ—¶é—´å¢åŠ ï¼Œæƒ¯æ€§ç‰¹å¾çš„é‡è¦æ€§å¿«é€Ÿä¸‹é™ã€‚<br>
                        2. <strong>æ‰¬å·ç‰¹æœ‰è§„å¾‹</strong>ï¼šæ¹¿åº¦ä¸ AQI è´Ÿç›¸å…³ï¼ˆä¸åŒ—æ–¹åŸå¸‚ç›¸åï¼‰ï¼Œå› ä¸ºé«˜æ¹¿åº¦é€šå¸¸ä¼´éšé™é›¨/æµ·æ´‹æ°”å›¢ã€‚æ—¥æ¸©å·®ä¸ AQI æ­£ç›¸å…³ï¼Œå› ä¸ºæ™´æœ—å¤©æ°”=é«˜å‹æ§åˆ¶=ä¸åˆ©æ‰©æ•£ã€‚<br>
                        3. <strong>é¢„æµ‹å±€é™</strong>ï¼šåœ¨æ²¡æœ‰å¤©æ°”é¢„æŠ¥ç­‰å¤–éƒ¨ä¿¡æ¯çš„æƒ…å†µä¸‹ï¼Œ24 å°æ—¶é¢„æµ‹åŸºæœ¬ä¸å¯è¡Œï¼ˆRÂ² ä¸ºè´Ÿï¼‰ã€‚è¿™æ˜¯è¯šå®çš„ç»“è®ºã€‚<br>
                        4. <strong>å¯è§£é‡Šæ€§ä»·å€¼</strong>ï¼šæ¯ä¸ªç‰¹å¾éƒ½æœ‰æ˜ç¡®çš„ç‰©ç†æ„ä¹‰ï¼Œæ¨¡å‹çš„é¢„æµ‹ä¾æ®å¯ä»¥è¢«ç¯å¢ƒä¸“å®¶ç†è§£å’ŒéªŒè¯ã€‚</p>
                    </div>
                </div>
            </div>

            <!-- Tab 8: Limitations -->
            <div id="tab-limitations" class="tab-content">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Uncontrollable Factors -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">ä¸å¯æ§å› ç´ </h3>

                        <div class="limitation-card">
                            <h4>ğŸ­ å·¥ä¸šæ’æ”¾çªå‘äº‹ä»¶</h4>
                            <p>å·¥å‚æ„å¤–æ’æ”¾ã€è®¾å¤‡æ•…éšœç­‰çªå‘äº‹ä»¶æ— æ³•é¢„æµ‹ï¼Œå¯èƒ½å¯¼è‡´çŸ­æ—¶é—´å†… AQI å‰§çƒˆä¸Šå‡ã€‚</p>
                        </div>

                        <div class="limitation-card">
                            <h4>ğŸš— äº¤é€šç®¡åˆ¶å½±å“</h4>
                            <p>ä¸´æ—¶äº¤é€šç®¡åˆ¶ï¼ˆå¦‚é‡å¤§æ´»åŠ¨ã€äº‹æ•…ï¼‰ä¼šå½±å“è½¦è¾†æ’æ”¾ï¼Œä½†è¿™äº›ä¿¡æ¯éš¾ä»¥æå‰è·å–ã€‚</p>
                        </div>

                        <div class="limitation-card">
                            <h4>ğŸŒ¾ è·¨åŒºåŸŸæ±¡æŸ“ä¼ è¾“</h4>
                            <p>å‘¨è¾¹åŸå¸‚çš„æ±¡æŸ“ç‰©ä¼ è¾“ä¼šæ˜¾è‘—å½±å“æœ¬åœ°ç©ºæ°”è´¨é‡ï¼Œä½†ä¼ è¾“è·¯å¾„å’Œæ—¶é—´å—é£å‘é£é€Ÿå½±å“ï¼Œå­˜åœ¨è¾ƒå¤§ä¸ç¡®å®šæ€§ã€‚</p>
                        </div>

                        <div class="limitation-card">
                            <h4>ğŸ”¥ ç§¸ç§†ç„šçƒ§</h4>
                            <p>å†œæ‘ç§¸ç§†ç„šçƒ§æ˜¯ç§‹å­£ AQI é£™å‡çš„ä¸»è¦åŸå› ä¹‹ä¸€ï¼Œä½†ç„šçƒ§æ—¶é—´å’Œåœ°ç‚¹éš¾ä»¥é¢„æµ‹ã€‚</p>
                        </div>
                    </div>

                    <!-- Proxy Variables -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">ä»£ç†å˜é‡è¯´æ˜</h3>
                        <p class="text-gray-400 text-sm mb-4">ç”±äºéƒ¨åˆ†å½±å“å› ç´ æ— æ³•ç›´æ¥è§‚æµ‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ä»£ç†å˜é‡æ¥è¿‘ä¼¼ï¼š</p>

                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ä»£ç†å˜é‡</th>
                                    <th>è¿‘ä¼¼å› ç´ </th>
                                    <th>è®¡ç®—æ–¹å¼</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>æ—¥æ¸©å·®</td>
                                    <td>é€†æ¸©å±‚</td>
                                    <td>å½“å¤©æœ€é«˜æ¸©-æœ€ä½æ¸©</td>
                                </tr>
                                <tr>
                                    <td>ç§‹å­£æ ‡è®°</td>
                                    <td>ç§¸ç§†ç„šçƒ§</td>
                                    <td>9-11æœˆä¸º1ï¼Œå…¶ä»–ä¸º0</td>
                                </tr>
                                <tr>
                                    <td>æ˜¥èŠ‚æ ‡è®°</td>
                                    <td>çƒŸèŠ±ç‡ƒæ”¾</td>
                                    <td>æ˜¥èŠ‚å‰å15å¤©</td>
                                </tr>
                                <tr>
                                    <td>ä¾›æš–å­£æ ‡è®°</td>
                                    <td>ä¾›æš–æ’æ”¾</td>
                                    <td>11æœˆ-3æœˆä¸º1</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Model Failure Scenarios -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">æ¨¡å‹å¤±æ•ˆåœºæ™¯</h3>
                        <ul class="space-y-3 text-gray-400">
                            <li>â€¢ <strong>æç«¯å¤©æ°”äº‹ä»¶</strong>ï¼šæ²™å°˜æš´ã€æŒç»­é›¾éœ¾ç­‰æç«¯æƒ…å†µï¼Œå†å²æ•°æ®ç¨€å°‘ï¼Œæ¨¡å‹éš¾ä»¥å­¦ä¹ </li>
                            <li>â€¢ <strong>æ”¿ç­–å˜åŒ–</strong>ï¼šæ–°çš„ç¯ä¿æ”¿ç­–å®æ–½åï¼Œå†å²æ¨¡å¼å¯èƒ½ä¸å†é€‚ç”¨</li>
                            <li>â€¢ <strong>æ•°æ®æºå¼‚å¸¸</strong>ï¼šç›‘æµ‹ç«™æ•…éšœã€æ•°æ®ä¼ è¾“å»¶è¿Ÿä¼šå½±å“å®æ—¶é¢„æµ‹</li>
                            <li>â€¢ <strong>é•¿æœŸé¢„æµ‹</strong>ï¼šè¶…è¿‡ 24 å°æ—¶çš„é¢„æµ‹å‡†ç¡®ç‡ä¼šæ˜¾è‘—ä¸‹é™</li>
                        </ul>
                    </div>

                    <!-- Improvement Directions -->
                    <div class="glass-card p-6">
                        <h3 class="section-title">æ”¹è¿›æ–¹å‘</h3>
                        <ul class="space-y-3 text-gray-400">
                            <li>â€¢ å¼•å…¥å«æ˜Ÿé¥æ„Ÿæ•°æ®ï¼Œç›‘æµ‹åŒºåŸŸæ€§æ±¡æŸ“åˆ†å¸ƒ</li>
                            <li>â€¢ é›†æˆå®æ—¶äº¤é€šæ•°æ®ï¼Œæé«˜å¯¹äº¤é€šæ’æ”¾çš„é¢„æµ‹</li>
                            <li>â€¢ ä½¿ç”¨æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼ˆLSTMã€Transformerï¼‰å¤„ç†é•¿æ—¶é—´ä¾èµ–</li>
                            <li>â€¢ æ„å»ºé›†æˆæ¨¡å‹ï¼Œç»“åˆå¤šç§ç®—æ³•çš„ä¼˜åŠ¿</li>
                            <li>â€¢ å¼•å…¥å› æœæ¨æ–­æ–¹æ³•ï¼Œæé«˜æ¨¡å‹å¯è§£é‡Šæ€§</li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <script>
        // Tab switching
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                // Remove active class from all buttons and contents
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

                // Add active class to clicked button and corresponding content
                btn.classList.add('active');
                document.getElementById('tab-' + btn.dataset.tab).classList.add('active');

                // Initialize charts if needed
                initChartsForTab(btn.dataset.tab);
            });
        });

        // Chart initialization
        let charts = {};

        function initChartsForTab(tabId) {
            switch(tabId) {
                case 'overview':
                    initPredictionChart();
                    break;
                case 'features':
                    initFeatureImportanceChart();
                    initFeatureCategoryChart();
                    break;
                case 'model':
                    initCVResultsChart();
                    break;
                case 'baseline':
                    initBaselineChart();
                    initAblationChart();
                    break;
                case 'validation':
                    initValidationChart();
                    initErrorDistChart();
                    break;
            }
        }

        // Prediction Chart
        function initPredictionChart() {
            if (charts.prediction) return;

            const chartDom = document.getElementById('predictionChart');
            const chart = echarts.init(chartDom, 'dark');

            // ä½¿ç”¨çœŸå®æ•°æ®æˆ–æ¨¡æ‹Ÿæ•°æ®
            let hours = [];
            let predictions = [];
            let lower = [];
            let upper = [];

            if (globalData.overview && globalData.overview.predictions) {
                const preds = globalData.overview.predictions;
                hours = preds.map(p => {
                    // ç›´æ¥ä» ISO å­—ç¬¦ä¸²æå–å°æ—¶ï¼Œé¿å…æµè§ˆå™¨æ—¶åŒºè½¬æ¢
                    // æ ¼å¼: "2026-02-04T10:00:00+08:00" -> æå– "10"
                    const hour = p.datetime.split('T')[1].split(':')[0];
                    return hour + ':00';
                });
                predictions = preds.map(p => p.predicted_aqi);
                lower = preds.map(p => p.lower_bound);
                upper = preds.map(p => p.upper_bound);
            } else {
                // æ¨¡æ‹Ÿæ•°æ®
                const now = new Date();
                for (let i = 0; i < 24; i++) {
                    const time = new Date(now.getTime() + i * 3600000);
                    hours.push(time.getHours() + ':00');
                    const baseAqi = 65 + Math.sin(i / 6) * 20 + Math.random() * 10;
                    predictions.push(Math.round(baseAqi));
                    lower.push(Math.round(baseAqi - 8));
                    upper.push(Math.round(baseAqi + 8));
                }
            }

            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'axis',
                    formatter: function(params) {
                        const time = params[0].axisValue;
                        let html = `<div style="font-weight:600">${time}</div>`;
                        params.forEach(p => {
                            if (p.seriesName === 'é¢„æµ‹å€¼') {
                                html += `<div>${p.marker} ${p.seriesName}: <b>${p.value}</b></div>`;
                            }
                        });
                        // æ‰¾åˆ°ç½®ä¿¡åŒºé—´
                        const idx = params[0].dataIndex;
                        html += `<div style="color:#888">ç½®ä¿¡åŒºé—´: ${lower[idx]} ~ ${upper[idx]}</div>`;
                        return html;
                    }
                },
                legend: { data: ['é¢„æµ‹å€¼', 'ç½®ä¿¡ä¸Šç•Œ', 'ç½®ä¿¡ä¸‹ç•Œ'], textStyle: { color: '#a0a0b0' } },
                grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: hours,
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' }
                },
                yAxis: {
                    type: 'value',
                    min: function(value) { return Math.floor(value.min * 0.9); },
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' },
                    splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
                },
                series: [
                    {
                        name: 'ç½®ä¿¡ä¸Šç•Œ',
                        type: 'line',
                        data: upper,
                        lineStyle: { opacity: 0 },
                        symbol: 'none',
                        areaStyle: { color: 'rgba(59, 130, 246, 0.15)' }
                    },
                    {
                        name: 'ç½®ä¿¡ä¸‹ç•Œ',
                        type: 'line',
                        data: lower,
                        lineStyle: { opacity: 0 },
                        symbol: 'none',
                        areaStyle: { color: '#0a0a0f' }  // ç”¨èƒŒæ™¯è‰²è¦†ç›–ä¸‹æ–¹
                    },
                    {
                        name: 'é¢„æµ‹å€¼',
                        type: 'line',
                        data: predictions,
                        smooth: true,
                        lineStyle: { color: '#3b82f6', width: 3 },
                        itemStyle: { color: '#3b82f6' },
                        symbol: 'circle',
                        symbolSize: 6
                    }
                ]
            };

            chart.setOption(option);
            charts.prediction = chart;

            window.addEventListener('resize', () => chart.resize());
        }

        // Feature Importance Chart
        function initFeatureImportanceChart() {
            if (charts.featureImportance) return;

            const chartDom = document.getElementById('featureImportanceChart');
            const chart = echarts.init(chartDom, 'dark');

            // v4 æ¨¡å‹ç‰¹å¾é‡è¦æ€§ï¼ˆ1h é¢„æµ‹ï¼Œå¯è§£é‡Šæ€§ä¼˜å…ˆï¼‰
            // æ³¨æ„ï¼š"1hå‰AQI" æ˜¯æŒ‡é¢„æµ‹æ—¶åˆ»å¯çŸ¥çš„æœ€æ–°å†å²å€¼ï¼Œä¸æ˜¯ç›®æ ‡å˜é‡
            const features = [
                '1hå‰AQI', 'PM10æµ“åº¦', 'PM2.5æµ“åº¦', 'AQIå˜åŒ–è¶‹åŠ¿',
                '24hå¹³å‡AQI', 'æ—¥æ¸©å·®', 'éœ²ç‚¹æ¸©åº¦', 'ä¾›æš–å­£',
                'ç›¸å¯¹æ¹¿åº¦', 'æ°”å‹', 'æ¸©åº¦', 'é£é€Ÿ',
                'æ°”å‹å˜åŒ–', 'å‘¨æœ«', 'é«˜æ¹¿åº¦æ ‡è®°', 'æ˜¨æ—¥åŒæœŸAQI',
                'æ—©æ™šé«˜å³°', 'ä½é£é€Ÿæ ‡è®°'
            ];

            const importance = [0.646, 0.204, 0.027, 0.018,
                               0.012, 0.008, 0.007, 0.007,
                               0.006, 0.006, 0.006, 0.006,
                               0.005, 0.004, 0.004, 0.004,
                               0.003, 0.002];

            const option = {
                backgroundColor: 'transparent',
                tooltip: { trigger: 'axis', axisPointer: { type: 'shadow' } },
                grid: { left: '3%', right: '8%', top: '3%', bottom: '3%', containLabel: true },
                xAxis: {
                    type: 'value',
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' },
                    splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
                },
                yAxis: {
                    type: 'category',
                    data: features.reverse(),
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0', fontSize: 11 }
                },
                series: [{
                    type: 'bar',
                    data: importance.reverse(),
                    itemStyle: {
                        color: {
                            type: 'linear',
                            x: 0, y: 0, x2: 1, y2: 0,
                            colorStops: [
                                { offset: 0, color: '#3b82f6' },
                                { offset: 1, color: '#8b5cf6' }
                            ]
                        }
                    },
                    barWidth: 15
                }]
            };

            chart.setOption(option);
            charts.featureImportance = chart;

            window.addEventListener('resize', () => chart.resize());
        }

        // Feature Category Chart
        function initFeatureCategoryChart() {
            if (charts.featureCategory) return;

            const chartDom = document.getElementById('featureCategoryChart');
            const chart = echarts.init(chartDom, 'dark');

            const option = {
                backgroundColor: 'transparent',
                tooltip: { trigger: 'item' },
                series: [{
                    type: 'pie',
                    radius: ['40%', '70%'],
                    avoidLabelOverlap: false,
                    itemStyle: { borderRadius: 10, borderColor: '#1a1a24', borderWidth: 2 },
                    label: { show: true, color: '#a0a0b0' },
                    emphasis: { label: { fontSize: 14, fontWeight: 'bold' } },
                    data: [
                        { value: 35, name: 'æ»åç‰¹å¾', itemStyle: { color: '#3b82f6' } },
                        { value: 28, name: 'æ»šåŠ¨ç»Ÿè®¡', itemStyle: { color: '#10b981' } },
                        { value: 20, name: 'æ—¶é—´ç‰¹å¾', itemStyle: { color: '#f59e0b' } },
                        { value: 25, name: 'æ°”è±¡ç‰¹å¾', itemStyle: { color: '#8b5cf6' } },
                        { value: 15, name: 'å˜åŒ–ç‡', itemStyle: { color: '#ef4444' } },
                        { value: 8, name: 'ä»£ç†å˜é‡', itemStyle: { color: '#06b6d4' } }
                    ]
                }]
            };

            chart.setOption(option);
            charts.featureCategory = chart;

            window.addEventListener('resize', () => chart.resize());
        }

        // CV Results Chart
        function initCVResultsChart() {
            if (charts.cvResults) return;

            const chartDom = document.getElementById('cvResultsChart');
            const chart = echarts.init(chartDom, 'dark');

            const option = {
                backgroundColor: 'transparent',
                tooltip: { trigger: 'axis' },
                legend: { data: ['MAE', 'RMSE'], textStyle: { color: '#a0a0b0' } },
                grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },
                xAxis: {
                    type: 'category',
                    data: ['Fold 1', 'Fold 2', 'Fold 3', 'Fold 4', 'Fold 5'],
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' }
                },
                yAxis: {
                    type: 'value',
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' },
                    splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
                },
                series: [
                    {
                        name: 'MAE',
                        type: 'bar',
                        data: [12.8, 11.9, 13.2, 12.1, 12.5],
                        itemStyle: { color: '#3b82f6' }
                    },
                    {
                        name: 'RMSE',
                        type: 'bar',
                        data: [18.5, 17.8, 19.2, 17.9, 18.1],
                        itemStyle: { color: '#8b5cf6' }
                    }
                ]
            };

            chart.setOption(option);
            charts.cvResults = chart;

            window.addEventListener('resize', () => chart.resize());
        }

        // Baseline Comparison Chart
        function initBaselineChart() {
            if (charts.baseline) return;

            const chartDom = document.getElementById('baselineChart');
            const chart = echarts.init(chartDom, 'dark');

            const option = {
                backgroundColor: 'transparent',
                tooltip: { trigger: 'axis', axisPointer: { type: 'shadow' } },
                grid: { left: '3%', right: '4%', bottom: '15%', containLabel: true },
                xAxis: {
                    type: 'category',
                    data: ['Naive', 'Moving Avg', 'Exp Smooth', 'Linear', 'XGBoost'],
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0', rotate: 15 }
                },
                yAxis: {
                    type: 'value',
                    name: 'MAE',
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' },
                    splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
                },
                series: [{
                    type: 'bar',
                    data: [
                        { value: 22.4, itemStyle: { color: '#6b7280' } },
                        { value: 19.8, itemStyle: { color: '#6b7280' } },
                        { value: 18.2, itemStyle: { color: '#6b7280' } },
                        { value: 15.3, itemStyle: { color: '#6b7280' } },
                        { value: 12.5, itemStyle: { color: '#10b981' } }
                    ],
                    barWidth: 40
                }]
            };

            chart.setOption(option);
            charts.baseline = chart;

            window.addEventListener('resize', () => chart.resize());
        }

        // Ablation Study Chart
        function initAblationChart() {
            if (charts.ablation) return;

            const chartDom = document.getElementById('ablationChart');
            const chart = echarts.init(chartDom, 'dark');

            const option = {
                backgroundColor: 'transparent',
                tooltip: { trigger: 'axis', axisPointer: { type: 'shadow' } },
                legend: { data: ['MAE', 'MAE å¢åŠ é‡'], textStyle: { color: '#a0a0b0' } },
                grid: { left: '3%', right: '4%', bottom: '10%', containLabel: true },
                xAxis: {
                    type: 'category',
                    data: ['å®Œæ•´æ¨¡å‹', 'å»é™¤æ»åç‰¹å¾', 'å»é™¤æ°”è±¡ç‰¹å¾', 'å»é™¤æ—¶é—´ç‰¹å¾', 'å»é™¤æ»šåŠ¨ç‰¹å¾', 'å»é™¤ä»£ç†å˜é‡'],
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0', rotate: 15 }
                },
                yAxis: {
                    type: 'value',
                    name: 'MAE',
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' },
                    splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
                },
                series: [
                    {
                        name: 'MAE',
                        type: 'bar',
                        data: [12.5, 18.2, 14.8, 13.6, 15.1, 12.9],
                        itemStyle: { color: '#3b82f6' },
                        barWidth: 30
                    },
                    {
                        name: 'MAE å¢åŠ é‡',
                        type: 'bar',
                        data: [0, 5.7, 2.3, 1.1, 2.6, 0.4],
                        itemStyle: { color: '#ef4444' },
                        barWidth: 30
                    }
                ]
            };

            chart.setOption(option);
            charts.ablation = chart;

            window.addEventListener('resize', () => chart.resize());
        }

        // Validation Chart
        function initValidationChart() {
            if (charts.validation) return;

            const chartDom = document.getElementById('validationChart');
            const chart = echarts.init(chartDom, 'dark');

            // Use real data if available
            let hours = [];
            let actual = [];
            let predicted = [];

            if (globalData.validation) {
                hours = globalData.validation.datetime.slice(-72).map((d, i) => i + 'h');
                actual = globalData.validation.actual.slice(-72);
                predicted = globalData.validation.predicted.slice(-72).map(v => Math.round(v));
            } else {
                // Fallback to mock data
                for (let i = 0; i < 72; i++) {
                    hours.push(i + 'h');
                    const base = 50 + Math.sin(i / 12 * Math.PI) * 30 + Math.random() * 20;
                    actual.push(Math.round(base));
                    predicted.push(Math.round(base + (Math.random() - 0.5) * 20));
                }
            }

            const option = {
                backgroundColor: 'transparent',
                tooltip: { trigger: 'axis' },
                legend: { data: ['å®é™…å€¼', 'é¢„æµ‹å€¼'], textStyle: { color: '#a0a0b0' } },
                grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },
                xAxis: {
                    type: 'category',
                    data: hours,
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0', interval: 11 }
                },
                yAxis: {
                    type: 'value',
                    name: 'AQI',
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' },
                    splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
                },
                series: [
                    {
                        name: 'å®é™…å€¼',
                        type: 'line',
                        data: actual,
                        lineStyle: { color: '#10b981', width: 2 },
                        itemStyle: { color: '#10b981' },
                        symbol: 'none'
                    },
                    {
                        name: 'é¢„æµ‹å€¼',
                        type: 'line',
                        data: predicted,
                        lineStyle: { color: '#3b82f6', width: 2, type: 'dashed' },
                        itemStyle: { color: '#3b82f6' },
                        symbol: 'none'
                    }
                ]
            };

            chart.setOption(option);
            charts.validation = chart;

            window.addEventListener('resize', () => chart.resize());
        }

        // Error Distribution Chart
        function initErrorDistChart() {
            if (charts.errorDist) return;

            const chartDom = document.getElementById('errorDistChart');
            const chart = echarts.init(chartDom, 'dark');

            // Generate mock error distribution
            const bins = ['-30~-25', '-25~-20', '-20~-15', '-15~-10', '-10~-5', '-5~0', '0~5', '5~10', '10~15', '15~20', '20~25', '25~30'];
            const counts = [15, 45, 120, 280, 450, 620, 680, 420, 240, 95, 35, 10];

            const option = {
                backgroundColor: 'transparent',
                tooltip: { trigger: 'axis' },
                grid: { left: '3%', right: '4%', bottom: '10%', containLabel: true },
                xAxis: {
                    type: 'category',
                    data: bins,
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0', rotate: 30, fontSize: 10 }
                },
                yAxis: {
                    type: 'value',
                    name: 'é¢‘æ¬¡',
                    axisLine: { lineStyle: { color: '#333' } },
                    axisLabel: { color: '#a0a0b0' },
                    splitLine: { lineStyle: { color: 'rgba(255,255,255,0.05)' } }
                },
                series: [{
                    type: 'bar',
                    data: counts,
                    itemStyle: {
                        color: function(params) {
                            const idx = params.dataIndex;
                            if (idx >= 4 && idx <= 7) return '#10b981';
                            if (idx >= 2 && idx <= 9) return '#f59e0b';
                            return '#ef4444';
                        }
                    }
                }]
            };

            chart.setOption(option);
            charts.errorDist = chart;

            window.addEventListener('resize', () => chart.resize());
        }

        // Global data storage
        let globalData = {
            overview: null,
            validation: null,
            modelEval: null,
            features: null
        };

        // Load all data
        async function loadAllData() {
            try {
                // Load overview data
                const overviewRes = await fetch('data/overview.json');
                if (overviewRes.ok) {
                    globalData.overview = await overviewRes.json();
                    updateOverview(globalData.overview);
                }

                // Load validation data
                const validationRes = await fetch('data/validation.json');
                if (validationRes.ok) {
                    globalData.validation = await validationRes.json();
                }

            } catch (e) {
                console.log('Using mock data:', e);
                updateOverviewMock();
            }
        }

        function updateOverview(data) {
            if (data.realtime) {
                const aqi = data.realtime.aqi || '--';
                document.getElementById('currentAqi').textContent = aqi;

                // Set AQI level
                let level = 'åŠ è½½ä¸­...';
                if (aqi <= 50) level = 'ä¼˜';
                else if (aqi <= 100) level = 'è‰¯';
                else if (aqi <= 150) level = 'è½»åº¦æ±¡æŸ“';
                else if (aqi <= 200) level = 'ä¸­åº¦æ±¡æŸ“';
                else if (aqi <= 300) level = 'é‡åº¦æ±¡æŸ“';
                else level = 'ä¸¥é‡æ±¡æŸ“';
                document.getElementById('aqiLevel').textContent = level;

                document.getElementById('pm25Value').textContent = data.realtime.pm25 || '--';
                document.getElementById('pm10Value').textContent = data.realtime.pm10 || '--';
                document.getElementById('tempValue').textContent = data.realtime.temperature || '--';
                document.getElementById('humidityValue').textContent = data.realtime.humidity || '--';
                document.getElementById('dominantPollutant').textContent = 'ä¸»è¦æ±¡æŸ“ç‰©: ' + (data.realtime.dominant_pollutant || '--').toUpperCase();

                // æ˜¾ç¤ºæ•°æ®æ—¶é—´
                if (data.realtime.time) {
                    const dataTime = data.realtime.time.split('T')[0] + ' ' + data.realtime.time.split('T')[1].split('+')[0].substring(0, 5);
                    document.getElementById('aqiDataTime').textContent = 'æ•°æ®æ—¶é—´: ' + dataTime;
                }
            }

            if (data.update_time_display) {
                // ç›´æ¥ä½¿ç”¨æœåŠ¡å™¨ç«¯çš„ä¸­å›½æ—¶é—´æ˜¾ç¤º
                document.getElementById('updateTime').textContent = 'æ›´æ–°æ—¶é—´: ' + data.update_time_display;
            } else if (data.update_time) {
                // å…¼å®¹æ—§æ ¼å¼
                document.getElementById('updateTime').textContent = 'æ›´æ–°æ—¶é—´: ' + new Date(data.update_time).toLocaleString('zh-CN');
            }

            // Update prediction chart with real data
            if (data.predictions && charts.prediction) {
                updatePredictionChartWithData(data.predictions, data.historical);
            }

            // Update recommendations based on current AQI
            const aqi = data.realtime ? data.realtime.aqi : 50;
            updateRecommendations(aqi, data.predictions || []);
        }

        function updatePredictionChartWithData(predictions, historical) {
            if (!charts.prediction) return;

            const hours = predictions.map(p => {
                // ç›´æ¥ä» ISO å­—ç¬¦ä¸²æå–å°æ—¶ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰ï¼Œé¿å…æµè§ˆå™¨æ—¶åŒºè½¬æ¢
                const hour = p.datetime.split('T')[1].split(':')[0];
                return hour + ':00';
            });
            const values = predictions.map(p => p.predicted_aqi);
            const lower = predictions.map(p => p.lower_bound);
            const upper = predictions.map(p => p.upper_bound);

            charts.prediction.setOption({
                xAxis: { data: hours },
                series: [
                    { name: 'ç½®ä¿¡ä¸Šç•Œ', data: upper },
                    { name: 'ç½®ä¿¡ä¸‹ç•Œ', data: lower },
                    { name: 'é¢„æµ‹å€¼', data: values }
                ]
            });
        }

        function updateOverviewMock() {
            document.getElementById('currentAqi').textContent = '72';
            document.getElementById('aqiLevel').textContent = 'è‰¯';
            document.getElementById('pm25Value').textContent = '48';
            document.getElementById('pm10Value').textContent = '65';
            document.getElementById('tempValue').textContent = '8';
            document.getElementById('humidityValue').textContent = '72';
            document.getElementById('dominantPollutant').textContent = 'ä¸»è¦æ±¡æŸ“ç‰©: PM2.5';
            document.getElementById('updateTime').textContent = 'æ›´æ–°æ—¶é—´: ' + new Date().toLocaleString('zh-CN');
            updateRecommendations(72, []);
        }

        // æ ¹æ® AQI ç”Ÿæˆè¡ŒåŠ¨å»ºè®®
        function updateRecommendations(currentAqi, predictions) {
            const recommendations = getRecommendations(currentAqi);

            document.getElementById('rec-outdoor').textContent = recommendations.outdoor;
            document.getElementById('rec-outdoor').className = 'text-xs mt-1 ' + recommendations.outdoorColor;

            document.getElementById('rec-window').textContent = recommendations.window;
            document.getElementById('rec-window').className = 'text-xs mt-1 ' + recommendations.windowColor;

            document.getElementById('rec-mask').textContent = recommendations.mask;
            document.getElementById('rec-mask').className = 'text-xs mt-1 ' + recommendations.maskColor;

            document.getElementById('rec-purifier').textContent = recommendations.purifier;
            document.getElementById('rec-purifier').className = 'text-xs mt-1 ' + recommendations.purifierColor;

            // åˆ†æè¶‹åŠ¿
            if (predictions && predictions.length > 0) {
                const trend = analyzeTrend(currentAqi, predictions);
                document.getElementById('trend-text').textContent = trend;
            } else {
                document.getElementById('trend-text').textContent = 'ç­‰å¾…é¢„æµ‹æ•°æ®...';
            }
        }

        function getRecommendations(aqi) {
            if (aqi <= 50) {
                return {
                    outdoor: 'æ¨èæˆ·å¤–æ´»åŠ¨', outdoorColor: 'text-green-400',
                    window: 'å»ºè®®å¼€çª—', windowColor: 'text-green-400',
                    mask: 'æ— éœ€ä½©æˆ´', maskColor: 'text-gray-400',
                    purifier: 'æ— éœ€å¼€å¯', purifierColor: 'text-gray-400'
                };
            } else if (aqi <= 100) {
                return {
                    outdoor: 'å¯ä»¥è¿›è¡Œ', outdoorColor: 'text-yellow-400',
                    window: 'å¯ä»¥å¼€çª—', windowColor: 'text-yellow-400',
                    mask: 'æ•æ„Ÿäººç¾¤ä½©æˆ´', maskColor: 'text-yellow-400',
                    purifier: 'å¯é€‰å¼€å¯', purifierColor: 'text-gray-400'
                };
            } else if (aqi <= 150) {
                return {
                    outdoor: 'å‡å°‘æ—¶é•¿', outdoorColor: 'text-orange-400',
                    window: 'å‡å°‘å¼€çª—', windowColor: 'text-orange-400',
                    mask: 'å»ºè®®ä½©æˆ´', maskColor: 'text-orange-400',
                    purifier: 'å»ºè®®å¼€å¯', purifierColor: 'text-orange-400'
                };
            } else if (aqi <= 200) {
                return {
                    outdoor: 'é¿å…å¤–å‡º', outdoorColor: 'text-red-400',
                    window: 'ä¸å»ºè®®', windowColor: 'text-red-400',
                    mask: 'å¿…é¡»ä½©æˆ´', maskColor: 'text-red-400',
                    purifier: 'å¿…é¡»å¼€å¯', purifierColor: 'text-red-400'
                };
            } else {
                return {
                    outdoor: 'ç¦æ­¢å¤–å‡º', outdoorColor: 'text-red-500',
                    window: 'ç¦æ­¢å¼€çª—', windowColor: 'text-red-500',
                    mask: 'N95å£ç½©', maskColor: 'text-red-500',
                    purifier: 'æŒç»­è¿è¡Œ', purifierColor: 'text-red-500'
                };
            }
        }

        function analyzeTrend(currentAqi, predictions) {
            if (!predictions || predictions.length < 6) {
                return 'æ•°æ®ä¸è¶³ï¼Œæ— æ³•åˆ†æè¶‹åŠ¿';
            }

            // è®¡ç®—æœªæ¥6å°æ—¶å’Œ12å°æ—¶çš„å¹³å‡å€¼
            const next6h = predictions.slice(0, 6).reduce((sum, p) => sum + p.predicted_aqi, 0) / 6;
            const next12h = predictions.slice(0, 12).reduce((sum, p) => sum + p.predicted_aqi, 0) / 12;

            // æ‰¾å‡ºæœ€é«˜å’Œæœ€ä½ç‚¹
            const maxPred = predictions.reduce((max, p) => p.predicted_aqi > max.predicted_aqi ? p : max);
            const minPred = predictions.reduce((min, p) => p.predicted_aqi < min.predicted_aqi ? p : min);

            const maxHour = maxPred.datetime.split('T')[1].split(':')[0];
            const minHour = minPred.datetime.split('T')[1].split(':')[0];

            let trendText = '';

            if (next6h > currentAqi + 10) {
                trendText = `â¬†ï¸ æœªæ¥6å°æ—¶AQIé¢„è®¡ä¸Šå‡ï¼Œå»ºè®®æå‰å®Œæˆæˆ·å¤–æ´»åŠ¨ã€‚`;
            } else if (next6h < currentAqi - 10) {
                trendText = `â¬‡ï¸ æœªæ¥6å°æ—¶AQIé¢„è®¡ä¸‹é™ï¼Œå¯ç­‰å¾…ç©ºæ°”è´¨é‡æ”¹å–„åå†è¿›è¡Œæˆ·å¤–æ´»åŠ¨ã€‚`;
            } else {
                trendText = `â¡ï¸ æœªæ¥6å°æ—¶AQIç›¸å¯¹ç¨³å®šã€‚`;
            }

            trendText += ` é¢„è®¡ ${minHour}:00 ç©ºæ°”æœ€ä½³(AQIâ‰ˆ${Math.round(minPred.predicted_aqi)})ï¼Œ${maxHour}:00 ç©ºæ°”æœ€å·®(AQIâ‰ˆ${Math.round(maxPred.predicted_aqi)})ã€‚`;

            return trendText;
        }

        // Update validation chart with real data
        function updateValidationChart() {
            if (!globalData.validation || !charts.validation) return;

            const data = globalData.validation;
            const hours = data.datetime.map((d, i) => i + 'h');

            charts.validation.setOption({
                xAxis: { data: hours },
                series: [
                    { data: data.actual },
                    { data: data.predicted }
                ]
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', async () => {
            await loadAllData();
            initPredictionChart();

            // å¦‚æœæœ‰æ•°æ®ï¼Œæ›´æ–°å›¾è¡¨
            if (globalData.overview && globalData.overview.predictions) {
                updatePredictionChartWithData(globalData.overview.predictions);
            }
        });
    </script>
</body>
</html>
